(function(e,k){function c(x){return e.less[x.split("/")[1]]}function a(){for(var x=document.getElementsByTagName("style"),d=0;d<x.length;d++)x[d].type.match(K)&&(new n.Parser).parse(x[d].innerHTML||"",function(q,a){var h=a.toCSS(),c=x[d];c.type="text/css";c.styleSheet?c.styleSheet.cssText=h:c.innerHTML=h})}function m(x,d){for(var q=0;q<n.sheets.length;q++)g(n.sheets[q],x,d,n.sheets.length-(q+1))}function g(x,d,q,a){var h=e.location.href.replace(/[#?].*$/,""),c=x.href.replace(/\?.*$/,""),g=G&&G.getItem(c),
k=G&&G.getItem(c+":timestamp"),m={css:g,timestamp:k};/^(https?|file):/.test(c)||("/"==c.charAt(0)?c=e.location.protocol+"//"+e.location.host+c:c=h.slice(0,h.lastIndexOf("/")+1)+c);var p=c.match(/([^\/]+)$/)[1];D(x.href,x.type,function(h,g){if(!q&&m&&g&&(new Date(g)).valueOf()===(new Date(m.timestamp)).valueOf())v(m.css,x),d(null,null,h,x,{local:!0,remaining:a});else try{(new n.Parser({optimization:n.optimization,paths:[c.replace(/[\w\.-]+$/,"")],mime:x.type,filename:p})).parse(h,function(q,k){if(q)return H(q,
c);try{d(q,k,h,x,{local:!1,lastModified:g,remaining:a});var e=document.getElementById("less-error-message:"+r(c));e&&e.parentNode.removeChild(e)}catch(n){H(n,c)}})}catch(k){H(k,c)}},function(h,d){throw Error("Couldn't load "+d+" ("+h+")");})}function r(x){return x.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\?.*$/,"").replace(/\.[^\.\/]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function v(x,d,q){var c,h=d.href?d.href.replace(/\?.*$/,""):"",a="less:"+(d.title||r(h));null===
(c=document.getElementById(a))&&(c=document.createElement("style"),c.type="text/css",c.media=d.media||"screen",c.id=a,document.getElementsByTagName("head")[0].appendChild(c));if(c.styleSheet)try{c.styleSheet.cssText=x}catch(g){throw Error("Couldn't reassign styleSheet.cssText.");}else d=document.createTextNode(x),0<c.childNodes.length?c.firstChild.nodeValue!==d.nodeValue&&c.replaceChild(d,c.firstChild):c.appendChild(d);q&&G&&(z("saving "+h+" to cache."),G.setItem(h,x),G.setItem(h+":timestamp",q))}
function D(c,d,q,a){function h(h,d,q){200<=h.status&&300>h.status?d(h.responseText,h.getResponseHeader("Last-Modified")):"function"==typeof q&&q(h.status,c)}var g=t(),k=u?!1:n.async;"function"==typeof g.overrideMimeType&&g.overrideMimeType("text/css");g.open("GET",c,k);g.setRequestHeader("Accept",d||"text/x-less, text/css; q=0.9, */*; q=0.5");g.send(null);u?0===g.status||200<=g.status&&300>g.status?q(g.responseText):a(g.status,c):k?g.onreadystatechange=function(){4==g.readyState&&h(g,q,a)}:h(g,q,
a)}function t(){if(e.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(c){return z("browser doesn't support AJAX."),null}}function z(c){"development"==n.env&&"undefined"!=typeof console&&console.log("less: "+c)}function H(c,d){var q="less-error-message:"+r(d),a=document.createElement("div"),h,g,k=[];g=c.filename||d;a.id=q;a.className="less-error-message";g="<h3>"+(c.message||"There is an error in your .less file")+'</h3><p>in <a href="'+g+'">'+g+"</a> ";
var e=function(h,d,c){h.extract[d]&&k.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,parseInt(h.line)+(d-1)).replace(/\{class\}/,c).replace(/\{content\}/,h.extract[d]))};c.stack?g+="<br/>"+c.stack.split("\n").slice(1).join("<br/>"):c.extract&&(e(c,0,""),e(c,1,"line"),e(c,2,""),g+="on line "+c.line+", column "+(c.column+1)+":</p><ul>"+k.join("")+"</ul>");a.innerHTML=g;v(".less-error-message ul, .less-error-message li {\nlist-style-type: none;\nmargin-right: 15px;\npadding: 4px 0;\nmargin: 0;\n}\n.less-error-message label {\nfont-size: 12px;\nmargin-right: 15px;\npadding: 4px 0;\ncolor: #cc7777;\n}\n.less-error-message pre {\ncolor: #dd6666;\npadding: 4px 0;\nmargin: 0;\ndisplay: inline-block;\n}\n.less-error-message pre.line {\ncolor: #ff0000;\n}\n.less-error-message h3 {\nfont-size: 20px;\nfont-weight: bold;\npadding: 15px 0 5px 0;\nmargin: 0;\n}\n.less-error-message a {\ncolor: #10a\n}\n.less-error-message .error {\ncolor: red;\nfont-weight: bold;\npadding-bottom: 2px;\nborder-bottom: 1px dashed red;\n}",
{title:"error-message"});a.style.cssText="font-family: Arial, sans-serif;border: 1px solid #e00;background-color: #eee;border-radius: 5px;-webkit-border-radius: 5px;-moz-border-radius: 5px;color: #e00;padding: 15px;margin-bottom: 15px";"development"==n.env&&(h=setInterval(function(){document.body&&(document.getElementById(q)?document.body.replaceChild(a,document.getElementById(q)):document.body.insertBefore(a,document.body.firstChild),clearInterval(h))},10))}"function"==typeof define&&define.amd&&
define("less",[],function(){return n});Array.isArray||(Array.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)||c instanceof Array});Array.prototype.forEach||(Array.prototype.forEach=function(c,d){for(var q=this.length>>>0,a=0;a<q;a++)a in this&&c.call(d,this[a],a,this)});Array.prototype.map||(Array.prototype.map=function(c,d){for(var a=this.length>>>0,g=Array(a),h=0;h<a;h++)h in this&&(g[h]=c.call(d,this[h],h,this));return g});Array.prototype.filter||(Array.prototype.filter=
function(c,d){for(var a=[],g=0;g<this.length;g++)c.call(d,this[g])&&a.push(this[g]);return a});Array.prototype.reduce||(Array.prototype.reduce=function(c){var d=this.length>>>0,a=0;if(0===d&&1===arguments.length)throw new TypeError;if(2<=arguments.length)var g=arguments[1];else{do{if(a in this){g=this[a++];break}if(++a>=d)throw new TypeError;}while(1)}for(;a<d;a++)a in this&&(g=c.call(null,g,this[a],a,this));return g});Array.prototype.indexOf||(Array.prototype.indexOf=function(c,d){var a=this.length,
g=d||0;if(!a||g>=a)return-1;for(0>g&&(g+=a);g<a;g++)if(Object.prototype.hasOwnProperty.call(this,g)&&c===this[g])return g;return-1});Object.keys||(Object.keys=function(c){var d=[],a;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&d.push(a);return d});String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var n,p;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?("undefined"==typeof e?n={}:n=
e.less={},p=n.tree={},n.mode="rhino"):"undefined"==typeof e?(n=exports,p=c("./tree"),n.mode="node"):("undefined"==typeof e.less&&(e.less={}),n=e.less,p=e.less.tree={},n.mode="browser");n.Parser=function(a){function d(){G=J[K];z=t=s}function g(){J[K]=G;z=s=t}function k(){s>z&&(J[K]=J[K].slice(s-z),z=s)}function h(h){var d,a,c,g;if(h instanceof Function)return h.call(H.parsers);if("string"==typeof h)h=u.charAt(s)===h?h:null,d=1,k();else if(k(),h=h.exec(J[K]))d=h[0].length;else return null;if(h){g=s+=
d;for(c=s+J[K].length-d;s<c;){a=u.charCodeAt(s);if(32!==a&&10!==a&&9!==a)break;s++}return J[K]=J[K].slice(d+(s-g)),z=s,0===J[K].length&&K<J.length-1&&K++,"string"==typeof h?h:1===h.length?h[0]:h}}function e(d,a){var c=h(d);if(c)return c;m(a||("string"==typeof d?"expected '"+d+"' got '"+u.charAt(s)+"'":"unexpected token"))}function m(h,d){throw{index:s,type:d||"Syntax",message:h};}function r(h){return"string"==typeof h?u.charAt(s)===h:h.test(J[K])?!0:!1}function v(h,d){for(var a=h,c=-1;0<=a&&"\n"!==
d.charAt(a);a--)c++;return{line:"number"==typeof h?(d.slice(0,h).match(/\n/g)||"").length:null,column:c}}function R(h,d){var a=h.filename&&d.filename&&h.filename!==d.filename?H.imports.contents["node"===n.mode?c("path").basename(h.filename):h.filename.match(/[^\/]+$/)[0]]:u,g=v(h.index,a),q=g.line,g=g.column,x=a.split("\n");this.type=h.type||"Syntax";this.message=h.message;this.filename=h.filename||d.filename;this.index=h.index;this.line="number"==typeof q?q+1:null;this.callLine=h.call&&v(h.call,
a).line+1;this.callExtract=x[v(h.call,a).line];this.stack=h.stack;this.column=g;this.extract=[x[q-1],x[q],x[q+1]]}var u,s,K,G,t,D,J,z,H,X=function(){},Ba=this.imports={paths:a&&a.paths||[],queue:[],files:{},contents:{},mime:a&&a.mime,error:null,push:function(h,d){var c=this;this.queue.push(h);n.Parser.importer(h,this.paths,function(a,g,q){c.queue.splice(c.queue.indexOf(h),1);c.files[h]=g;c.contents[h]=q;a&&!c.error&&(c.error=a);d(a,g);0===c.queue.length&&X()},a)}};return this.env=a=a||{},this.optimization=
"optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,H={imports:Ba,parse:function(d,g){var q,k,e,U=null;s=K=z=D=0;u=d.replace(/\r\n/g,"\n");J=function(h){for(var d=0,c=/[^"'`\{\}\/\(\)\\]+/g,g=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,q=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`\\\r\n]|\\.)*)`/g,k=0,e,da=h[0],n,m=0,r,ka;m<u.length;m++)switch(c.lastIndex=m,(e=c.exec(u))&&e.index===m&&(m+=e[0].length,da.push(e[0])),r=u.charAt(m),g.lastIndex=q.lastIndex=
m,(e=q.exec(u))&&e.index===m&&(m+=e[0].length,da.push(e[0]),r=u.charAt(m)),!n&&"/"===r&&(ka=u.charAt(m+1),("/"===ka||"*"===ka)&&(e=g.exec(u))&&e.index===m&&(m+=e[0].length,da.push(e[0]),r=u.charAt(m))),r){case "{":if(!n){k++;da.push(r);break}case "}":if(!n){k--;da.push(r);h[++d]=da=[];break}case "(":if(!n){n=!0;da.push(r);break}case ")":if(n){n=!1;da.push(r);break}default:da.push(r)}return 0<k&&(U=new R({index:m,type:"Parse",message:"missing closing `}`",filename:a.filename},a)),h.map(function(h){return h.join("")})}([[]]);
if(U)return g(U);try{q=new p.Ruleset([],h(this.parsers.primary)),q.root=!0}catch(m){return g(new R(m,a))}q.toCSS=function(h){return function(d,g){var q=[];d=d||{};"object"==typeof g&&!Array.isArray(g)&&(g=Object.keys(g).map(function(h){var d=g[h];return d instanceof p.Value||(d instanceof p.Expression||(d=new p.Expression([d])),d=new p.Value([d])),new p.Rule("@"+h,d,!1,0)}),q=[new p.Ruleset(null,g)]);try{var e=h.call(this,{frames:q}).toCSS([],{compress:d.compress||!1})}catch(k){throw new R(k,a);}if(q=
H.imports.error)throw q instanceof R?q:new R(q,a);return d.yuicompress&&"node"===n.mode?c("./cssmin").compressor.cssmin(e):d.compress?e.replace(/(\s)+/g,"$1"):e}}(q.eval);if(s<u.length-1){s=D;e=u.split("\n");k=(u.slice(0,s).match(/\n/g)||"").length+1;for(var r=s,ka=-1;0<=r&&"\n"!==u.charAt(r);r--)ka++;U={type:"Parse",message:"Syntax Error on line "+k,index:s,filename:a.filename,line:k,column:ka,extract:[e[k-2],e[k-1],e[k]]}}0<this.imports.queue.length?X=function(){g(U,q)}:g(U,q)},parsers:{primary:function(){for(var d,
a=[];(d=h(this.mixin.definition)||h(this.rule)||h(this.ruleset)||h(this.mixin.call)||h(this.comment)||h(this.directive))||h(/^[\s\n]+/);)d&&a.push(d);return a},comment:function(){var d;if("/"===u.charAt(s)){if("/"===u.charAt(s+1))return new p.Comment(h(/^\/\/.*/),!0);if(d=h(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))return new p.Comment(d)}},entities:{quoted:function(){var d;d=s;var a;"~"===u.charAt(d)&&(d++,a=!0);if(!('"'!==u.charAt(d)&&"'"!==u.charAt(d))&&(a&&h("~"),d=h(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/)))return new p.Quoted(d[0],
d[1]||d[2],a)},keyword:function(){var d;if(d=h(/^[_A-Za-z-][_A-Za-z0-9-]*/))return p.colors.hasOwnProperty(d)?new p.Color(p.colors[d].slice(1)):new p.Keyword(d)},call:function(){var d,c,g=s;if(d=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(J[K])){d=d[1].toLowerCase();if("url"===d)return null;s+=d.length;if("alpha"===d)return h(this.alpha);h("(");c=h(this.entities.arguments);if(h(")")&&d)return new p.Call(d,c,g,a.filename)}},arguments:function(){for(var d=[],a;(a=h(this.entities.assignment)||h(this.expression))&&
!(d.push(a),!h(",")););return d},literal:function(){return h(this.entities.dimension)||h(this.entities.color)||h(this.entities.quoted)},assignment:function(){var d,a;if((d=h(/^\w+(?=\s?=)/i))&&h("=")&&(a=h(this.entity)))return new p.Assignment(d,a)},url:function(){var d;if("u"===u.charAt(s)&&h(/^url\(/))return d=h(this.entities.quoted)||h(this.entities.variable)||h(this.entities.dataURI)||h(/^[-\w%@$\/.&=:;#+?~]+/)||"",e(")"),new p.URL(d.value||d.data||d instanceof p.Variable?d:new p.Anonymous(d),
Ba.paths)},dataURI:function(){var d;if(h(/^data:/)&&(d={},d.mime=h(/^[^\/]+\/[^,;)]+/)||"",d.charset=h(/^;\s*charset=[^,;)]+/)||"",d.base64=h(/^;\s*base64/)||"",d.data=h(/^,\s*[^)]+/),d.data))return d},variable:function(){var d,c=s;if("@"===u.charAt(s)&&(d=h(/^@@?[\w-]+/)))return new p.Variable(d,c,a.filename)},color:function(){var d;if("#"===u.charAt(s)&&(d=h(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new p.Color(d[1])},dimension:function(){var d;d=u.charCodeAt(s);if(!(57<d||45>d||47===d))if(d=
h(/^(-?\d*\.?\d+)(px|%|em|rem|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn)?/))return new p.Dimension(d[1],d[2])},javascript:function(){var d;d=s;var a;"~"===u.charAt(d)&&(d++,a=!0);if("`"===u.charAt(d)&&(a&&h("~"),d=h(/^`([^`]*)`/)))return new p.JavaScript(d[1],s,a)}},variable:function(){var d;if("@"===u.charAt(s)&&(d=h(/^(@[\w-]+)\s*:/)))return d[1]},shorthand:function(){var d,a;if(r(/^[@\w.%-]+\/[@\w.-]+/)&&(d=h(this.entity))&&h("/")&&(a=h(this.entity)))return new p.Shorthand(d,a)},mixin:{call:function(){var d=
[],c,g,q,e=s;c=u.charAt(s);var k=!1;if(!("."!==c&&"#"!==c)){for(;c=h(/^[#.](?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+/);)d.push(new p.Element(g,c,s)),g=h(">");h("(")&&(q=h(this.entities.arguments))&&h(")");h(this.important)&&(k=!0);if(0<d.length&&(h(";")||r("}")))return new p.mixin.Call(d,q||[],e,a.filename,k)}},definition:function(){var a,c=[],x,k,m,U=!1;if(!("."!==u.charAt(s)&&"#"!==u.charAt(s)||r(/^[^{]*(;|})/)))if(d(),a=h(/^([#.](?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+)\s*\(/)){a=
a[1];do{if("."===u.charAt(s)&&h(/^\.{3}/)){U=!0;break}if(!(x=h(this.entities.variable)||h(this.entities.literal)||h(this.entities.keyword)))break;if(x instanceof p.Variable)if(h(":"))k=e(this.expression,"expected expression"),c.push({name:x.name,value:k});else{if(h(/^\.{3}/)){c.push({name:x.name,variadic:!0});U=!0;break}c.push({name:x.name})}else c.push({value:x})}while(h(","));e(")");h(/^when/)&&(m=e(this.conditions,"expected condition"));if(x=h(this.block))return new p.mixin.Definition(a,c,x,m,
U);g()}}},entity:function(){return h(this.entities.literal)||h(this.entities.variable)||h(this.entities.url)||h(this.entities.call)||h(this.entities.keyword)||h(this.entities.javascript)||h(this.comment)},end:function(){return h(";")||r("}")},alpha:function(){var d;if(h(/^\(opacity=/i)&&(d=h(/^\d+/)||h(this.entities.variable)))return e(")"),new p.Alpha(d)},element:function(){var d,a,c;a=h(this.combinator);(d=h(/^(?:\d+\.\d+|\d+)%/)||h(/^(?:[.#]?|:*)(?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+/)||
h("*")||h(this.attribute)||h(/^\([^)@]+\)/))||h("(")&&(c=h(this.entities.variable))&&h(")")&&(d=new p.Paren(c));if(d)return new p.Element(a,d,s);if(a.value&&"&"===a.value.charAt(0))return new p.Element(a,null,s)},combinator:function(){var d;d=u.charAt(s);if(">"===d||"+"===d||"~"===d){for(s++;" "===u.charAt(s);)s++;return new p.Combinator(d)}if("&"===d){d="&";s++;for(" "===u.charAt(s)&&(d="& ");" "===u.charAt(s);)s++;return new p.Combinator(d)}return" "===u.charAt(s-1)?new p.Combinator(" "):new p.Combinator(null)},
selector:function(){var d,a=[],c;if(h("("))return d=h(this.entity),e(")"),new p.Selector([new p.Element("",d,s)]);for(;(d=h(this.element))&&!(c=u.charAt(s),a.push(d),"{"===c||"}"===c||";"===c||","===c););if(0<a.length)return new p.Selector(a)},tag:function(){return h(/^[a-zA-Z][a-zA-Z-]*[0-9]?/)||h("*")},attribute:function(){var d="",a,c,g;if(h("[")){if(a=h(/^[a-zA-Z-]+/)||h(this.entities.quoted))(g=h(/^[|~*$^]?=/))&&(c=h(this.entities.quoted)||h(/^[\w-]+/))?d=[a,g,c.toCSS?c.toCSS():c].join(""):d=
a;if(h("]")&&d)return"["+d+"]"}},block:function(){var d;if(h("{")&&(d=h(this.primary))&&h("}"))return d},ruleset:function(){var c=[],e,k;for(d();e=h(this.selector);){c.push(e);h(this.comment);if(!h(","))break;h(this.comment)}if(0<c.length&&(k=h(this.block)))return new p.Ruleset(c,k,a.strictImports);D=s;g()},rule:function(){var a,c;a=u.charAt(s);var x;d();if(!("."===a||"#"===a||"&"===a))if(a=h(this.variable)||h(this.property)){"@"!=a.charAt(0)&&(x=/^([^@+\/'"*`(;{}-]*);/.exec(J[K]))?(s+=x[0].length-
1,c=new p.Anonymous(x[1])):"font"===a?c=h(this.font):c=h(this.value);x=h(this.important);if(c&&h(this.end))return new p.Rule(a,c,x,t);D=s;g()}},"import":function(){var d,a,c=s;if(h(/^@import\s+/)&&(d=h(this.entities.quoted)||h(this.entities.url)))if(a=h(this.mediaFeatures),h(";"))return new p.Import(d,Ba,a,c)},mediaFeature:function(){var d,a,c=[];do if(d=h(this.entities.keyword))c.push(d);else if(h("(")){a=h(this.property);d=h(this.entity);if(!h(")"))return null;if(a&&d)c.push(new p.Paren(new p.Rule(a,
d,null,s,!0)));else if(d)c.push(new p.Paren(d));else return null}while(d);if(0<c.length)return new p.Expression(c)},mediaFeatures:function(){var d,a=[];do if(d=h(this.mediaFeature)){if(a.push(d),!h(","))break}else if(d=h(this.entities.variable))if(a.push(d),!h(","))break;while(d);return 0<a.length?a:null},media:function(){var d,a;if(h(/^@media/)&&(d=h(this.mediaFeatures),a=h(this.block)))return new p.Media(a,d)},directive:function(){var d,a,c;if("@"===u.charAt(s)){if(a=h(this["import"])||h(this.media))return a;
if(d=h(/^@page|@keyframes/)||h(/^@(?:-webkit-|-moz-|-o-|-ms-)[a-z0-9-]+/)){if(c=(h(/^[^{]+/)||"").trim(),a=h(this.block))return new p.Directive(d+" "+c,a)}else if(d=h(/^@[-a-z]+/))if("@font-face"===d){if(a=h(this.block))return new p.Directive(d,a)}else if((a=h(this.entity))&&h(";"))return new p.Directive(d,a)}},font:function(){for(var d=[],a=[],c;c=h(this.shorthand)||h(this.entity);)a.push(c);d.push(new p.Expression(a));if(h(","))for(;(c=h(this.expression))&&!(d.push(c),!h(",")););return new p.Value(d)},
value:function(){for(var d,a=[];(d=h(this.expression))&&!(a.push(d),!h(",")););if(0<a.length)return new p.Value(a)},important:function(){if("!"===u.charAt(s))return h(/^! *important/)},sub:function(){var d;if(h("(")&&(d=h(this.expression))&&h(")"))return d},multiplication:function(){var d,a,c,g;if(d=h(this.operand)){for(;!r(/^\/\*/)&&(c=h("/")||h("*"))&&(a=h(this.operand));)g=new p.Operation(c,[g||d,a]);return g||d}},addition:function(){var d,a,c,g;if(d=h(this.multiplication)){for(;(c=h(/^[-+]\s+/)||
" "!=u.charAt(s-1)&&(h("+")||h("-")))&&(a=h(this.multiplication));)g=new p.Operation(c,[g||d,a]);return g||d}},conditions:function(){var d,a,c=s,g;if(d=h(this.condition)){for(;h(",")&&(a=h(this.condition));)g=new p.Condition("or",g||d,a,c);return g||d}},condition:function(){var d,a,c,g,q=s,x=!1;h(/^not/)&&(x=!0);e("(");if(d=h(this.addition)||h(this.entities.keyword)||h(this.entities.quoted))return(g=h(/^(?:>=|=<|[<=>])/))?(a=h(this.addition)||h(this.entities.keyword)||h(this.entities.quoted))?c=new p.Condition(g,
d,a,q,x):m("expected expression"):c=new p.Condition("=",d,new p.Keyword("true"),q,x),e(")"),h(/^and/)?new p.Condition("and",c,h(this.condition)):c},operand:function(){var d,a=u.charAt(s+1);"-"===u.charAt(s)&&("@"===a||"("===a)&&(d=h("-"));a=h(this.sub)||h(this.entities.dimension)||h(this.entities.color)||h(this.entities.variable)||h(this.entities.call);return d?new p.Operation("*",[new p.Dimension(-1),a]):a},expression:function(){for(var d,a=[];d=h(this.addition)||h(this.entity);)a.push(d);if(0<a.length)return new p.Expression(a)},
property:function(){var d;if(d=h(/^(\*?-?[-a-z_0-9]+)\s*:/))return d[1]}}}};if("browser"===n.mode||"rhino"===n.mode)n.Parser.importer=function(a,d,c,e){!/^([a-z]+:)?\//.test(a)&&0<d.length&&(a=d[0]+a);g({href:a,title:a,type:e.mime},function(h){h&&"function"==typeof e.errback?e.errback.call(null,a,d,c,e):c.apply(null,arguments)},!0)};(function(a){function d(d){return a.functions.hsla(d.h,d.s,d.l,d.a)}function c(d){if(d instanceof a.Dimension)return parseFloat("%"==d.unit?d.value/100:d.value);if("number"==
typeof d)return d;throw{error:"RuntimeError",message:"color functions take numbers as parameters"};}function g(d){return Math.min(1,Math.max(0,d))}a.functions={rgb:function(d,a,c){return this.rgba(d,a,c,1)},rgba:function(d,g,e,k){d=[d,g,e].map(function(d){return c(d)});k=c(k);return new a.Color(d,k)},hsl:function(d,a,c){return this.hsla(d,a,c,1)},hsla:function(d,a,g,e){function k(d){return d=0>d?d+1:1<d?d-1:d,1>6*d?m+6*(x-m)*d:1>2*d?x:2>3*d?m+6*(x-m)*(2/3-d):m}d=c(d)%360/360;a=c(a);g=c(g);e=c(e);
var x=0.5>=g?g*(a+1):g+a-g*a,m=2*g-x;return this.rgba(255*k(d+1/3),255*k(d),255*k(d-1/3),e)},hue:function(d){return new a.Dimension(Math.round(d.toHSL().h))},saturation:function(d){return new a.Dimension(Math.round(100*d.toHSL().s),"%")},lightness:function(d){return new a.Dimension(Math.round(100*d.toHSL().l),"%")},alpha:function(d){return new a.Dimension(d.toHSL().a)},saturate:function(a,c){var q=a.toHSL();return q.s+=c.value/100,q.s=g(q.s),d(q)},desaturate:function(a,c){var q=a.toHSL();return q.s-=
c.value/100,q.s=g(q.s),d(q)},lighten:function(a,c){var q=a.toHSL();return q.l+=c.value/100,q.l=g(q.l),d(q)},darken:function(a,c){var q=a.toHSL();return q.l-=c.value/100,q.l=g(q.l),d(q)},fadein:function(a,c){var q=a.toHSL();return q.a+=c.value/100,q.a=g(q.a),d(q)},fadeout:function(a,c){var q=a.toHSL();return q.a-=c.value/100,q.a=g(q.a),d(q)},fade:function(a,c){var q=a.toHSL();return q.a=c.value/100,q.a=g(q.a),d(q)},spin:function(a,c){var g=a.toHSL(),q=(g.h+c.value)%360;return g.h=0>q?360+q:q,d(g)},
mix:function(d,c,g){g=g.value/100;var q=2*g-1,e=d.toHSL().a-c.toHSL().a,q=((-1==q*e?q:(q+e)/(1+q*e))+1)/2,e=1-q;return new a.Color([d.rgb[0]*q+c.rgb[0]*e,d.rgb[1]*q+c.rgb[1]*e,d.rgb[2]*q+c.rgb[2]*e],d.alpha*g+c.alpha*(1-g))},greyscale:function(d){return this.desaturate(d,new a.Dimension(100))},e:function(d){return new a.Anonymous(d instanceof a.JavaScript?d.evaluated:d)},escape:function(d){return new a.Anonymous(encodeURI(d.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,
"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(d){for(var c=Array.prototype.slice.call(arguments,1),g=d.value,q=0;q<c.length;q++)g=g.replace(/%[sda]/i,function(d){var a=d.match(/s/i)?c[q].value:c[q].toCSS();return d.match(/[A-Z]$/)?encodeURIComponent(a):a});return g=g.replace(/%%/g,"%"),new a.Quoted('"'+g+'"',g)},round:function(d){return this._math("round",d)},ceil:function(d){return this._math("ceil",d)},floor:function(d){return this._math("floor",d)},_math:function(d,g){if(g instanceof
a.Dimension)return new a.Dimension(Math[d](c(g)),g.unit);if("number"==typeof g)return Math[d](g);throw{type:"Argument",message:"argument must be a number"};},argb:function(d){return new a.Anonymous(d.toARGB())},percentage:function(d){return new a.Dimension(100*d.value,"%")},color:function(d){if(d instanceof a.Quoted)return new a.Color(d.value.slice(1));throw{type:"Argument",message:"argument must be a string"};},iscolor:function(d){return this._isa(d,a.Color)},isnumber:function(d){return this._isa(d,
a.Dimension)},isstring:function(d){return this._isa(d,a.Quoted)},iskeyword:function(d){return this._isa(d,a.Keyword)},isurl:function(d){return this._isa(d,a.URL)},ispixel:function(d){return d instanceof a.Dimension&&"px"===d.unit?a.True:a.False},ispercentage:function(d){return d instanceof a.Dimension&&"%"===d.unit?a.True:a.False},isem:function(d){return d instanceof a.Dimension&&"em"===d.unit?a.True:a.False},_isa:function(d,c){return d instanceof c?a.True:a.False}}})(c("./tree"));(function(a){a.colors=
{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",
darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",
gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",
lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",
navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",
sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}})(c("./tree"));(function(a){a.Alpha=function(d){this.value=d};a.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?
this.value.toCSS():this.value)+")"},eval:function(d){return this.value.eval&&(this.value=this.value.eval(d)),this}}})(c("../tree"));(function(a){a.Anonymous=function(d){this.value=d.value||d};a.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this}}})(c("../tree"));(function(a){a.Assignment=function(d,a){this.key=d;this.value=a};a.Assignment.prototype={toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(d){return this.value.eval&&
(this.value=this.value.eval(d)),this}}})(c("../tree"));(function(a){a.Call=function(d,a,c,g){this.name=d;this.args=a;this.index=c;this.filename=g};a.Call.prototype={eval:function(d){var c=this.args.map(function(a){return a.eval(d)});if(!(this.name in a.functions))return new a.Anonymous(this.name+"("+c.map(function(d){return d.toCSS()}).join(", ")+")");try{return a.functions[this.name].apply(a.functions,c)}catch(g){throw{type:g.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(g.message?
": "+g.message:""),index:this.index,filename:this.filename};}},toCSS:function(d){return this.eval(d).toCSS()}}})(c("../tree"));(function(a){a.Color=function(d,a){Array.isArray(d)?this.rgb=d:6==d.length?this.rgb=d.match(/.{2}/g).map(function(d){return parseInt(d,16)}):this.rgb=d.split("").map(function(d){return parseInt(d+d,16)});this.alpha="number"==typeof a?a:1};a.Color.prototype={eval:function(){return this},toCSS:function(){return 1>this.alpha?"rgba("+this.rgb.map(function(d){return Math.round(d)}).concat(this.alpha).join(", ")+
")":"#"+this.rgb.map(function(d){return d=Math.round(d),d=(255<d?255:0>d?0:d).toString(16),1===d.length?"0"+d:d}).join("")},operate:function(d,c){var g=[];c instanceof a.Color||(c=c.toColor());for(var h=0;3>h;h++)g[h]=a.operate(d,this.rgb[h],c.rgb[h]);return new a.Color(g,this.alpha+c.alpha)},toHSL:function(){var d=this.rgb[0]/255,a=this.rgb[1]/255,c=this.rgb[2]/255,g=this.alpha,e=Math.max(d,a,c),k=Math.min(d,a,c),x,m=(e+k)/2,n=e-k;if(e===k)x=k=0;else{k=0.5<m?n/(2-e-k):n/(e+k);switch(e){case d:x=
(a-c)/n+(a<c?6:0);break;case a:x=(c-d)/n+2;break;case c:x=(d-a)/n+4}x/=6}return{h:360*x,s:k,l:m,a:g}},toARGB:function(){return"#"+[Math.round(255*this.alpha)].concat(this.rgb).map(function(d){return d=Math.round(d),d=(255<d?255:0>d?0:d).toString(16),1===d.length?"0"+d:d}).join("")}}})(c("../tree"));(function(a){a.Comment=function(d,a){this.value=d;this.silent=!!a};a.Comment.prototype={toCSS:function(d){return d.compress?"":this.value},eval:function(){return this}}})(c("../tree"));(function(a){a.Condition=
function(d,a,c,g,e){this.op=d.trim();this.lvalue=a;this.rvalue=c;this.index=g;this.negate=e};a.Condition.prototype.eval=function(d){var a=this.lvalue.eval(d),c=this.rvalue.eval(d),g=this.index,e;e=function(d){switch(d){case "and":return a&&c;case "or":return a||c;default:if(a.compare)e=a.compare(c);else if(c.compare)e=c.compare(a);else throw{type:"Type",message:"Unable to perform comparison",index:g};switch(e){case -1:return"<"===d||"=<"===d;case 0:return"="===d||">="===d||"=<"===d;case 1:return">"===
d||">="===d}}}(this.op);return this.negate?!e:e}})(c("../tree"));(function(a){a.Dimension=function(d,a){this.value=parseFloat(d);this.unit=a||null};a.Dimension.prototype={eval:function(){return this},toColor:function(){return new a.Color([this.value,this.value,this.value])},toCSS:function(){return this.value+this.unit},operate:function(d,c){return new a.Dimension(a.operate(d,this.value,c.value),this.unit||c.unit)},compare:function(d){return d instanceof a.Dimension?d.value>this.value?-1:d.value<this.value?
1:0:-1}}})(c("../tree"));(function(a){a.Directive=function(d,c,g){this.name=d;Array.isArray(c)?(this.ruleset=new a.Ruleset([],c),this.ruleset.allowImports=!0):this.value=c};a.Directive.prototype={toCSS:function(d,a){return this.ruleset?(this.ruleset.root=!0,this.name+(a.compress?"{":" {\n  ")+this.ruleset.toCSS(d,a).trim().replace(/\n/g,"\n  ")+(a.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(d){return d.frames.unshift(this),this.ruleset=this.ruleset&&this.ruleset.eval(d),
d.frames.shift(),this},variable:function(d){return a.Ruleset.prototype.variable.call(this.ruleset,d)},find:function(){return a.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.ruleset)}}})(c("../tree"));(function(a){a.Element=function(d,c,g){this.combinator=d instanceof a.Combinator?d:new a.Combinator(d);"string"==typeof c?this.value=c.trim():c?this.value=c:this.value="";this.index=g};a.Element.prototype.eval=function(d){return new a.Element(this.combinator,
this.value.eval?this.value.eval(d):this.value,this.index)};a.Element.prototype.toCSS=function(d){return this.combinator.toCSS(d||{})+(this.value.toCSS?this.value.toCSS(d):this.value)};a.Combinator=function(d){" "===d?this.value=" ":"& "===d?this.value="& ":this.value=d?d.trim():""};a.Combinator.prototype.toCSS=function(d){return{"":""," ":" ","&":"","& ":" ",":":" :","+":d.compress?"+":" + ","~":d.compress?"~":" ~ ",">":d.compress?">":" > "}[this.value]}})(c("../tree"));(function(a){a.Expression=
function(d){this.value=d};a.Expression.prototype={eval:function(d){return 1<this.value.length?new a.Expression(this.value.map(function(a){return a.eval(d)})):1===this.value.length?this.value[0].eval(d):this},toCSS:function(d){return this.value.map(function(a){return a.toCSS?a.toCSS(d):""}).join(" ")}}})(c("../tree"));(function(a){a.Import=function(d,c,g,h){var e=this;this.index=h;this._path=d;this.features=g&&new a.Value(g);d instanceof a.Quoted?this.path=/\.(le?|c)ss(\?.*)?$/.test(d.value)?d.value:
d.value+".less":this.path=d.value.value||d.value;(this.css=/css(\?.*)?$/.test(this.path))||c.push(this.path,function(d,c){d&&(d.index=h);e.root=c||new a.Ruleset([],[])})};a.Import.prototype={toCSS:function(d){d=this.features?" "+this.features.toCSS(d):"";return this.css?"@import "+this._path.toCSS()+d+";\n":""},eval:function(d){var c;this.features&&this.features.eval(d);if(this.css)return this;c=new a.Ruleset([],this.root.rules.slice(0));for(var g=0;g<c.rules.length;g++)c.rules[g]instanceof a.Import&&
Array.prototype.splice.apply(c.rules,[g,1].concat(c.rules[g].eval(d)));return this.features?new a.Media(c.rules,this.features.value):c.rules}}})(c("../tree"));(function(a){a.JavaScript=function(d,a,c){this.escaped=c;this.expression=d;this.index=a};a.JavaScript.prototype={eval:function(d){var c,g=this,h={},e=this.expression.replace(/@\{([\w-]+)\}/g,function(c,h){return a.jsify((new a.Variable("@"+h,g.index)).eval(d))});try{e=new Function("return ("+e+")")}catch(k){throw{message:"JavaScript evaluation error: `"+
e+"`",index:this.index};}for(var m in d.frames[0].variables())h[m.slice(1)]={value:d.frames[0].variables()[m].value,toJS:function(){return this.value.eval(d).toCSS()}};try{c=e.call(h)}catch(n){throw{message:"JavaScript evaluation error: '"+n.name+": "+n.message+"'",index:this.index};}return"string"==typeof c?new a.Quoted('"'+c+'"',c,this.escaped,this.index):Array.isArray(c)?new a.Anonymous(c.join(", ")):new a.Anonymous(c)}}})(c("../tree"));(function(a){a.Keyword=function(d){this.value=d};a.Keyword.prototype=
{eval:function(){return this},toCSS:function(){return this.value},compare:function(d){return d instanceof a.Keyword?d.value===this.value?0:1:-1}};a.True=new a.Keyword("true");a.False=new a.Keyword("false")})(c("../tree"));(function(a){a.Media=function(d,c){var g=new a.Element("&",null,0),g=[new a.Selector([g])];this.features=new a.Value(c);this.ruleset=new a.Ruleset(g,d);this.ruleset.allowImports=!0};a.Media.prototype={toCSS:function(d,a){var c=this.features.toCSS(a);return this.ruleset.root=0===
d.length||d[0].multiMedia,"@media "+c+(a.compress?"{":" {\n  ")+this.ruleset.toCSS(d,a).trim().replace(/\n/g,"\n  ")+(a.compress?"}":"\n}\n")},eval:function(d){d.mediaBlocks||(d.mediaBlocks=[],d.mediaPath=[]);var c=d.mediaBlocks.length;d.mediaPath.push(this);d.mediaBlocks.push(this);var g=new a.Media([],[]);return g.features=this.features.eval(d),d.frames.unshift(this.ruleset),g.ruleset=this.ruleset.eval(d),d.frames.shift(),d.mediaBlocks[c]=g,d.mediaPath.pop(),0===d.mediaPath.length?g.evalTop(d):
g.evalNested(d)},variable:function(d){return a.Ruleset.prototype.variable.call(this.ruleset,d)},find:function(){return a.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.ruleset)},evalTop:function(d){var c=this;1<d.mediaBlocks.length&&(c=new a.Element("&",null,0),c=[new a.Selector([c])],c=new a.Ruleset(c,d.mediaBlocks),c.multiMedia=!0);return delete d.mediaBlocks,delete d.mediaPath,c},evalNested:function(d){var c,g=d.mediaPath.concat([this]);
for(c=0;c<g.length;c++)d=g[c].features instanceof a.Value?g[c].features.value:g[c].features,g[c]=Array.isArray(d)?d:[d];return this.features=new a.Value(this.permute(g).map(function(d){d=d.map(function(d){return d.toCSS?d:new a.Anonymous(d)});for(c=d.length-1;0<c;c--)d.splice(c,0,new a.Anonymous("and"));return new a.Expression(d)})),new a.Ruleset([],[])},permute:function(d){if(0===d.length)return[];if(1===d.length)return d[0];for(var a=[],c=this.permute(d.slice(1)),g=0;g<c.length;g++)for(var e=0;e<
d[0].length;e++)a.push([d[0][e]].concat(c[g]));return a}}})(c("../tree"));(function(a){a.mixin={};a.mixin.Call=function(d,c,g,h,e){this.selector=new a.Selector(d);this.arguments=c;this.index=g;this.filename=h;this.important=e};a.mixin.Call.prototype={eval:function(d){var a,c,g=[],e=!1;for(c=0;c<d.frames.length;c++)if(0<(a=d.frames[c].find(this.selector)).length){c=this.arguments&&this.arguments.map(function(a){return a.eval(d)});for(var k=0;k<a.length;k++)if(a[k].match(c,d))try{Array.prototype.push.apply(g,
a[k].eval(d,this.arguments,this.important).rules),e=!0}catch(m){throw{message:m.message,index:this.index,filename:this.filename,stack:m.stack};}if(e)return g;throw{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+this.arguments.map(function(d){return d.toCSS()}).join(", ")+")`",index:this.index,filename:this.filename};}throw{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename};}};a.mixin.Definition=
function(d,c,g,h,e){this.name=d;this.selectors=[new a.Selector([new a.Element(null,d)])];this.params=c;this.condition=h;this.variadic=e;this.arity=c.length;this.rules=g;this._lookups={};this.required=c.reduce(function(d,a){return!a.name||a.name&&!a.value?d+1:d},0);this.parent=a.Ruleset.prototype;this.frames=[]};a.mixin.Definition.prototype={toCSS:function(){return""},variable:function(d){return this.parent.variable.call(this,d)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,
arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(d,c){for(var g=new a.Ruleset(null,[]),h,e=0,k;e<this.params.length;e++)if(k=this.params[e].name)if(this.params[e].variadic&&c){h=[];for(var m=e;m<c.length;m++)h.push(c[m].eval(d));g.rules.unshift(new a.Rule(k,(new a.Expression(h)).eval(d)))}else if(h=c&&c[e]||this.params[e].value)g.rules.unshift(new a.Rule(k,h.eval(d)));else throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+c.length+
" for "+this.arity+")"};return g},eval:function(d,c,g){for(var h=this.evalParams(d,c),e=[],k,m=0;m<Math.max(this.params.length,c&&c.length);m++)e.push(c[m]||this.params[m].value);return h.rules.unshift(new a.Rule("@arguments",(new a.Expression(e)).eval(d))),k=g?this.rules.map(function(d){return new a.Rule(d.name,d.value,"!important",d.index)}):this.rules.slice(0),(new a.Ruleset(null,k)).eval({frames:[this,h].concat(this.frames,d.frames)})},match:function(d,a){var c=d&&d.length||0;if(!this.variadic&&
(c<this.required||c>this.params.length||0<this.required&&c>this.params.length)||this.condition&&!this.condition.eval({frames:[this.evalParams(a,d)].concat(a.frames)}))return!1;for(var c=Math.min(c,this.arity),g=0;g<c;g++)if(!this.params[g].name&&d[g].eval(a).toCSS()!=this.params[g].value.eval(a).toCSS())return!1;return!0}}})(c("../tree"));(function(a){a.Operation=function(d,a){this.op=d.trim();this.operands=a};a.Operation.prototype.eval=function(d){var c=this.operands[0].eval(d);d=this.operands[1].eval(d);
var g;if(c instanceof a.Dimension&&d instanceof a.Color)if("*"===this.op||"+"===this.op)g=d,d=c,c=g;else throw{name:"OperationError",message:"Can't substract or divide a color from a number"};return c.operate(this.op,d)};a.operate=function(d,a,c){switch(d){case "+":return a+c;case "-":return a-c;case "*":return a*c;case "/":return a/c}}})(c("../tree"));(function(a){a.Paren=function(a){this.value=a};a.Paren.prototype={toCSS:function(a){return"("+this.value.toCSS(a)+")"},eval:function(d){return new a.Paren(this.value.eval(d))}}})(c("../tree"));
(function(a){a.Quoted=function(a,c,g,h){this.escaped=g;this.value=c||"";this.quote=a.charAt(0);this.index=h};a.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(d){var c=this,g=this.value.replace(/`([^`]+)`/g,function(g,e){return(new a.JavaScript(e,c.index,!0)).eval(d).value}).replace(/@\{([\w-]+)\}/g,function(g,e){var k=(new a.Variable("@"+e,c.index)).eval(d);return"value"in k?k.value:k.toCSS()});return new a.Quoted(this.quote+g+this.quote,
g,this.escaped,this.index)}}})(c("../tree"));(function(a){a.Rule=function(d,c,g,h,e){this.name=d;this.value=c instanceof a.Value?c:new a.Value([c]);this.important=g?" "+g.trim():"";this.index=h;this.inline=e||!1;"@"===d.charAt(0)?this.variable=!0:this.variable=!1};a.Rule.prototype.toCSS=function(a){return this.variable?"":this.name+(a.compress?":":": ")+this.value.toCSS(a)+this.important+(this.inline?"":";")};a.Rule.prototype.eval=function(d){return new a.Rule(this.name,this.value.eval(d),this.important,
this.index,this.inline)};a.Shorthand=function(a,c){this.a=a;this.b=c};a.Shorthand.prototype={toCSS:function(a){return this.a.toCSS(a)+"/"+this.b.toCSS(a)},eval:function(){return this}}})(c("../tree"));(function(a){a.Ruleset=function(a,c,g){this.selectors=a;this.rules=c;this._lookups={};this.strictImports=g};a.Ruleset.prototype={eval:function(d){var c=this.selectors&&this.selectors.map(function(a){return a.eval(d)}),c=new a.Ruleset(c,this.rules.slice(0),this.strictImports);c.root=this.root;c.allowImports=
this.allowImports;d.frames.unshift(c);if(c.root||c.allowImports||!c.strictImports)for(var g=0;g<c.rules.length;g++)c.rules[g]instanceof a.Import&&Array.prototype.splice.apply(c.rules,[g,1].concat(c.rules[g].eval(d)));for(g=0;g<c.rules.length;g++)c.rules[g]instanceof a.mixin.Definition&&(c.rules[g].frames=d.frames.slice(0));for(g=0;g<c.rules.length;g++)c.rules[g]instanceof a.mixin.Call&&Array.prototype.splice.apply(c.rules,[g,1].concat(c.rules[g].eval(d)));for(var g=0,h;g<c.rules.length;g++)h=c.rules[g],
h instanceof a.mixin.Definition||(c.rules[g]=h.eval?h.eval(d):h);return d.frames.shift(),c},match:function(a){return!a||0===a.length},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(d,c){return c instanceof a.Rule&&!0===c.variable&&(d[c.name]=c),d},{})},variable:function(a){return this.variables()[a]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(d){return d instanceof a.Ruleset||d instanceof
a.mixin.Definition})},find:function(d,c){c=c||this;var g=[],h=d.toCSS();return h in this._lookups?this._lookups[h]:(this.rulesets().forEach(function(h){if(h!==c)for(var e=0;e<h.selectors.length;e++)if(d.match(h.selectors[e])){d.elements.length>h.selectors[e].elements.length?Array.prototype.push.apply(g,h.find(new a.Selector(d.elements.slice(1)),c)):g.push(h);break}}),this._lookups[h]=g)},toCSS:function(d,c){var g=[],h=[],e=[],k=[],m,n;this.root||(0===d.length?k=this.selectors.map(function(a){return[a]}):
this.joinSelectors(k,d,this.selectors));for(var r=0;r<this.rules.length;r++)n=this.rules[r],n.rules||n instanceof a.Directive||n instanceof a.Media?e.push(n.toCSS(k,c)):n instanceof a.Comment?n.silent||(this.root?e.push(n.toCSS(c)):h.push(n.toCSS(c))):n.toCSS&&!n.variable?h.push(n.toCSS(c)):n.value&&!n.variable&&h.push(n.value.toString());return e=e.join(""),this.root?g.push(h.join(c.compress?"":"\n")):0<h.length&&(m=k.map(function(a){return a.map(function(a){return a.toCSS(c)}).join("").trim()}).join(c.compress?
",":",\n"),g.push(m,(c.compress?"{":" {\n  ")+h.join(c.compress?"":"\n  ")+(c.compress?"}":"\n}\n"))),g.push(e),g.join("")+(c.compress?"\n":"")},joinSelectors:function(a,c,g){for(var h=0;h<g.length;h++)this.joinSelector(a,c,g[h])},joinSelector:function(d,c,g){for(var h=[],e=[],k=[],m=[],n=!1,r,p=0;p<g.elements.length;p++)r=g.elements[p],"&"===r.combinator.value.charAt(0)&&(n=!0),n?m.push(r):k.push(r);n||(m=k,k=[]);0<k.length&&h.push(new a.Selector(k));0<m.length&&e.push(new a.Selector(m));for(g=0;g<
c.length;g++)d.push(h.concat(c[g]).concat(e))}}})(c("../tree"));(function(a){a.Selector=function(a){this.elements=a;""===this.elements[0].combinator.value&&(this.elements[0].combinator.value=" ")};a.Selector.prototype.match=function(a){var c=this.elements.length,g=a.elements.length,h=Math.min(c,g);if(c<g)return!1;for(c=0;c<h;c++)if(this.elements[c].value!==a.elements[c].value)return!1;return!0};a.Selector.prototype.eval=function(d){return new a.Selector(this.elements.map(function(a){return a.eval(d)}))};
a.Selector.prototype.toCSS=function(a){return this._css?this._css:this._css=this.elements.map(function(c){return"string"==typeof c?" "+c.trim():c.toCSS(a)}).join("")}})(c("../tree"));(function(a){a.URL=function(a,c){a.data?this.attrs=a:("undefined"!=typeof e&&!/^(?:https?:\/\/|file:\/\/|data:|\/)/.test(a.value)&&0<c.length&&(a.value=c[0]+("/"===a.value.charAt(0)?a.value.slice(1):a.value)),this.value=a,this.paths=c)};a.URL.prototype={toCSS:function(){return"url("+(this.attrs?"data:"+this.attrs.mime+
this.attrs.charset+this.attrs.base64+this.attrs.data:this.value.toCSS())+")"},eval:function(d){return this.attrs?this:new a.URL(this.value.eval(d),this.paths)}}})(c("../tree"));(function(a){a.Value=function(a){this.value=a;this.is="value"};a.Value.prototype={eval:function(d){return 1===this.value.length?this.value[0].eval(d):new a.Value(this.value.map(function(a){return a.eval(d)}))},toCSS:function(a){return this.value.map(function(c){return c.toCSS(a)}).join(a.compress?",":", ")}}})(c("../tree"));
(function(a){a.Variable=function(a,c,g){this.name=a;this.index=c;this.file=g};a.Variable.prototype={eval:function(d){var c,g,h=this.name;0==h.indexOf("@@")&&(h="@"+(new a.Variable(h.slice(1))).eval(d).value);if(c=a.find(d.frames,function(a){if(g=a.variable(h))return g.value.eval(d)}))return c;throw{type:"Name",message:"variable "+h+" is undefined",filename:this.file,index:this.index};}}})(c("../tree"));(function(a){a.find=function(a,c){for(var g=0,h;g<a.length;g++)if(h=c.call(a,a[g]))return h;return null};
a.jsify=function(a){return Array.isArray(a.value)&&1<a.value.length?"["+a.value.map(function(a){return a.toCSS(!1)}).join(", ")+"]":a.toCSS(!1)}})(c("./tree"));var u="file:"===location.protocol||"chrome:"===location.protocol||"chrome-extension:"===location.protocol||"resource:"===location.protocol;n.env=n.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||0<location.port.length||u?"development":"production");n.async=!1;n.poll=n.poll||(u?1E3:1500);n.watch=
function(){return this.watchMode=!0};n.unwatch=function(){return this.watchMode=!1};"development"===n.env?(n.optimization=0,/!watch/.test(location.hash)&&n.watch(),n.watchTimer=setInterval(function(){n.watchMode&&m(function(a,c,g,e,h){c&&v(c.toCSS(),e,h.lastModified)})},n.poll)):n.optimization=3;var G;try{G="undefined"==typeof e.localStorage?null:e.localStorage}catch(R){G=null}var J=document.getElementsByTagName("link"),K=/^text\/(x-)?less$/;n.sheets=[];for(var X=0;X<J.length;X++)("stylesheet/less"===
J[X].rel||J[X].rel.match(/stylesheet/)&&J[X].type.match(K))&&n.sheets.push(J[X]);n.refresh=function(c){var d,g;d=g=new Date;m(function(a,c,e,k,m){m.local?z("loading "+k.href+" from cache."):(z("parsed "+k.href+" successfully."),v(c.toCSS(),k,m.lastModified));z("css for "+k.href+" generated in "+(new Date-g)+"ms");0===m.remaining&&z("css generated in "+(new Date-d)+"ms");g=new Date},c);a()};n.refreshStyles=a;n.refresh("development"===n.env)})(window);YUI.add("thirdparty-less",function(e){},"1.3.3");
YUI.add("thirdparty-codemirror3-modecss",function(e){CodeMirror.defineMode("css",function(e){function c(a){for(var c={},g=0;g<a.length;++g)c[a[g]]=!0;return c}function a(a,c){z=c;return a}function m(c,e){var k=c.next();if("@"==k)return c.eatWhile(/[\w\\\-]/),a("def",c.current());if("/"==k&&c.eat("*"))return e.tokenize=g,g(c,e);if("<"==k&&c.eat("!"))return e.tokenize=r,r(c,e);if("="==k)a(null,"compare");else{if(("~"==k||"|"==k)&&c.eat("="))return a(null,"compare");if('"'==k||"'"==k)return e.tokenize=
v(k),e.tokenize(c,e);if("#"==k)return c.eatWhile(/[\w\\\-]/),a("atom","hash");if("!"==k)return c.match(/^\s*\w*/),a("keyword","important");if(/\d/.test(k))return c.eatWhile(/[\w.%]/),a("number","unit");if("-"===k){if(/\d/.test(c.peek()))return c.eatWhile(/[\w.%]/),a("number","unit");if(c.match(/^[^-]+-/))return a("meta",z)}else{if(/[,+>*\/]/.test(k))return a(null,"select-op");if("."==k&&c.match(/^-?[_a-z][_a-z0-9-]*/i))return a("qualifier",z);if(":"==k)return a("operator",k);if(/[;{}\[\]\(\)]/.test(k))return a(null,
k);"u"==k&&c.match("rl(")?(c.backUp(1),e.tokenize=D):c.eatWhile(/[\w\\\-]/);return a("property","variable")}}}function g(c,g){for(var e=!1,k;null!=(k=c.next());){if(e&&"/"==k){g.tokenize=m;break}e="*"==k}return a("comment","comment")}function r(c,g){for(var e=0,k;null!=(k=c.next());){if(2<=e&&">"==k){g.tokenize=m;break}e="-"==k?e+1:0}return a("comment","comment")}function v(c,g){return function(e,k){for(var n=!1,d;null!=(d=e.next())&&(d!=c||n);)n=!n&&"\\"==d;n||(g&&e.backUp(1),k.tokenize=m);return a("string",
"string")}}function D(c,g){c.next();c.match(/\s*[\"\']/,!1)?g.tokenize=m:g.tokenize=v(")",!0);return a(null,"(")}var t=e.indentUnit,z,H=c("all aural braille handheld print projection screen tty tv embossed".split(" ")),n=c("width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid".split(" ")),
p=c("align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid-cell grid-column grid-column-align grid-column-sizing grid-column-span grid-columns grid-flow grid-row grid-row-align grid-row-sizing grid-row-span grid-rows grid-template hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marker-offset marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range play-during position presentation-level punctuation-trim quotes rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-shadow text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width word-break word-spacing word-wrap z-index".split(" ")),
u=c("black silver gray white maroon red purple fuchsia green lime olive yellow navy blue teal aqua".split(" ")),G=c("above absolute activeborder activecaption afar after-white-space ahead alias all all-scroll alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks auto avoid background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break-all break-word button button-bevel buttonface buttonhighlight buttonshadow buttontext cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse compact condensed contain content content-box context-menu continuous copy cover crop cross crosshair currentcolor cursive dashed decimal decimal-leading-zero default default-button destination-atop destination-in destination-out destination-over devanagari disc discard document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ew-resize expanded extra-condensed extra-expanded fantasy fast fill fixed flat footnotes forwards from geometricPrecision georgian graytext groove gujarati gurmukhi hand hangul hangul-consonant hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-table inset inside intrinsic invert italic justify kannada katakana katakana-iroha khmer landscape lao large larger left level lighter line-through linear lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr malayalam match media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple myanmar n-resize narrower navy ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize nw-resize nwse-resize oblique octal open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside overlay overline padding padding-box painted paused persian plus-darker plus-lighter pointer portrait pre pre-line pre-wrap preserve-3d progress push-button radio read-only read-write read-write-plaintext-only relative repeat repeat-x repeat-y reset reverse rgb rgba ridge right round row-resize rtl run-in running s-resize sans-serif scroll scrollbar se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration semi-condensed semi-expanded separate serif show sidama single skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller solid somali source-atop source-in source-out source-over space square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top transparent ultra-condensed ultra-expanded underline up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave white wider window windowframe windowtext x-large x-small xor xx-large xx-small yellow".split(" "));
return{startState:function(a){return{tokenize:m,baseIndent:a||0,stack:[]}},token:function(a,c){if(c.tokenize==m&&a.eatSpace())return null;var g=c.tokenize(a,c),e=c.stack[c.stack.length-1];"property"==g?"propertyValue"==e?g=G[a.current()]?"string-2":u[a.current()]?"keyword":"variable-2":"rule"==e?p[a.current()]||(g+=" error"):!e||"@media{"==e?g="tag":"@media"==e?g=H[a.current()]?"attribute":/^(only|not)$/i.test(a.current())?"keyword":"and"==a.current().toLowerCase()?"error":n[a.current()]?"error":
"attribute error":"@mediaType"==e?H[a.current()]?g="attribute":"and"==a.current().toLowerCase()?g="operator":(/^(only|not)$/i.test(a.current())||a.current(),g="error"):"@mediaType("==e?p[a.current()]||(g=H[a.current()]?"error":"and"==a.current().toLowerCase()?"operator":/^(only|not)$/i.test(a.current())?"error":g+" error"):g="error":"atom"==g?!e||"@media{"==e?g="builtin":"propertyValue"==e?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a.current())||(g+=" error"):g="error":"@media"==e&&"{"==z&&(g="error");
"{"==z?"@media"==e||"@mediaType"==e?(c.stack.pop(),c.stack[c.stack.length-1]="@media{"):c.stack.push("rule"):"}"==z?(c.stack.pop(),"propertyValue"==e&&c.stack.pop()):"@media"==z?c.stack.push("@media"):"@media"==e&&/\b(keyword|attribute)\b/.test(g)?c.stack.push("@mediaType"):"@mediaType"==e&&","==a.current()?c.stack.pop():"@mediaType"==e&&"("==z?c.stack.push("@mediaType("):"@mediaType("==e&&")"==z?c.stack.pop():"rule"==e&&":"==z?c.stack.push("propertyValue"):"propertyValue"==e&&";"==z&&c.stack.pop();
return g},indent:function(a,c){var g=a.stack.length;/^\}/.test(c)&&(g-="propertyValue"==a.stack[a.stack.length-1]?2:1);return a.baseIndent+g*t},electricChars:"}"}});CodeMirror.defineMIME("text/css","css")},"1.0",{requires:["thirdparty-codemirror3"]});
YUI.add("uploader-flash",function(e,k){function c(){c.superclass.constructor.apply(this,arguments)}var a=e.Lang.sub,m=e.Uploader.Queue;e.UploaderFlash=e.extend(c,e.Widget,{_buttonState:"up",_buttonFocus:!1,_swfContainerId:null,_swfReference:null,queue:null,_tabElementBindings:null,initializer:function(){this._swfContainerId=e.guid("uploader");this.queue=this._swfReference=null;this._buttonState="up";this._tabElementBindings=this._buttonFocus=null;this._fileList=[];this.publish("fileselect");this.publish("uploadstart");
this.publish("fileuploadstart");this.publish("uploadprogress");this.publish("totaluploadprogress");this.publish("uploadcomplete");this.publish("alluploadscomplete");this.publish("uploaderror");this.publish("mouseenter");this.publish("mouseleave");this.publish("mousedown");this.publish("mouseup");this.publish("click")},renderUI:function(){var g=this.get("boundingBox"),k=this.get("contentBox"),m=this.get("selectFilesButton"),D=e.Node.create(a(c.FLASH_CONTAINER,{swfContainerId:this._swfContainerId}));
g.setStyle("position","relative");m.setStyles({width:"100%",height:"100%"});k.append(m);k.append(D);this._swfReference=new e.SWF(D,this.get("swfURL"),{version:"10.0.45",fixedAttributes:{wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",scale:"noscale"}})},bindUI:function(){this._swfReference.on("swfReady",function(){this._setMultipleFiles();this._setFileFilters();this._triggerEnabled();this._attachTabElements();this.after("multipleFilesChange",this._setMultipleFiles,this);this.after("fileFiltersChange",
this._setFileFilters,this);this.after("enabledChange",this._triggerEnabled,this);this.after("tabElementsChange",this._attachTabElements)},this);this._swfReference.on("fileselect",this._updateFileList,this);this._swfReference.on("mouseenter",function(){this.fire("mouseenter");this._setButtonClass("hover",!0);"down"===this._buttonState&&this._setButtonClass("active",!0)},this);this._swfReference.on("mouseleave",function(){this.fire("mouseleave");this._setButtonClass("hover",!1);this._setButtonClass("active",
!1)},this);this._swfReference.on("mousedown",function(){this.fire("mousedown");this._buttonState="down";this._setButtonClass("active",!0)},this);this._swfReference.on("mouseup",function(){this.fire("mouseup");this._buttonState="up";this._setButtonClass("active",!1)},this);this._swfReference.on("click",function(){this.fire("click");this._buttonFocus=!0;this._setButtonClass("focus",!0);e.one("body").focus();this._swfReference._swf.focus()},this)},_attachTabElements:function(){if(null!==this.get("tabElements")&&
null!==this.get("tabElements").from&&null!==this.get("tabElements").to){null!==this._tabElementBindings?(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),this._tabElementBindings.blur.detach()):this._tabElementBindings={};var a=e.one(this.get("tabElements").from),c=e.one(this.get("tabElements").to);this._tabElementBindings.from=a.on("keydown",function(a){9===
a.keyCode&&!a.shiftKey&&(a.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",this.get("selectButtonLabel")),this._swfReference._swf.focus())},this);this._tabElementBindings.to=c.on("keydown",function(a){9===a.keyCode&&a.shiftKey&&(a.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",
this.get("selectButtonLabel")),this._swfReference._swf.focus())},this);this._tabElementBindings.tabback=this._swfReference.on("tabback",function(){this._swfReference._swf.blur();setTimeout(function(){a.focus()},30)},this);this._tabElementBindings.tabforward=this._swfReference.on("tabforward",function(){this._swfReference._swf.blur();setTimeout(function(){c.focus()},30)},this);this._tabElementBindings.focus=this._swfReference._swf.on("focus",function(){this._buttonFocus=!0;this._setButtonClass("focus",
!0)},this);this._tabElementBindings.blur=this._swfReference._swf.on("blur",function(){this._buttonFocus=!1;this._setButtonClass("focus",!1)},this)}else null!==this._tabElementBindings&&(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),this._tabElementBindings.blur.detach())},_setButtonClass:function(a,c){c?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[a]):
this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[a])},_setFileFilters:function(){this._swfReference&&0<this.get("fileFilters").length&&this._swfReference.callSWF("setFileFilters",[this.get("fileFilters")])},_setMultipleFiles:function(){this._swfReference&&this._swfReference.callSWF("setAllowMultipleFiles",[this.get("multipleFiles")])},_triggerEnabled:function(){this.get("enabled")?(this._swfReference.callSWF("enable"),this._swfReference._swf.setAttribute("aria-disabled","false"),
this._setButtonClass("disabled",!1)):(this._swfReference.callSWF("disable"),this._swfReference._swf.setAttribute("aria-disabled","true"),this._setButtonClass("disabled",!0))},_getFileList:function(){return this._fileList.concat()},_setFileList:function(a){this._fileList=a.concat();return this._fileList.concat()},_updateFileList:function(a){e.one("body").focus();this._swfReference._swf.focus();a=a.fileList;var c=[],k=[],m=this._swfReference,t=this.get("fileFilterFunction");e.each(a,function(a){var g=
{};g.id=a.fileId;g.name=a.fileReference.name;g.size=a.fileReference.size;g.type=a.fileReference.type;g.dateCreated=a.fileReference.creationDate;g.dateModified=a.fileReference.modificationDate;g.uploader=m;c.push(g)});t?e.each(c,function(a){a=new e.FileFlash(a);t(a)&&k.push(a)}):e.each(c,function(a){k.push(new e.FileFlash(a))});0<k.length&&(a=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?a.concat(k):k),this.fire("fileselect",{fileList:k}))},_uploadEventHandler:function(a){switch(a.type){case "file:uploadstart":this.fire("fileuploadstart",
a);break;case "file:uploadprogress":this.fire("uploadprogress",a);break;case "uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",a);break;case "file:uploadcomplete":this.fire("uploadcomplete",a);break;case "uploaderqueue:alluploadscomplete":this.queue=null;this.fire("alluploadscomplete",a);break;case "file:uploaderror":case "uploaderqueue:uploaderror":this.fire("uploaderror",a);break;case "file:uploadcancel":case "uploaderqueue:uploadcancel":this.fire("uploadcancel",a)}},upload:function(a,
c,k){c=c||this.get("uploadURL");k=k||this.get("postVarsPerFile");var m=a.get("id");k=k.hasOwnProperty(m)?k[m]:k;a instanceof e.FileFlash&&(a.on("uploadstart",this._uploadEventHandler,this),a.on("uploadprogress",this._uploadEventHandler,this),a.on("uploadcomplete",this._uploadEventHandler,this),a.on("uploaderror",this._uploadEventHandler,this),a.on("uploadcancel",this._uploadEventHandler,this),a.startUpload(c,k,this.get("fileFieldName")))},uploadAll:function(a,c){this.uploadThese(this.get("fileList"),
a,c)},uploadThese:function(a,c,e){this.queue||(c=c||this.get("uploadURL"),e=e||this.get("postVarsPerFile"),this.queue=new m({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),fileList:a,uploadURL:c,perFileParameters:e,retryCount:this.get("retryCount")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",
this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("alluploadscancelled",function(){this.queue=null},this),this.queue.on("uploaderror",this._uploadEventHandler,this),this.queue.startUpload(),this.fire("uploadstart"))}},{FLASH_CONTAINER:'<div id="{swfContainerId}" style="position:absolute; top:0px; left: 0px; margin: 0; padding: 0; border: 0; width:100%; height:100%"></div>',SELECT_FILES_BUTTON:"<button type='button' class='yui3-button' tabindex='-1'>{selectButtonLabel}</button>",
TYPE:"flash",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",focus:"yui3-button-selected"}},enabled:{value:!0},errorAction:{value:"continue",validator:function(a){return a===m.CONTINUE||a===m.STOP||a===m.RESTART_ASAP||a===m.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},
multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return e.Node.create(a(e.UploaderFlash.SELECT_FILES_BUTTON,{selectButtonLabel:this.get("selectButtonLabel")}))}},simLimit:{value:2,validator:function(a){return 2<=a&&5>=a}},swfURL:{valueFn:function(){var a=e.Env.cdn+"uploader/assets/flashuploader.swf";return 0<e.UA.ie?a+"?t="+e.guid("uploader"):a}},tabElements:{value:null},uploadURL:{value:""},retryCount:{value:3}}});
e.UploaderFlash.Queue=m},"3.10.1",{requires:"swf widget base cssbutton node event-custom file-flash uploader-queue".split(" ")});
YUI.add("swfdetect",function(e,k){function c(a){g.isNumber(parseInt(a[0],10))&&(m.flashMajor=a[0]);g.isNumber(parseInt(a[1],10))&&(m.flashMinor=a[1]);g.isNumber(parseInt(a[2],10))&&(m.flashRev=a[2])}var a=0,m=e.UA,g=e.Lang,r,v,D;if(m.gecko||m.webkit||m.opera){if(a=navigator.mimeTypes["application/x-shockwave-flash"])if(a=a.enabledPlugin)r=a.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."),c(r)}else if(m.ie){try{v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),v.AllowScriptAccess=
"always"}catch(t){null!==v&&(a=6)}if(0===a)try{D=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),r=D.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","),c(r)}catch(z){}}e.SWFDetect={getFlashVersion:function(){return String(m.flashMajor)+"."+String(m.flashMinor)+"."+String(m.flashRev)},isFlashVersionAtLeast:function(a,c,g){var e=parseInt(m.flashMajor,10),k=parseInt(m.flashMinor,10),r=parseInt(m.flashRev,10);a=parseInt(a||0,10);c=parseInt(c||0,10);g=parseInt(g||0,10);return a===e?c===k?
g<=r:c<k:a<e}}},"3.10.1",{requires:["yui-base"]});
YUI.add("thirdparty-codemirror3",function(e){window.CodeMirror=function(){function e(b,f){if(!(this instanceof e))return new e(b,f);this.options=f=f||{};for(var l in nc)!f.hasOwnProperty(l)&&nc.hasOwnProperty(l)&&(f[l]=nc[l]);n(f);f.value=f.value||"";l=this.display=c(b,"string"==typeof f.value?0:f.value.first);l.wrapper.CodeMirror=this;t(this);f.autofocus&&!oc&&ba(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new pc};
v(this);f.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var a=f.value;"string"==typeof a&&(a=new Y(f.value,f.mode));A(this,Xc)(this,a);O&&setTimeout(ea(qa,this,!0),20);Zd(this);var Oa;try{Oa=document.activeElement==l.input}catch(d){}Oa||f.autofocus&&!oc?setTimeout(ea(va,this),20):qc(this);A(this,function(){for(var b in Ra)if(Ra.propertyIsEnumerable(b))Ra[b](this,f[b],Yc);for(b=0;b<rc.length;++b)rc[b](this)})()}function c(b,f){var l={},a=l.input=B("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
S?a.style.width="1000px":a.setAttribute("wrap","off");jb&&(a.style.border="1px solid black");a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false");l.inputDiv=B("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");l.scrollbarH=B("div",[B("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");l.scrollbarV=B("div",[B("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");l.scrollbarFiller=B("div",null,"CodeMirror-scrollbar-filler");
l.gutterFiller=B("div",null,"CodeMirror-gutter-filler");l.lineDiv=B("div",null,"CodeMirror-code");l.selectionDiv=B("div",null,null,"position: relative; z-index: 1");l.cursor=B("div","\u00a0","CodeMirror-cursor");l.otherCursor=B("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");l.measure=B("div",null,"CodeMirror-measure");l.lineSpace=B("div",[l.measure,l.selectionDiv,l.lineDiv,l.cursor,l.otherCursor],null,"position: relative; outline: none");l.mover=B("div",[B("div",[l.lineSpace],"CodeMirror-lines")],
null,"position: relative");l.sizer=B("div",[l.mover],"CodeMirror-sizer");l.heightForcer=B("div",null,null,"position: absolute; height: "+Sa+"px; width: 1px;");l.gutters=B("div",null,"CodeMirror-gutters");l.lineGutter=null;l.scroller=B("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll");l.scroller.setAttribute("tabIndex","-1");l.wrapper=B("div",[l.inputDiv,l.scrollbarH,l.scrollbarV,l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror");Ta&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=
0);b.appendChild?b.appendChild(l.wrapper):b(l.wrapper);jb&&(a.style.width="0px");S||(l.scroller.draggable=!0);sc?(l.inputDiv.style.height="1px",l.inputDiv.style.position="absolute"):Ta&&(l.scrollbarH.style.minWidth=l.scrollbarV.style.minWidth="18px");l.viewOffset=l.lastSizeC=0;l.showingFrom=l.showingTo=f;l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null;l.prevInput="";l.alignWidgets=!1;l.pollingFast=!1;l.poll=new pc;l.cachedCharWidth=l.cachedTextHeight=null;l.measureLineCache=[];l.measureLineCachePos=
0;l.inaccurateSelection=!1;l.maxLine=null;l.maxLineLength=0;l.maxLineChanged=!1;l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null;return l}function a(b){b.doc.mode=e.getMode(b.options,b.doc.modeOption);b.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null)});b.doc.frontier=b.doc.first;eb(b,100);b.state.modeGen++;b.curOp&&P(b)}function m(b){var f=Ma(b.display),l=b.options.lineWrapping,a=l&&Math.max(5,b.display.scroller.clientWidth/Wc(b.display)-3);return function(c){return Da(b.doc,
c)?0:l?(Math.ceil(c.text.length/a)||1)*f:f}}function g(b){var f=b.doc,l=m(b);f.iter(function(b){var f=l(b);f!=b.height&&ha(b,f)})}function r(b){var f=ra[b.options.keyMap],l=f.style;b.display.wrapper.className=b.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(l?" cm-keymap-"+l:"");b.state.disableInput=f.disableInput}function v(b){b.display.wrapper.className=b.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+b.options.theme.replace(/(^|\s)\s*/g," cm-s-");Aa(b)}function D(b){t(b);P(b);
setTimeout(function(){G(b)},20)}function t(b){var f=b.display.gutters,l=b.options.gutters;kb(f);for(var a=0;a<l.length;++a){var c=l[a],d=f.appendChild(B("div",null,"CodeMirror-gutter "+c));"CodeMirror-linenumbers"==c&&(b.display.lineGutter=d,d.style.width=(b.display.lineNumWidth||1)+"px")}f.style.display=a?"":"none"}function z(b,f){if(0==f.height)return 0;for(var l=f.text.length,a,c=f;a=Ua(c,-1);)a=a.find(),c=C(b,a.from.line),l+=a.from.ch-a.to.ch;for(c=f;a=Mb(c);)a=a.find(),l-=c.text.length-a.from.ch,
c=C(b,a.to.line),l+=c.text.length-a.to.ch;return l}function H(b){var f=b.display,l=b.doc;f.maxLine=C(l,l.first);f.maxLineLength=z(l,f.maxLine);f.maxLineChanged=!0;l.iter(function(b){var a=z(l,b);a>f.maxLineLength&&(f.maxLineLength=a,f.maxLine=b)})}function n(b){for(var f=!1,l=0;l<b.gutters.length;++l)"CodeMirror-linenumbers"==b.gutters[l]&&(b.lineNumbers?f=!0:b.gutters.splice(l--,1));!f&&b.lineNumbers&&b.gutters.push("CodeMirror-linenumbers")}function p(b){var f=b.display,l=b.doc.height+(f.mover.offsetHeight-
f.lineSpace.offsetHeight);f.sizer.style.minHeight=f.heightForcer.style.top=l+"px";f.gutters.style.height=Math.max(l,f.scroller.clientHeight-Sa)+"px";var l=Math.max(l,f.scroller.scrollHeight),a=f.scroller.scrollWidth>f.scroller.clientWidth+1,c=l>f.scroller.clientHeight+1;c?(f.scrollbarV.style.display="block",f.scrollbarV.style.bottom=a?lb(f.measure)+"px":"0",f.scrollbarV.firstChild.style.height=l-f.scroller.clientHeight+f.scrollbarV.clientHeight+"px"):(f.scrollbarV.style.display="",f.scrollbarV.firstChild.style.height=
"0");a?(f.scrollbarH.style.display="block",f.scrollbarH.style.right=c?lb(f.measure)+"px":"0",f.scrollbarH.firstChild.style.width=f.scroller.scrollWidth-f.scroller.clientWidth+f.scrollbarH.clientWidth+"px"):(f.scrollbarH.style.display="",f.scrollbarH.firstChild.style.width="0");a&&c?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=f.scrollbarFiller.style.width=lb(f.measure)+"px"):f.scrollbarFiller.style.display="";a&&b.options.coverGutterNextToScrollbar&&b.options.fixedGutter?
(f.gutterFiller.style.display="block",f.gutterFiller.style.height=lb(f.measure)+"px",f.gutterFiller.style.width=f.gutters.offsetWidth+"px"):f.gutterFiller.style.display="";$d&&0===lb(f.measure)&&(f.scrollbarV.style.minWidth=f.scrollbarH.style.minHeight=ae?"18px":"12px")}function u(b,f,l){var a=b.scroller.scrollTop,c=b.wrapper.clientHeight;"number"==typeof l?a=l:l&&(a=l.top,c=l.bottom-l.top);a=Math.floor(a-b.lineSpace.offsetTop);b=Math.ceil(a+c);return{from:mb(f,a),to:mb(f,b)}}function G(b){var f=
b.display;if(f.alignWidgets||f.gutters.firstChild&&b.options.fixedGutter){for(var l=J(f)-f.scroller.scrollLeft+b.doc.scrollLeft,a=f.gutters.offsetWidth,c=l+"px",d=f.lineDiv.firstChild;d;d=d.nextSibling)if(d.alignable)for(var g=0,e=d.alignable;g<e.length;++g)e[g].style.left=c;b.options.fixedGutter&&(f.gutters.style.left=l+a+"px")}}function R(b){if(!b.options.lineNumbers)return!1;var f=b.doc,f=String(b.options.lineNumberFormatter(f.first+f.size-1+b.options.firstLineNumber));b=b.display;if(f.length!=
b.lineNumChars){var l=b.measure.appendChild(B("div",[B("div",f)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=l.firstChild.offsetWidth,l=l.offsetWidth-a;b.lineGutter.style.width="";b.lineNumInnerWidth=Math.max(a,b.lineGutter.offsetWidth-l);b.lineNumWidth=b.lineNumInnerWidth+l;b.lineNumChars=b.lineNumInnerWidth?f.length:-1;b.lineGutter.style.width=b.lineNumWidth+"px";return!0}return!1}function J(b){return N(b.scroller).left-N(b.sizer).left}function K(b,f,l,a){for(var c=b.display.showingFrom,d=
b.display.showingTo,g,e=u(b.display,b.doc,l);X(b,f,e,a);){a=!1;g=!0;ka(b);p(b);l&&(l=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,"number"==typeof l?l:l.top));e=u(b.display,b.doc,l);if(e.from>=b.display.showingFrom&&e.to<=b.display.showingTo)break;f=[]}g&&(Z(b,"update",b),(b.display.showingFrom!=c||b.display.showingTo!=d)&&Z(b,"viewportChange",b,b.display.showingFrom,b.display.showingTo));return g}function X(b,f,l,a){var c=b.display,g=b.doc;if(c.wrapper.clientWidth){if(a||
!(0==f.length&&l.from>c.showingFrom&&l.to<c.showingTo)){R(b)&&(f=[{from:g.first,to:g.first+g.size}]);var e=c.sizer.style.marginLeft=c.gutters.offsetWidth+"px";c.scrollbarH.style.left=b.options.fixedGutter?e:"0";e=Infinity;if(b.options.lineNumbers)for(var I=0;I<f.length;++I)f[I].diff&&f[I].from<e&&(e=f[I].from);var I=g.first+g.size,ca=Math.max(l.from-b.options.viewportMargin,g.first);l=Math.min(I,l.to+b.options.viewportMargin);c.showingFrom<ca&&20>ca-c.showingFrom&&(ca=Math.max(g.first,c.showingFrom));
c.showingTo>l&&20>c.showingTo-l&&(l=Math.min(I,c.showingTo));if(nb)for(ca=fa(sa(g,C(g,ca)));l<I&&Da(g,C(g,l));)++l;var k=[{from:Math.max(c.showingFrom,g.first),to:Math.min(c.showingTo,I)}],k=k[0].from>=k[0].to?[]:q(k,f);if(nb)for(I=0;I<k.length;++I){f=k[I];for(var m;m=Mb(C(g,f.to-1));)if(m=m.find().from.line,m>f.from)f.to=m;else{k.splice(I--,1);break}}for(I=g=0;I<k.length;++I)f=k[I],f.from<ca&&(f.from=ca),f.to>l&&(f.to=l),f.from>=f.to?k.splice(I--,1):g+=f.to-f.from;if(!a&&g==l-ca&&ca==c.showingFrom&&
l==c.showingTo)d(b);else{k.sort(function(b,f){return b.from-f.from});try{var n=document.activeElement}catch(r){}g<0.7*(l-ca)&&(c.lineDiv.style.display="none");h(b,ca,l,k,e);c.lineDiv.style.display="";n&&(document.activeElement!=n&&n.offsetHeight)&&n.focus();if(ca!=c.showingFrom||l!=c.showingTo||c.lastSizeC!=c.wrapper.clientHeight)c.lastSizeC=c.wrapper.clientHeight,eb(b,400);c.showingFrom=ca;c.showingTo=l;x(b);d(b);return!0}}}else c.showingFrom=c.showingTo=g.first,c.viewOffset=0}function x(b){b=b.display;
for(var f=b.lineDiv.offsetTop,l=b.lineDiv.firstChild,a;l;l=l.nextSibling)if(l.lineObj){if(Ta){var c=l.offsetTop+l.offsetHeight;a=c-f;f=c}else a=N(l),a=a.bottom-a.top;c=l.lineObj.height-a;2>a&&(a=Ma(b));if(0.001<c||-0.001>c)if(ha(l.lineObj,a),a=l.lineObj.widgets)for(c=0;c<a.length;++c)a[c].height=a[c].node.offsetHeight}}function d(b){var f=b.display.viewOffset=ob(b,C(b.doc,b.display.showingFrom));b.display.mover.style.top=f+"px"}function q(b,f){for(var l=0,a=f.length||0;l<a;++l){for(var c=f[l],d=[],
g=c.diff||0,e=0,h=b.length;e<h;++e){var k=b[e];c.to<=k.from&&c.diff?d.push({from:k.from+g,to:k.to+g}):c.to<=k.from||c.from>=k.to?d.push(k):(c.from>k.from&&d.push({from:k.from,to:c.from}),c.to<k.to&&d.push({from:c.to+g,to:k.to+g}))}b=d}return b}function U(b){for(var f=b.display,l={},a={},c=f.gutters.firstChild,d=0;c;c=c.nextSibling,++d)l[b.options.gutters[d]]=c.offsetLeft,a[b.options.gutters[d]]=c.offsetWidth;return{fixedPos:J(f),gutterTotalWidth:f.gutters.offsetWidth,gutterLeft:l,gutterWidth:a,wrapperWidth:f.wrapper.clientWidth}}
function h(b,f,l,a,c){function d(f){var l=f.nextSibling;S&&Va&&b.display.currentWheelTarget==f?(f.style.display="none",f.lineObj=null):f.parentNode.removeChild(f);return l}var g=U(b),e=b.display,h=b.options.lineNumbers;!a.length&&(!S||!b.display.currentWheelTarget)&&kb(e.lineDiv);var k=e.lineDiv,m=k.firstChild,n=a.shift(),r=f;for(b.doc.iter(f,l,function(f){n&&n.to==r&&(n=a.shift());if(Da(b.doc,f)){if(0!=f.height&&ha(f,0),f.widgets&&m&&m.previousSibling)for(var l=0;l<f.widgets.length;++l){var e=f.widgets[l];
if(e.showIfHidden){var I=m.previousSibling;if(/pre/i.test(I.nodeName)){var p=B("div",null,null,"position: relative");I.parentNode.replaceChild(p,I);p.appendChild(I);I=p}p=I.appendChild(B("div",[e.node],"CodeMirror-linewidget"));e.handleMouseEvents||(p.ignoreEvents=!0);hc(e,p,I,g)}}}else if(n&&n.from<=r&&n.to>r){for(;m.lineObj!=f;)m=d(m);h&&(c<=r&&m.lineNumber)&&Zc(m.lineNumber,String(b.options.lineNumberFormatter(r+b.options.firstLineNumber)));m=m.nextSibling}else{if(f.widgets)for(var p=0,q=m;q&&
20>p;++p,q=q.nextSibling)if(q.lineObj==f&&/div/i.test(q.nodeName)){l=q;break}var p=b,u=r,v=l,q=tc(p,f),s=f.gutterMarkers,G=p.display;if(!p.options.lineNumbers&&!s&&!f.bgClass&&!f.wrapClass&&!f.widgets)e=q;else{if(v){v.alignable=null;for(var t=!0,x=0,D=null,w=v.firstChild,C;w;w=C)if(C=w.nextSibling,/\bCodeMirror-linewidget\b/.test(w.className)){for(var z=0;z<f.widgets.length;++z){var y=f.widgets[z];if(y.node==w.firstChild){!y.above&&!D&&(D=w);hc(y,w,v,g);++x;break}}if(z==f.widgets.length){t=!1;break}}else v.removeChild(w);
v.insertBefore(q,D);t&&x==f.widgets.length&&(e=v,v.className=f.wrapClass||"")}e||(e=B("div",null,f.wrapClass,"position: relative"),e.appendChild(q));f.bgClass&&e.insertBefore(B("div",null,f.bgClass+" CodeMirror-linebackground"),e.firstChild);if(p.options.lineNumbers||s){I=e.insertBefore(B("div",null,null,"position: absolute; left: "+(p.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px"),e.firstChild);p.options.fixedGutter&&(e.alignable||(e.alignable=[])).push(I);if(p.options.lineNumbers&&(!s||
!s["CodeMirror-linenumbers"]))e.lineNumber=I.appendChild(B("div",String(p.options.lineNumberFormatter(u+p.options.firstLineNumber)),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+G.lineNumInnerWidth+"px"));if(s)for(z=0;z<p.options.gutters.length;++z)y=p.options.gutters[z],(u=s.hasOwnProperty(y)&&s[y])&&I.appendChild(B("div",[u],"CodeMirror-gutter-elt","left: "+g.gutterLeft[y]+"px; width: "+g.gutterWidth[y]+"px"))}Ta&&(e.style.zIndex=2);
if(f.widgets&&e!=v){z=0;for(v=f.widgets;z<v.length;++z)y=v[z],s=B("div",[y.node],"CodeMirror-linewidget"),y.handleMouseEvents||(s.ignoreEvents=!0),hc(y,s,e,g),y.above?e.insertBefore(s,p.options.lineNumbers&&0!=f.height?I:q):e.appendChild(s),Z(y,"redraw")}}if(e!=l)k.insertBefore(e,m);else{for(;m!=l;)m=d(m);m=m.nextSibling}e.lineObj=f}++r});m;)m=d(m)}function hc(b,f,l,a){b.noHScroll&&((l.alignable||(l.alignable=[])).push(f),l=a.wrapperWidth,f.style.left=a.fixedPos+"px",b.coverGutter||(l-=a.gutterTotalWidth,
f.style.paddingLeft=a.gutterTotalWidth+"px"),f.style.width=l+"px");b.coverGutter&&(f.style.zIndex=5,f.style.position="relative",b.noHScroll||(f.style.marginLeft=-a.gutterTotalWidth+"px"))}function ka(b){var f=b.display,l=L(b.doc.sel.from,b.doc.sel.to);if(l||b.options.showCursorWhenSelecting){var a=b.display,c=la(b,b.doc.sel.head,"div");a.cursor.style.left=c.left+"px";a.cursor.style.top=c.top+"px";a.cursor.style.height=Math.max(0,c.bottom-c.top)*b.options.cursorHeight+"px";a.cursor.style.display="";
c.other?(a.otherCursor.style.display="",a.otherCursor.style.left=c.other.left+"px",a.otherCursor.style.top=c.other.top+"px",a.otherCursor.style.height=0.85*(c.other.bottom-c.other.top)+"px"):a.otherCursor.style.display="none"}else f.cursor.style.display=f.otherCursor.style.display="none";l?f.selectionDiv.style.display="none":Ud(b);b.options.moveInputWithCursor&&(b=la(b,b.doc.sel.head,"div"),l=N(f.wrapper),a=N(f.lineDiv),f.inputDiv.style.top=Math.max(0,Math.min(f.wrapper.clientHeight-10,b.top+a.top-
l.top))+"px",f.inputDiv.style.left=Math.max(0,Math.min(f.wrapper.clientWidth-10,b.left+a.left-l.left))+"px")}function Ud(b){function f(b,f,l,a){0>f&&(f=0);g.appendChild(B("div",null,"CodeMirror-selected","position: absolute; left: "+b+"px; top: "+f+"px; width: "+(null==l?e-b:l)+"px; height: "+(a-f)+"px"))}function l(l,a,d){var V=C(c,l),g=V.text.length,Pa,Qa;be(ma(V),a||0,null==d?g:d,function(c,Oa,k){var m=Jb(b,w(l,c),"div",V,"left"),$,n;c==Oa?($=m,k=n=m.left):($=Jb(b,w(l,Oa-1),"div",V,"right"),"rtl"==
k&&(k=m,m=$,$=k),k=m.left,n=$.right);null==a&&0==c&&(k=h);3<$.top-m.top&&(f(k,m.top,null,m.bottom),k=h,m.bottom<$.top&&f(k,m.bottom,null,$.top));null==d&&Oa==g&&(n=e);if(!Pa||m.top<Pa.top||m.top==Pa.top&&m.left<Pa.left)Pa=m;if(!Qa||$.bottom>Qa.bottom||$.bottom==Qa.bottom&&$.right>Qa.right)Qa=$;k<h+1&&(k=h);f(k,$.top,n-k,$.bottom)});return{start:Pa,end:Qa}}var a=b.display,c=b.doc,d=b.doc.sel,g=document.createDocumentFragment(),e=a.lineSpace.offsetWidth,h=na(b.display.measure,B("pre",null,null,"text-align: left")).appendChild(B("span",
"x")).offsetLeft;if(d.from.line==d.to.line)l(d.from.line,d.from.ch,d.to.ch);else{var k=C(c,d.from.line),m=C(c,d.to.line),m=sa(c,k)==sa(c,m),k=l(d.from.line,d.from.ch,m?k.text.length:null).end,d=l(d.to.line,m?0:null,d.to.ch).start;m&&(k.top<d.top-2?(f(k.right,k.top,null,k.bottom),f(h,d.top,d.left,d.bottom)):f(k.right,k.top,d.left-k.right,k.bottom));k.bottom<d.top&&f(h,k.bottom,null,d.top)}na(a.selectionDiv,g);a.selectionDiv.style.display=""}function Ib(b){if(b.state.focused){var f=b.display;clearInterval(f.blinker);
var l=!0;f.cursor.style.visibility=f.otherCursor.style.visibility="";0<b.options.cursorBlinkRate&&(f.blinker=setInterval(function(){f.cursor.style.visibility=f.otherCursor.style.visibility=(l=!l)?"":"hidden"},b.options.cursorBlinkRate))}}function eb(b,f){b.doc.mode.startState&&b.doc.frontier<b.display.showingTo&&b.state.highlight.set(f,ea(Vd,b))}function Vd(b){var f=b.doc;f.frontier<f.first&&(f.frontier=f.first);if(!(f.frontier>=b.display.showingTo)){var l=+new Date+b.options.workTime,a=Wa(f.mode,
gb(b,f.frontier)),c=[],d;f.iter(f.frontier,Math.min(f.first+f.size,b.display.showingTo+500),function(g){if(f.frontier>=b.display.showingFrom){var e=g.styles;g.styles=$c(b,g,a);for(var h=!e||e.length!=g.styles.length,k=0;!h&&k<e.length;++k)h=e[k]!=g.styles[k];h&&(d&&d.end==f.frontier?d.end++:c.push(d={start:f.frontier,end:f.frontier+1}));g.stateAfter=Wa(f.mode,a)}else ad(b,g,a),g.stateAfter=0==f.frontier%5?Wa(f.mode,a):null;++f.frontier;if(+new Date>l)return eb(b,b.options.workDelay),!0});c.length&&
A(b,function(){for(var b=0;b<c.length;++b)P(this,c[b].start,c[b].end)})()}}function s(b,f,l){var a,c,d=b.doc,g=f;for(f-=b.doc.mode.innerMode?1E3:100;g>f;--g){if(g<=d.first)return d.first;var e=C(d,g-1);if(e.stateAfter&&(!l||g<=d.frontier))return g;e=Xa(e.text,null,b.options.tabSize);if(null==c||a>e)c=g-1,a=e}return c}function gb(b,f,l){var a=b.doc,c=b.display;if(!a.mode.startState)return!0;var d=s(b,f,l),g=d>a.first&&C(a,d-1).stateAfter,g=g?Wa(a.mode,g):bd(a.mode);a.iter(d,f,function(l){ad(b,l,g);
l.stateAfter=d==f-1||0==d%5||d>=c.showingFrom&&d<c.showingTo?Wa(a.mode,g):null;++d});return g}function fb(b,f,l,a,c){var d=-1;a=a||jc(b,f);if(a.crude)return l=a.left+l*a.width,{left:l,right:l+a.width,top:a.top,bottom:a.bottom};for(b=l;;b+=d){var g=a[b];if(g)break;0>d&&0==b&&(d=1)}c=b>l?"left":b<l?"right":c;"left"==c&&g.leftSide?g=g.leftSide:"right"==c&&g.rightSide&&(g=g.rightSide);return{left:b<l?g.right:g.left,right:b>l?g.left:g.right,top:g.top,bottom:g.bottom}}function ic(b,f){for(var l=b.display.measureLineCache,
a=0;a<l.length;++a){var c=l[a];if(c.text==f.text&&c.markedSpans==f.markedSpans&&b.display.scroller.clientWidth==c.width&&c.classes==f.textClass+"|"+f.bgClass+"|"+f.wrapClass)return c}}function Wd(b,f){var l=ic(b,f);l&&(l.text=l.measure=l.markedSpans=null)}function jc(b,f){var l=ic(b,f);if(l)return l.measure;var l=Vc(b,f),a=b.display.measureLineCache,c={text:f.text,width:b.display.scroller.clientWidth,markedSpans:f.markedSpans,measure:l,classes:f.textClass+"|"+f.bgClass+"|"+f.wrapClass};16==a.length?
a[++b.display.measureLineCachePos%16]=c:a.push(c);return l}function Vc(b,f){function l(b){var f=b.top-p.top,l=b.bottom-p.top;l>u&&(l=u);0>f&&(f=0);for(var a=q.length-2;0<=a;a-=2){var c=q[a],d=q[a+1];if(!(c>l||d<f))if(c<=f&&d>=l||f<=c&&l>=d||Math.min(l,d)-Math.max(f,c)>=l-f>>1){q[a]=Math.min(f,c);q[a+1]=Math.max(l,d);break}}0>a&&(a=q.length,q.push(f,l));return{left:b.left-p.left,right:b.right-p.left,top:a,bottom:null}}function a(b){b.bottom=q[b.top+1];b.top=q[b.top]}if(!b.options.lineWrapping&&f.text.length>=
b.options.crudeMeasuringFrom)return Xd(b,f);var c=b.display,d=cd(f.text.length),g=tc(b,f,d,!0);if(O&&!Ta&&!b.options.lineWrapping&&100<g.childNodes.length){for(var e=document.createDocumentFragment(),h=g.childNodes.length,k=0,m=Math.ceil(h/10);k<m;++k){for(var n=B("div",null,null,"display: inline-block"),r=0;10>r&&h;++r)n.appendChild(g.firstChild),--h;e.appendChild(n)}g.appendChild(e)}na(c.measure,g);var p=N(c.lineDiv),q=[],e=cd(f.text.length),u=g.offsetHeight;ga&&c.measure.first!=g&&na(c.measure,
g);for(k=0;k<d.length;++k)if(c=d[k])g=c,h=null,/\bCodeMirror-widget\b/.test(c.className)&&c.getClientRects&&(1==c.firstChild.nodeType&&(g=c.firstChild),m=g.getClientRects(),1<m.length&&(h=e[k]=l(m[0]),h.rightSide=l(m[m.length-1]))),h||(h=e[k]=l(N(g))),c.measureRight&&(h.right=N(c.measureRight).left),c.leftSide&&(h.leftSide=l(N(c.leftSide)));kb(b.display.measure);for(k=0;k<e.length;++k)if(c=e[k])a(c),c.leftSide&&a(c.leftSide),c.rightSide&&a(c.rightSide);return e}function Xd(b,f){var l=new Ea(f.text.slice(0,
100),null);f.textClass&&(l.textClass=f.textClass);var a=Vc(b,l),c=fb(b,l,0,a,"left"),l=fb(b,l,99,a,"right");return{crude:!0,top:c.top,left:c.left,bottom:c.bottom,width:(l.right-c.left)/100}}function Aa(b){b.display.measureLineCache.length=b.display.measureLineCachePos=0;b.display.cachedCharWidth=b.display.cachedTextHeight=null;b.options.lineWrapping||(b.display.maxLineChanged=!0);b.display.lineNumChars=null}function Ba(b,f,l,a){if(f.widgets)for(var c=0;c<f.widgets.length;++c)if(f.widgets[c].above){var d=
Nb(f.widgets[c]);l.top+=d;l.bottom+=d}if("line"==a)return l;a||(a="local");f=ob(b,f);f="local"==a?f+b.display.lineSpace.offsetTop:f-b.display.viewOffset;if("page"==a||"window"==a)b=N(b.display.lineSpace),f+=b.top+("window"==a?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),a=b.left+("window"==a?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),l.left+=a,l.right+=a;l.top+=f;l.bottom+=f;return l}function da(b,f,l){if("div"==l)return f;var a=f.left;
f=f.top;if("page"==l)a-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,f-=window.pageYOffset||(document.documentElement||document.body).scrollTop;else if("local"==l||!l)l=N(b.display.sizer),a+=l.left,f+=l.top;b=N(b.display.lineSpace);return{left:a-b.left,top:f-b.top}}function Jb(b,f,l,a,c){a||(a=C(b.doc,f.line));return Ba(b,a,fb(b,a,f.ch,null,c),l)}function la(b,f,l,a,c){function d(f,g){var e=fb(b,a,f,c,g?"right":"left");g?e.left=e.right:e.right=e.left;return Ba(b,a,e,l)}
function g(b,f){var l=e[f],a=l.level%2;b==(l.level%2?l.to:l.from)&&f&&l.level<e[f-1].level?(l=e[--f],b=uc(l)-(l.level%2?0:1),a=!0):b==uc(l)&&(f<e.length-1&&l.level<e[f+1].level)&&(l=e[++f],b=(l.level%2?l.to:l.from)-l.level%2,a=!1);return a&&b==l.to&&b>l.from?d(b-1):d(b,a)}a=a||C(b.doc,f.line);c||(c=jc(b,a));var e=ma(a);f=f.ch;if(!e)return d(f);var h=vc(e,f),h=g(f,h);null!=Ya&&(h.other=g(f,Ya));return h}function Kb(b,f,l,a){b=new w(b,f);b.xRel=a;l&&(b.outside=!0);return b}function kc(b,f,l){var a=
b.doc;l+=b.display.viewOffset;if(0>l)return Kb(a.first,0,!0,-1);var c=mb(a,l),d=a.first+a.size-1;if(c>d)return Kb(a.first+a.size-1,C(a,d).text.length,!0,1);for(0>f&&(f=0);;){var d=C(a,c),c=Yd(b,d,c,f,l),g=(d=Mb(d))&&d.find();if(d&&(c.ch>g.from.ch||c.ch==g.from.ch&&0<c.xRel))c=g.to.line;else return c}}function Yd(b,f,l,a,c){function d(a){a=la(b,w(l,a),"line",f,k);e=!0;if(g>a.bottom)return a.left-h;if(g<a.top)return a.left+h;e=!1;return a.left}var g=c-ob(b,f),e=!1,h=2*b.display.wrapper.clientWidth,
k=jc(b,f),m=ma(f),n=f.text.length;c=Ob(f);var r=Pb(f),p=d(c),q=e,u=d(r),v=e;if(a>u)return Kb(l,r,v,1);for(;;){if(m?r==c||r==wc(f,c,1):1>=r-c){m=a<p||a-p<=u-a?c:r;for(a-=m==c?p:u;xc.test(f.text.charAt(m));)++m;return Kb(l,m,m==c?q:v,0>a?-1:a?1:0)}var s=Math.ceil(n/2),G=c+s;if(m)for(var G=c,t=0;t<s;++t)G=wc(f,G,1);t=d(G);if(t>a){r=G;u=t;if(v=e)u+=1E3;n=s}else c=G,p=t,q=e,n-=s}}function Ma(b){if(null!=b.cachedTextHeight)return b.cachedTextHeight;if(null==Fa){Fa=B("pre");for(var f=0;49>f;++f)Fa.appendChild(document.createTextNode("x")),
Fa.appendChild(B("br"));Fa.appendChild(document.createTextNode("x"))}na(b.measure,Fa);f=Fa.offsetHeight/50;3<f&&(b.cachedTextHeight=f);kb(b.measure);return f||1}function Wc(b){if(null!=b.cachedCharWidth)return b.cachedCharWidth;var f=B("span","x"),l=B("pre",[f]);na(b.measure,l);f=f.offsetWidth;2<f&&(b.cachedCharWidth=f);return f||10}function Na(b){b.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,
id:++ce};Qb++||(wa=[])}function Ka(b){var f=b.curOp,l=b.doc,a=b.display;b.curOp=null;f.updateMaxLine&&H(b);if(a.maxLineChanged&&!b.options.lineWrapping&&a.maxLine){var c;c=a.maxLine;var d=!1;if(c.markedSpans)for(var g=0;g<c.markedSpans;++g){var e=c.markedSpans[g];if(e.collapsed&&(null==e.to||e.to==c.text.length))d=!0}(d=!d&&ic(b,c))||c.text.length>=b.options.crudeMeasuringFrom?c=fb(b,c,c.text.length,d&&d.measure,"right").right:(c=tc(b,c,null,!0),d=c.appendChild(pb(b.display.measure)),na(b.display.measure,
c),c=N(d).right-N(b.display.lineDiv).left);a.sizer.style.minWidth=Math.max(0,c+3+Sa)+"px";a.maxLineChanged=!1;c=Math.max(0,a.sizer.offsetLeft+a.sizer.offsetWidth-a.scroller.clientWidth);c<l.scrollLeft&&!f.updateScrollPos&&Za(b,Math.min(a.scroller.scrollLeft,c),!0)}var h,k;f.updateScrollPos?h=f.updateScrollPos:f.selectionChanged&&a.scroller.clientHeight&&(h=la(b,l.sel.head),h=Rb(b,h.left,h.top,h.left,h.bottom));if(f.changes.length||f.forceUpdate||h&&null!=h.scrollTop)k=K(b,f.changes,h&&h.scrollTop,
f.forceUpdate),b.display.scroller.offsetHeight&&(b.doc.scrollTop=b.display.scroller.scrollTop);!k&&f.selectionChanged&&ka(b);if(f.updateScrollPos)a.scroller.scrollTop=a.scrollbarV.scrollTop=l.scrollTop=h.scrollTop,a.scroller.scrollLeft=a.scrollbarH.scrollLeft=l.scrollLeft=h.scrollLeft,G(b),f.scrollToPos&&dd(b,y(b.doc,f.scrollToPos),f.scrollToPosMargin);else if(h&&(l=dd(b,b.doc.sel.head,b.options.cursorScrollMargin),b.state.focused)){a=b.display;h=N(a.sizer);k=null;if(0>l.top+h.top)k=!0;else if(l.bottom+
h.top>(window.innerHeight||document.documentElement.clientHeight))k=!1;if(null!=k&&!de){if(h="none"==a.cursor.style.display)a.cursor.style.display="",a.cursor.style.left=l.left+"px",a.cursor.style.top=l.top-a.viewOffset+"px";a.cursor.scrollIntoView(k);h&&(a.cursor.style.display="none")}}f.selectionChanged&&Ib(b);b.state.focused&&f.updateInput&&qa(b,f.userSelChange);l=f.maybeHiddenMarkers;a=f.maybeUnhiddenMarkers;if(l)for(k=0;k<l.length;++k)l[k].lines.length||T(l[k],"hide");if(a)for(k=0;k<a.length;++k)a[k].lines.length&&
T(a[k],"unhide");var m;--Qb||(m=wa,wa=null);f.textChanged&&T(b,"change",b,f.textChanged);f.cursorActivity&&T(b,"cursorActivity",b);if(m)for(k=0;k<m.length;++k)m[k]()}function A(b,f){return function(){var a=b||this,c=!a.curOp;c&&Na(a);try{var d=f.apply(a,arguments)}finally{c&&Ka(a)}return d}}function hb(b){return function(){var f=this.cm&&!this.cm.curOp,a;f&&Na(this.cm);try{a=b.apply(this,arguments)}finally{f&&Ka(this.cm)}return a}}function lc(b,f){var a=!b.curOp,c;a&&Na(b);try{c=f()}finally{a&&Ka(b)}return c}
function P(b,f,a,c){null==f&&(f=b.doc.first);null==a&&(a=b.doc.first+b.doc.size);b.curOp.changes.push({from:f,to:a,diff:c})}function Lb(b){b.display.pollingFast||b.display.poll.set(b.options.pollInterval,function(){mc(b);b.state.focused&&Lb(b)})}function La(b){function f(){!mc(b)&&!a?(a=!0,b.display.poll.set(60,f)):(b.display.pollingFast=!1,Lb(b))}var a=!1;b.display.pollingFast=!0;b.display.poll.set(20,f)}function mc(b){var f=b.display.input,a=b.display.prevInput,c=b.doc,d=c.sel;if(!b.state.focused||
ee(f)||ib(b)||b.state.disableInput)return!1;b.state.pasteIncoming&&b.state.fakedLastChar&&(f.value=f.value.substring(0,f.value.length-1),b.state.fakedLastChar=!1);var g=f.value;if(g==a&&L(d.from,d.to))return!1;if(O&&!ga&&b.display.inputHasSelection===g)return qa(b,!0),!1;var e=!b.curOp;e&&Na(b);d.shift=!1;for(var h=0,k=Math.min(a.length,g.length);h<k&&a.charCodeAt(h)==g.charCodeAt(h);)++h;k=d.from;d=d.to;h<a.length?k=w(k.line,k.ch-(a.length-h)):b.state.overwrite&&(L(k,d)&&!b.state.pasteIncoming)&&
(d=w(d.line,Math.min(C(c,d.line).text.length,d.ch+(g.length-h))));a=b.curOp.updateInput;h={from:k,to:d,text:Ga(g.slice(h)),origin:b.state.pasteIncoming?"paste":"+input"};$a(b.doc,h,"end");b.curOp.updateInput=a;Z(b,"inputRead",b,h);1E3<g.length||-1<g.indexOf("\n")?f.value=b.display.prevInput="":b.display.prevInput=g;e&&Ka(b);b.state.pasteIncoming=!1;return!0}function qa(b,f){var a,c,d=b.doc;L(d.sel.from,d.sel.to)?f&&(b.display.prevInput=b.display.input.value="",O&&!ga&&(b.display.inputHasSelection=
null)):(b.display.prevInput="",c=(a=ed&&(100<d.sel.to.line-d.sel.from.line||1E3<(c=b.getSelection()).length))?"-":c||b.getSelection(),b.display.input.value=c,b.state.focused&&fd(b.display.input),O&&!ga&&(b.display.inputHasSelection=c));b.display.inaccurateSelection=a}function ba(b){"nocursor"!=b.options.readOnly&&(!oc||document.activeElement!=b.display.input)&&b.display.input.focus()}function ib(b){return b.options.readOnly||b.doc.cantEdit}function Zd(b){function f(){b.state.focused&&setTimeout(ea(ba,
b),0)}function a(){null==h&&(h=setTimeout(function(){h=null;e.cachedCharWidth=e.cachedTextHeight=qb=null;Aa(b);lc(b,ea(P,b))},100))}function c(){for(var b=e.wrapper.parentNode;b&&b!=document.body;b=b.parentNode);b?setTimeout(c,5E3):ta(window,"resize",a)}function d(f){oa(b,f)||b.options.onDragEvent&&b.options.onDragEvent(b,rb(f))||sb(f)}function g(){e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=b.getSelection(),fd(e.input))}var e=b.display;E(e.scroller,"mousedown",A(b,
fe));O?E(e.scroller,"dblclick",A(b,function(f){if(!oa(b,f)){var a=tb(b,f);a&&(!yc(b,f,"gutterClick",!0,Z)&&!Ca(b.display,f))&&(Q(f),f=zc(C(b.doc,a.line).text,a),W(b.doc,f.from,f.to))}})):E(e.scroller,"dblclick",function(f){oa(b,f)||Q(f)});E(e.lineSpace,"selectstart",function(b){Ca(e,b)||Q(b)});Ac||E(e.scroller,"contextmenu",function(f){gd(b,f)});E(e.scroller,"scroll",function(){e.scroller.clientHeight&&(ub(b,e.scroller.scrollTop),Za(b,e.scroller.scrollLeft,!0),T(b,"scroll",b))});E(e.scrollbarV,"scroll",
function(){e.scroller.clientHeight&&ub(b,e.scrollbarV.scrollTop)});E(e.scrollbarH,"scroll",function(){e.scroller.clientHeight&&Za(b,e.scrollbarH.scrollLeft)});E(e.scroller,"mousewheel",function(f){hd(b,f)});E(e.scroller,"DOMMouseScroll",function(f){hd(b,f)});E(e.scrollbarH,"mousedown",f);E(e.scrollbarV,"mousedown",f);E(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});var h;E(window,"resize",a);setTimeout(c,5E3);E(e.input,"keyup",A(b,function(f){if(!(oa(b,f)||b.options.onKeyEvent&&
b.options.onKeyEvent(b,rb(f)))&&16==f.keyCode)b.doc.sel.shift=!1}));E(e.input,"input",ea(La,b));E(e.input,"keydown",A(b,id));E(e.input,"keypress",A(b,ge));E(e.input,"focus",ea(va,b));E(e.input,"blur",ea(qc,b));b.options.dragDrop&&(E(e.scroller,"dragstart",function(f){var a=b;if(O&&(!a.state.draggingText||100>+new Date-jd))sb(f);else if(!oa(a,f)&&!Ca(a.display,f)){var l=a.getSelection();f.dataTransfer.setData("Text",l);f.dataTransfer.setDragImage&&!Bc&&(l=B("img",null,null,"position: fixed; left: 0; top: 0;"),
ia&&(l.width=l.height=1,a.display.wrapper.appendChild(l),l._top=l.offsetTop),f.dataTransfer.setDragImage(l,0,0),ia&&l.parentNode.removeChild(l))}}),E(e.scroller,"dragenter",d),E(e.scroller,"dragover",d),E(e.scroller,"drop",A(b,he)));E(e.scroller,"paste",function(f){Ca(e,f)||(ba(b),La(b))});E(e.input,"paste",function(){if(S&&!b.state.fakedLastChar&&!(200>new Date-b.state.lastMiddleDown)){var f=e.input.selectionStart,a=e.input.selectionEnd;e.input.value+="$";e.input.selectionStart=f;e.input.selectionEnd=
a;b.state.fakedLastChar=!0}b.state.pasteIncoming=!0;La(b)});E(e.input,"cut",g);E(e.input,"copy",g);sc&&E(e.sizer,"mouseup",function(){document.activeElement==e.input&&e.input.blur();ba(b)})}function Ca(b,f){for(var a=f.target||f.srcElement;a!=b.wrapper;a=a.parentNode)if(!a||a.ignoreEvents||a.parentNode==b.sizer&&a!=b.mover)return!0}function tb(b,f,a){var c=b.display;if(!a&&(a=f.target||f.srcElement,a==c.scrollbarH||a==c.scrollbarH.firstChild||a==c.scrollbarV||a==c.scrollbarV.firstChild||a==c.scrollbarFiller||
a==c.gutterFiller))return null;var d,g,c=N(c.lineSpace);try{d=f.clientX,g=f.clientY}catch(e){return null}return kc(b,d-c.left,g-c.top)}function fe(b){function f(b){if(!L(s,b))if(s=b,"single"==n)W(d.doc,y(e,k),b);else if(q=y(e,q),v=y(e,v),"double"==n){var f=zc(C(e,b.line).text,b);M(b,q)?W(d.doc,f.from,v):W(d.doc,q,f.to)}else"triple"==n&&(M(b,q)?W(d.doc,v,y(e,w(b.line,0))):W(d.doc,q,y(e,w(b.line+1,0))))}function a(b){var c=++t,V=tb(d,b,!0);if(V)if(L(V,r)){var h=b.clientY<G.top?-20:b.clientY>G.bottom?
20:0;h&&setTimeout(A(d,function(){t==c&&(g.scroller.scrollTop+=h,a(b))}),50)}else{d.state.focused||va(d);r=V;f(V);var k=u(g,e);(V.line>=k.to||V.line<k.from)&&setTimeout(A(d,function(){t==c&&a(b)}),150)}}function c(b){t=Infinity;Q(b);ba(d);ta(document,"mousemove",x);ta(document,"mouseup",D)}if(!oa(this,b)){var d=this,g=d.display,e=d.doc,h=e.sel;h.shift=b.shiftKey;if(Ca(g,b))S||(g.scroller.draggable=!1,setTimeout(function(){g.scroller.draggable=!0},100));else if(!yc(d,b,"gutterClick",!0,Z)){var k=tb(d,
b);switch(kd(b)){case 3:Ac&&gd.call(d,d,b);return;case 2:S&&(d.state.lastMiddleDown=+new Date);k&&W(d.doc,k);setTimeout(ea(ba,d),20);Q(b);return}if(k){d.state.focused||va(d);var m=+new Date,n="single";Sb&&Sb.time>m-400&&L(Sb.pos,k)?(n="triple",Q(b),setTimeout(ea(ba,d),20),ie(d,k.line)):Tb&&Tb.time>m-400&&L(Tb.pos,k)?(n="double",Sb={time:m,pos:k},Q(b),m=zc(C(e,k.line).text,k),W(d.doc,m.from,m.to)):Tb={time:m,pos:k};var r=k;if(d.options.dragDrop&&je&&!ib(d)&&!L(h.from,h.to)&&!M(k,h.from)&&!M(h.to,k)&&
"single"==n){var p=A(d,function(f){S&&(g.scroller.draggable=!1);d.state.draggingText=!1;ta(document,"mouseup",p);ta(g.scroller,"drop",p);10>Math.abs(b.clientX-f.clientX)+Math.abs(b.clientY-f.clientY)&&(Q(f),W(d.doc,k),ba(d))});S&&(g.scroller.draggable=!0);d.state.draggingText=p;g.scroller.dragDrop&&g.scroller.dragDrop();E(document,"mouseup",p);E(g.scroller,"drop",p)}else{Q(b);"single"==n&&W(d.doc,y(e,k));var q=h.from,v=h.to,s=k,G=N(g.wrapper),t=0,x=A(d,function(b){!O&&!kd(b)?c(b):a(b)}),D=A(d,c);
E(document,"mousemove",x);E(document,"mouseup",D)}}else(b.target||b.srcElement)==g.scroller&&Q(b)}}}function yc(b,f,a,c,d){try{var g=f.clientX,e=f.clientY}catch(h){return!1}if(g>=Math.floor(N(b.display.gutters).right))return!1;c&&Q(f);c=b.display;var k=N(c.lineDiv);if(e>k.bottom||!pa(b,a))return Cc(f);e-=k.top-c.viewOffset;for(k=0;k<b.options.gutters.length;++k){var m=c.gutters.childNodes[k];if(m&&N(m).right>=g)return g=mb(b.doc,e),d(b,a,b,g,b.options.gutters[k],f),Cc(f)}}function he(b){var f=this;
if(!oa(f,b)&&!(Ca(f.display,b)||f.options.onDragEvent&&f.options.onDragEvent(f,rb(b)))){Q(b);O&&(jd=+new Date);var a=tb(f,b,!0),c=b.dataTransfer.files;if(a&&!ib(f))if(c&&c.length&&window.FileReader&&window.File){var d=c.length,g=Array(d),e=0;b=function(b,c){var V=new FileReader;V.onload=function(){g[c]=V.result;++e==d&&(a=y(f.doc,a),$a(f.doc,{from:a,to:a,text:Ga(g.join("\n")),origin:"paste"},"around"))};V.readAsText(b)};for(var h=0;h<d;++h)b(c[h],h)}else if(f.state.draggingText&&!M(a,f.doc.sel.from)&&
!M(f.doc.sel.to,a))f.state.draggingText(b),setTimeout(ea(ba,f),20);else try{if(g=b.dataTransfer.getData("Text")){var h=f.doc.sel.from,k=f.doc.sel.to;xa(f.doc,a,a);f.state.draggingText&&ya(f.doc,"",h,k,"paste");f.replaceSelection(g,null,"paste");ba(f);va(f)}}catch(m){}}}function ub(b,f){2>Math.abs(b.doc.scrollTop-f)||(b.doc.scrollTop=f,ab||K(b,[],f),b.display.scroller.scrollTop!=f&&(b.display.scroller.scrollTop=f),b.display.scrollbarV.scrollTop!=f&&(b.display.scrollbarV.scrollTop=f),ab&&K(b,[]),eb(b,
100))}function Za(b,f,a){if(!(a?f==b.doc.scrollLeft:2>Math.abs(b.doc.scrollLeft-f)))f=Math.min(f,b.display.scroller.scrollWidth-b.display.scroller.clientWidth),b.doc.scrollLeft=f,G(b),b.display.scroller.scrollLeft!=f&&(b.display.scroller.scrollLeft=f),b.display.scrollbarH.scrollLeft!=f&&(b.display.scrollbarH.scrollLeft=f)}function hd(b,f){var a=f.wheelDeltaX,c=f.wheelDeltaY;null==a&&(f.detail&&f.axis==f.HORIZONTAL_AXIS)&&(a=f.detail);null==c&&f.detail&&f.axis==f.VERTICAL_AXIS?c=f.detail:null==c&&
(c=f.wheelDelta);var d=b.display,g=d.scroller;if(a&&g.scrollWidth>g.clientWidth||c&&g.scrollHeight>g.clientHeight){if(c&&Va&&S)for(var e=f.target;e!=g;e=e.parentNode)if(e.lineObj){b.display.currentWheelTarget=e;break}if(a&&!ab&&!ia&&null!=ja)c&&ub(b,Math.max(0,Math.min(g.scrollTop+c*ja,g.scrollHeight-g.clientHeight))),Za(b,Math.max(0,Math.min(g.scrollLeft+a*ja,g.scrollWidth-g.clientWidth))),Q(f),d.wheelStartX=null;else{if(c&&null!=ja){var e=c*ja,h=b.doc.scrollTop,k=h+d.wrapper.clientHeight;0>e?h=
Math.max(0,h+e-50):k=Math.min(b.doc.height,k+e+50);K(b,[],{top:h,bottom:k})}20>Ub&&(null==d.wheelStartX?(d.wheelStartX=g.scrollLeft,d.wheelStartY=g.scrollTop,d.wheelDX=a,d.wheelDY=c,setTimeout(function(){if(null!=d.wheelStartX){var b=g.scrollLeft-d.wheelStartX,f=g.scrollTop-d.wheelStartY,b=f&&d.wheelDY&&f/d.wheelDY||b&&d.wheelDX&&b/d.wheelDX;d.wheelStartX=d.wheelStartY=null;b&&(ja=(ja*Ub+b)/(Ub+1),++Ub)}},200)):(d.wheelDX+=a,d.wheelDY+=c))}}}function Vb(b,f,a){if("string"==typeof f&&(f=Dc[f],!f))return!1;
b.display.pollingFast&&mc(b)&&(b.display.pollingFast=!1);var c=b.doc,d=c.sel.shift,g=!1;try{ib(b)&&(b.state.suppressEdits=!0),a&&(c.sel.shift=!1),g=f(b)!=ld}finally{c.sel.shift=d,b.state.suppressEdits=!1}return g}function md(b){var f=b.state.keyMaps.slice(0);b.options.extraKeys&&f.push(b.options.extraKeys);f.push(b.options.keyMap);return f}function nd(b,f){var a=Ec(b.options.keyMap),c=a.auto;clearTimeout(od);c&&!pd(f)&&(od=setTimeout(function(){Ec(b.options.keyMap)==a&&(b.options.keyMap=c.call?c.call(null,
b):c,r(b))},50));var d=qd(f,!0),g=!1;if(!d)return!1;g=md(b);if(g=f.shiftKey?vb("Shift-"+d,g,function(f){return Vb(b,f,!0)})||vb(d,g,function(f){if("string"==typeof f?/^go[A-Z]/.test(f):f.motion)return Vb(b,f)}):vb(d,g,function(f){return Vb(b,f)}))Q(f),Ib(b),ga&&(f.oldKeyCode=f.keyCode,f.keyCode=0),Z(b,"keyHandled",b,d,f);return g}function ke(b,f,a){var c=vb("'"+a+"'",md(b),function(f){return Vb(b,f,!0)});c&&(Q(f),Ib(b),Z(b,"keyHandled",b,"'"+a+"'",f));return c}function id(b){this.state.focused||va(this);
if(!(oa(this,b)||this.options.onKeyEvent&&this.options.onKeyEvent(this,rb(b)))){O&&27==b.keyCode&&(b.returnValue=!1);var f=b.keyCode;this.doc.sel.shift=16==f||b.shiftKey;var a=nd(this,b);ia&&(Fc=a?f:null,!a&&(88==f&&!ed&&(Va?b.metaKey:b.ctrlKey))&&this.replaceSelection(""))}}function ge(b){var f=this;if(!(oa(f,b)||f.options.onKeyEvent&&f.options.onKeyEvent(f,rb(b)))){var a=b.keyCode,c=b.charCode;if(ia&&a==Fc)Fc=null,Q(b);else if(!(ia&&(!b.which||10>b.which)||sc)||!nd(f,b))a=String.fromCharCode(null==
c?a:c),this.options.electricChars&&(this.doc.mode.electricChars&&this.options.smartIndent&&!ib(this)&&-1<this.doc.mode.electricChars.indexOf(a))&&setTimeout(A(f,function(){Wb(f,f.doc.sel.to.line,"smart")}),75),ke(f,b,a)||(O&&!ga&&(f.display.inputHasSelection=null),La(f))}}function va(b){"nocursor"!=b.options.readOnly&&(b.state.focused||(T(b,"focus",b),b.state.focused=!0,-1==b.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(b.display.wrapper.className+=" CodeMirror-focused"),b.curOp||
(qa(b,!0),S&&setTimeout(ea(qa,b,!0),0))),Lb(b),Ib(b))}function qc(b){b.state.focused&&(T(b,"blur",b),b.state.focused=!1,b.display.wrapper.className=b.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(b.display.blinker);setTimeout(function(){b.state.focused||(b.doc.sel.shift=!1)},150)}function gd(b,f){function a(){if(null!=d.input.selectionStart){var b=d.input.value="\u200b"+(L(g.from,g.to)?"":d.input.value);d.prevInput="\u200b";d.input.selectionStart=1;d.input.selectionEnd=
b.length}}function c(){d.inputDiv.style.position="relative";d.input.style.cssText=k;ga&&(d.scrollbarV.scrollTop=d.scroller.scrollTop=h);Lb(b);if(null!=d.input.selectionStart){(!O||ga)&&a();clearTimeout(Gc);var f=0,g=function(){" "==d.prevInput&&0==d.input.selectionStart?A(b,Dc.selectAll)(b):10>f++?Gc=setTimeout(g,500):qa(b)};Gc=setTimeout(g,200)}}if(!oa(b,f,"contextmenu")){var d=b.display,g=b.doc.sel;if(!Ca(d,f)&&!(!pa(b,"gutterContextMenu")?0:yc(b,f,"gutterContextMenu",!1,T))){var e=tb(b,f),h=d.scroller.scrollTop;
if(e&&!ia){(L(g.from,g.to)||M(e,g.from)||!M(e,g.to))&&A(b,xa)(b.doc,e,e);var k=d.input.style.cssText;d.inputDiv.style.position="absolute";d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(f.clientY-5)+"px; left: "+(f.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";ba(b);qa(b,!0);L(g.from,g.to)&&(d.input.value=d.prevInput=" ");O&&!ga&&a();if(Ac){sb(f);
var m=function(){ta(window,"mouseup",m);setTimeout(c,20)};E(window,"mouseup",m)}else setTimeout(c,50)}}}}function rd(b,f,a){if(!M(f.from,a))return y(b,a);var c=f.text.length-1-(f.to.line-f.from.line);if(a.line>f.to.line+c)return f=a.line-c,c=b.first+b.size-1,f>c?w(c,C(b,c).text.length):Xb(a,C(b,f).text.length);if(a.line==f.to.line+c)return Xb(a,aa(f.text).length+(1==f.text.length?f.from.ch:0)+C(b,f.to.line).text.length-f.to.ch);b=a.line-f.from.line;return Xb(a,f.text[b].length+(b?0:f.from.ch))}function Hc(b,
f,a){if(a&&"object"==typeof a)return{anchor:rd(b,f,a.anchor),head:rd(b,f,a.head)};if("start"==a)return{anchor:f.from,head:f.from};var c=Ic(f);if("around"==a)return{anchor:f.from,head:c};if("end"==a)return{anchor:c,head:c};a=function(b){if(M(b,f.from))return b;if(!M(f.to,b))return c;var a=b.line+f.text.length-(f.to.line-f.from.line)-1,l=b.ch;b.line==f.to.line&&(l+=c.ch-f.to.ch);return w(a,l)};return{anchor:a(b.sel.anchor),head:a(b.sel.head)}}function sd(b,f,a){f={canceled:!1,from:f.from,to:f.to,text:f.text,
origin:f.origin,cancel:function(){this.canceled=!0}};a&&(f.update=function(f,a,l,c){f&&(this.from=y(b,f));a&&(this.to=y(b,a));l&&(this.text=l);void 0!==c&&(this.origin=c)});T(b,"beforeChange",b,f);b.cm&&T(b.cm,"beforeChange",b.cm,f);return f.canceled?null:{from:f.from,to:f.to,text:f.text,origin:f.origin}}function $a(b,f,a,c){if(b.cm){if(!b.cm.curOp)return A(b.cm,$a)(b,f,a,c);if(b.cm.state.suppressEdits)return}if(pa(b,"beforeChange")||b.cm&&pa(b.cm,"beforeChange"))if(f=sd(b,f,!0),!f)return;if(c=td&&
!c&&le(b,f.from,f.to)){for(var d=c.length-1;1<=d;--d)Jc(b,{from:c[d].from,to:c[d].to,text:[""]});c.length&&Jc(b,{from:c[0].from,to:c[0].to,text:f.text},a)}else Jc(b,f,a)}function Jc(b,f,a){a=Hc(b,f,a);ud(b,f,a,b.cm?b.cm.curOp.id:NaN);wb(b,f,a,Kc(b,f));var c=[];bb(b,function(b,a){!a&&-1==ua(c,b.history)&&(vd(b.history,f),c.push(b.history));wb(b,f,null,Kc(b,f))})}function wd(b,f){if(!b.cm||!b.cm.state.suppressEdits){var a=b.history,c=("undo"==f?a.done:a.undone).pop();if(c){var d={changes:[],anchorBefore:c.anchorAfter,
headBefore:c.headAfter,anchorAfter:c.anchorBefore,headAfter:c.headBefore,generation:a.generation};("undo"==f?a.undone:a.done).push(d);a.generation=c.generation||++a.maxGeneration;for(var g=pa(b,"beforeChange")||b.cm&&pa(b.cm,"beforeChange"),e=c.changes.length-1;0<=e;--e){var h=c.changes[e];h.origin=f;if(g&&!sd(b,h,!1)){("undo"==f?a.done:a.undone).length=0;break}d.changes.push(Lc(b,h));var k=e?Hc(b,h,null):{anchor:c.anchorBefore,head:c.headBefore};wb(b,h,k,xd(b,h));var m=[];bb(b,function(b,f){!f&&
-1==ua(m,b.history)&&(vd(b.history,h),m.push(b.history));wb(b,h,null,xd(b,h))})}}}}function yd(b,f){function a(b){return w(b.line+f,b.ch)}b.first+=f;b.cm&&P(b.cm,b.first,b.first,f);b.sel.head=a(b.sel.head);b.sel.anchor=a(b.sel.anchor);b.sel.from=a(b.sel.from);b.sel.to=a(b.sel.to)}function wb(b,f,a,c){if(b.cm&&!b.cm.curOp)return A(b.cm,wb)(b,f,a,c);if(f.to.line<b.first)yd(b,f.text.length-1-(f.to.line-f.from.line));else if(!(f.from.line>b.lastLine())){if(f.from.line<b.first){var d=f.text.length-1-(b.first-
f.from.line);yd(b,d);f={from:w(b.first,0),to:w(f.to.line+d,f.to.ch),text:[aa(f.text)],origin:f.origin}}d=b.lastLine();f.to.line>d&&(f={from:f.from,to:w(d,C(b,d).text.length),text:[f.text[0]],origin:f.origin});f.removed=Mc(b,f.from,f.to);a||(a=Hc(b,f,null));b.cm?me(b.cm,f,c,a):Nc(b,f,c,a)}}function me(b,f,a,c){var d=b.doc,g=b.display,e=f.from,h=f.to,k=!1,n=e.line;b.options.lineWrapping||(n=fa(sa(d,C(d,e.line))),d.iter(n,h.line+1,function(b){if(b==g.maxLine)return k=!0}));!M(d.sel.head,f.from)&&!M(f.to,
d.sel.head)&&(b.curOp.cursorActivity=!0);Nc(d,f,a,c,m(b));b.options.lineWrapping||(d.iter(n,e.line+f.text.length,function(b){var f=z(d,b);f>g.maxLineLength&&(g.maxLine=b,g.maxLineLength=f,g.maxLineChanged=!0,k=!1)}),k&&(b.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,e.line);eb(b,400);P(b,e.line,h.line+1,f.text.length-(h.line-e.line)-1);if(pa(b,"change"))if(f={from:e,to:h,text:f.text,removed:f.removed,origin:f.origin},b.curOp.textChanged){for(b=b.curOp.textChanged;b.next;b=b.next);b.next=
f}else b.curOp.textChanged=f}function ya(b,f,a,c,d){c||(c=a);if(M(c,a)){var g=c;c=a;a=g}"string"==typeof f&&(f=Ga(f));$a(b,{from:a,to:c,text:f,origin:d},null)}function w(b,f){if(!(this instanceof w))return new w(b,f);this.line=b;this.ch=f}function L(b,f){return b.line==f.line&&b.ch==f.ch}function M(b,f){return b.line<f.line||b.line==f.line&&b.ch<f.ch}function Ha(b){return w(b.line,b.ch)}function y(b,f){if(f.line<b.first)return w(b.first,0);var a=b.first+b.size-1;return f.line>a?w(a,C(b,a).text.length):
Xb(f,C(b,f.line).text.length)}function Xb(b,f){var a=b.ch;return null==a||a>f?w(b.line,f):0>a?w(b.line,0):b}function cb(b,f){return f>=b.first&&f<b.first+b.size}function W(b,f,a,c){if(b.sel.shift||b.sel.extend){var d=b.sel.anchor;if(a){var g=M(f,d);g!=M(a,d)?(d=f,f=a):g!=M(f,a)&&(f=a)}xa(b,d,f,c)}else xa(b,f,a||f,c);b.cm&&(b.cm.curOp.userSelChange=!0)}function xa(b,f,a,c,d){if(!d&&pa(b,"beforeSelectionChange")||b.cm&&pa(b.cm,"beforeSelectionChange"))f={anchor:f,head:a},T(b,"beforeSelectionChange",
b,f),b.cm&&T(b.cm,"beforeSelectionChange",b.cm,f),f.anchor=y(b,f.anchor),f.head=y(b,f.head),a=f.head,f=f.anchor;var g=b.sel;g.goalColumn=null;null==c&&(c=M(a,g.head)?-1:1);if(d||!L(f,g.anchor))f=Yb(b,f,c,"push"!=d);if(d||!L(a,g.head))a=Yb(b,a,c,"push"!=d);if(!L(g.anchor,f)||!L(g.head,a))g.anchor=f,g.head=a,c=M(a,f),g.from=c?a:f,g.to=c?f:a,b.cm&&(b.cm.curOp.updateInput=b.cm.curOp.selectionChanged=b.cm.curOp.cursorActivity=!0),Z(b,"cursorActivity",b)}function zd(b){xa(b.doc,b.doc.sel.from,b.doc.sel.to,
null,"push")}function Yb(b,f,a,c){var d=!1,g=f,e=a||1;b.cantEdit=!1;a:for(;;){var h=C(b,g.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var m=h.markedSpans[k],n=m.marker;if((null==m.from||(n.inclusiveLeft?m.from<=g.ch:m.from<g.ch))&&(null==m.to||(n.inclusiveRight?m.to>=g.ch:m.to>g.ch))){if(c&&(T(n,"beforeCursorEnter"),n.explicitlyCleared))if(h.markedSpans){--k;continue}else break;if(n.atomic){k=n.find()[0>e?"from":"to"];if(L(k,g)&&(k.ch+=e,0>k.ch?k=k.line>b.first?y(b,w(k.line-1)):
null:k.ch>h.text.length&&(k=k.line<b.first+b.size-1?w(k.line+1,0):null),!k)){if(d){if(!c)return Yb(b,f,a,!0);b.cantEdit=!0;return w(b.first,0)}d=!0;k=f;e=-e}g=k;continue a}}}return g}}function dd(b,f,a){for(null==a&&(a=0);;){var c=!1,d=la(b,f),g=Rb(b,d.left,d.top-a,d.left,d.bottom+a),e=b.doc.scrollTop,h=b.doc.scrollLeft;null!=g.scrollTop&&(ub(b,g.scrollTop),1<Math.abs(b.doc.scrollTop-e)&&(c=!0));null!=g.scrollLeft&&(Za(b,g.scrollLeft),1<Math.abs(b.doc.scrollLeft-h)&&(c=!0));if(!c)return d}}function Rb(b,
f,a,c,d){var g=b.display,e=Ma(b.display);0>a&&(a=0);var h=g.scroller.clientHeight-Sa,k=g.scroller.scrollTop,m={};b=b.doc.height+(g.mover.offsetHeight-g.lineSpace.offsetHeight);var n=a<e,e=d>b-e;a<k?m.scrollTop=n?0:a:d>k+h&&(a=Math.min(a,(e?b:d)-h),a!=k&&(m.scrollTop=a));k=g.scroller.clientWidth-Sa;a=g.scroller.scrollLeft;f+=g.gutters.offsetWidth;c+=g.gutters.offsetWidth;g=g.gutters.offsetWidth;d=f<g+10;f<a+g||d?(d&&(f=0),m.scrollLeft=Math.max(0,f-10-g)):c>k+a-3&&(m.scrollLeft=c+10-k);return m}function Zb(b,
f,a){b.curOp.updateScrollPos={scrollLeft:null==f?b.doc.scrollLeft:f,scrollTop:null==a?b.doc.scrollTop:a}}function Oc(b,f,a){var c=b.curOp.updateScrollPos||(b.curOp.updateScrollPos={scrollLeft:b.doc.scrollLeft,scrollTop:b.doc.scrollTop});b=b.display.scroller;c.scrollTop=Math.max(0,Math.min(b.scrollHeight-b.clientHeight,c.scrollTop+a));c.scrollLeft=Math.max(0,Math.min(b.scrollWidth-b.clientWidth,c.scrollLeft+f))}function Wb(b,f,a,c){var d=b.doc;null==a&&(a="add");if("smart"==a)if(b.doc.mode.indent)var g=
gb(b,f);else a="prev";var e=b.options.tabSize,h=C(d,f),k=Xa(h.text,null,e),m=h.text.match(/^\s*/)[0],n;if("smart"==a&&(n=b.doc.mode.indent(g,h.text.slice(m.length),h.text),n==ld)){if(!c)return;a="prev"}"prev"==a?n=f>d.first?Xa(C(d,f-1).text,null,e):0:"add"==a?n=k+b.options.indentUnit:"subtract"==a?n=k-b.options.indentUnit:"number"==typeof a&&(n=k+a);n=Math.max(0,n);a="";c=0;if(b.options.indentWithTabs)for(d=Math.floor(n/e);d;--d)c+=e,a+="\t";c<n&&(a+=Ad(n-c));a!=m&&ya(b.doc,a,w(f,0),w(f,m.length),
"+input");h.stateAfter=null}function $b(b,f,a){var c=f,d=f,g=b.doc;"number"==typeof f?d=C(g,Math.max(g.first,Math.min(f,g.first+g.size-1))):c=fa(f);if(null!=c&&a(d,c))P(b,c,c+1);else return null;return d}function Pc(b,f,a,c,d){function g(f){var c=(d?wc:Bd)(k,h,a,!0);if(null==c){if(f=!f)f=e+a,f<b.first||f>=b.first+b.size?f=m=!1:(e=f,f=k=C(b,f));if(f)h=d?(0>a?Pb:Ob)(k):0>a?k.text.length:0;else return m=!1}else h=c;return!0}var e=f.line,h=f.ch;f=a;var k=C(b,e),m=!0;if("char"==c)g();else if("column"==
c)g(!0);else if("word"==c||"group"==c){var n=null;c="group"==c;for(var r=!0;!(0>a)||g(!r);r=!1){var p=k.text.charAt(h)||"\n",p=xb(p)?"w":!c?null:/\s/.test(p)?null:"p";if(n&&n!=p){0>a&&(a=1,g());break}p&&(n=p);if(0<a&&!g(!r))break}}f=Yb(b,w(e,h),f,!0);m||(f.hitSide=!0);return f}function Cd(b,f,a,c){var d=b.doc,g=f.left,e;"page"==c?(c=Math.min(b.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=f.top+a*(c-(0>a?1.5:0.5)*Ma(b.display))):"line"==c&&(e=0<a?f.bottom+
3:f.top-3);for(;;){var h=kc(b,g,e);if(!h.outside)break;if(0>a?0>=e:e>=d.height){h.hitSide=!0;break}e+=5*a}return h}function zc(b,f){var a=f.ch,c=f.ch;if(b){(0>f.xRel||c==b.length)&&a?--a:++c;for(var d=b.charAt(a),d=xb(d)?xb:/\s/.test(d)?function(b){return/\s/.test(b)}:function(b){return!/\s/.test(b)&&!xb(b)};0<a&&d(b.charAt(a-1));)--a;for(;c<b.length&&d(b.charAt(c));)++c}return{from:w(f.line,a),to:w(f.line,c)}}function ie(b,f){W(b.doc,w(f,0),y(b.doc,w(f+1,0)))}function F(b,f,a,c){e.defaults[b]=f;
a&&(Ra[b]=c?function(b,f,c){c!=Yc&&a(b,f,c)}:a)}function Wa(b,f){if(!0===f)return f;if(b.copyState)return b.copyState(f);var a={},c;for(c in f){var d=f[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a}function bd(b,f,a){return b.startState?b.startState(f,a):!0}function Ec(b){return"string"==typeof b?ra[b]:b}function vb(b,f,a){function c(f){f=Ec(f);var d=f[b];if(!1===d)return"stop";if(null!=d&&a(d))return!0;if(f.nofallthrough)return"stop";f=f.fallthrough;if(null==f)return!1;if("[object Array]"!=
Object.prototype.toString.call(f))return c(f);for(var d=0,g=f.length;d<g;++d){var e=c(f[d]);if(e)return e}return!1}for(var d=0;d<f.length;++d){var g=c(f[d]);if(g)return"stop"!=g}}function pd(b){b=Ia[b.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function qd(b,f){if(ia&&34==b.keyCode&&b["char"])return!1;var a=Ia[b.keyCode];if(null==a||b.altGraphKey)return!1;b.altKey&&(a="Alt-"+a);if(Dd?b.metaKey:b.ctrlKey)a="Ctrl-"+a;if(Dd?b.ctrlKey:b.metaKey)a="Cmd-"+a;!f&&b.shiftKey&&(a="Shift-"+a);return a}
function yb(b,f){this.pos=this.start=0;this.string=b;this.tabSize=f||8;this.lastColumnPos=this.lastColumnValue=0}function za(b,f){this.lines=[];this.type=f;this.doc=b}function zb(b,f,a,c,d){if(c&&c.shared)return ne(b,f,a,c,d);if(b.cm&&!b.cm.curOp)return A(b.cm,zb)(b,f,a,c,d);var g=new za(b,d);if("range"==d&&!M(f,a))return g;c&&ac(c,g);g.replacedWith&&(g.collapsed=!0,g.replacedWith=B("span",[g.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||(g.replacedWith.ignoreEvents=!0));g.collapsed&&(nb=
!0);g.addToHistory&&ud(b,{from:f,to:a,origin:"markText"},{head:b.sel.head,anchor:b.sel.anchor},NaN);var e=f.line,h=0,k,m,n=b.cm,r;b.iter(e,a.line+1,function(c){n&&(g.collapsed&&!n.options.lineWrapping&&sa(b,c)==n.display.maxLine)&&(r=!0);var d={from:null,to:null,marker:g};h+=c.text.length;e==f.line&&(d.from=f.ch,h-=f.ch);e==a.line&&(d.to=a.ch,h-=c.text.length-a.ch);g.collapsed&&(e==a.line&&(m=Ua(c,a.ch)),e==f.line?k=Ua(c,f.ch):ha(c,0));c.markedSpans=c.markedSpans?c.markedSpans.concat([d]):[d];d.marker.attachLine(c);
++e});g.collapsed&&b.iter(f.line,a.line+1,function(f){Da(b,f)&&ha(f,0)});g.clearOnEnter&&E(g,"beforeCursorEnter",function(){g.clear()});g.readOnly&&(td=!0,(b.history.done.length||b.history.undone.length)&&b.clearHistory());if(g.collapsed){if(k!=m)throw Error("Inserting collapsed marker overlapping an existing one");g.size=h;g.atomic=!0}n&&(r&&(n.curOp.updateMaxLine=!0),(g.className||g.title||g.startStyle||g.endStyle||g.collapsed)&&P(n,f.line,a.line+1),g.atomic&&zd(n));return g}function Ab(b,f){this.markers=
b;this.primary=f;for(var a=0,c=this;a<b.length;++a)b[a].parent=this,E(b[a],"clear",function(){c.clear()})}function ne(b,f,a,c,d){c=ac(c);c.shared=!1;var g=[zb(b,f,a,c,d)],e=g[0],h=c.replacedWith;bb(b,function(b){h&&(c.replacedWith=h.cloneNode(!0));g.push(zb(b,y(b,f),y(b,a),c,d));for(var k=0;k<b.linked.length;++k)if(b.linked[k].isParent)return;e=aa(g)});return new Ab(g,e)}function Bb(b,f){if(b)for(var a=0;a<b.length;++a){var c=b[a];if(c.marker==f)return c}}function Kc(b,f){var a=cb(b,f.from.line)&&
C(b,f.from.line).markedSpans,c=cb(b,f.to.line)&&C(b,f.to.line).markedSpans;if(!a&&!c)return null;var d=f.from.ch,g=f.to.ch,e=L(f.from,f.to);if(a)for(var h=0,k;h<a.length;++h){var m=a[h],n=m.marker;if(null==m.from||(n.inclusiveLeft?m.from<=d:m.from<d)||"bookmark"==n.type&&m.from==d&&(!e||!m.marker.insertLeft)){var r=null==m.to||(n.inclusiveRight?m.to>=d:m.to>d);(k||(k=[])).push({from:m.from,to:r?null:m.to,marker:n})}}a=k;if(c)for(var h=0,p;h<c.length;++h)if(k=c[h],m=k.marker,null==k.to||(m.inclusiveRight?
k.to>=g:k.to>g)||"bookmark"==m.type&&k.from==g&&(!e||k.marker.insertLeft))n=null==k.from||(m.inclusiveLeft?k.from<=g:k.from<g),(p||(p=[])).push({from:n?null:k.from-g,to:null==k.to?null:k.to-g,marker:m});c=p;e=1==f.text.length;p=aa(f.text).length+(e?d:0);if(a)for(g=0;g<a.length;++g)h=a[g],null==h.to&&((k=Bb(c,h.marker))?e&&(h.to=null==k.to?null:k.to+p):h.to=d);if(c)for(g=0;g<c.length;++g)h=c[g],null!=h.to&&(h.to+=p),null==h.from?(k=Bb(a,h.marker),k||(h.from=p,e&&(a||(a=[])).push(h))):(h.from+=p,e&&
(a||(a=[])).push(h));if(e&&a){for(g=0;g<a.length;++g)null!=a[g].from&&(a[g].from==a[g].to&&"bookmark"!=a[g].marker.type)&&a.splice(g--,1);a.length||(a=null)}d=[a];if(!e){var e=f.text.length-2,q;if(0<e&&a)for(g=0;g<a.length;++g)null==a[g].to&&(q||(q=[])).push({from:null,to:null,marker:a[g].marker});for(g=0;g<e;++g)d.push(q);d.push(c)}return d}function xd(b,f){var a;if(a=f["spans_"+b.id]){for(var c=0,d=[];c<f.text.length;++c)d.push(oe(a[c]));a=d}else a=null;c=Kc(b,f);if(!a)return c;if(!c)return a;for(d=
0;d<a.length;++d){var g=a[d],e=c[d];if(g&&e){var h=0;a:for(;h<e.length;++h){for(var k=e[h],m=0;m<g.length;++m)if(g[m].marker==k.marker)continue a;g.push(k)}}else e&&(a[d]=e)}return a}function le(b,f,a){var c=null;b.iter(f.line,a.line+1,function(b){if(b.markedSpans)for(var f=0;f<b.markedSpans.length;++f){var a=b.markedSpans[f].marker;if(a.readOnly&&(!c||-1==ua(c,a)))(c||(c=[])).push(a)}});if(!c)return null;b=[{from:f,to:a}];for(f=0;f<c.length;++f){a=c[f];for(var d=a.find(),g=0;g<b.length;++g){var e=
b[g];if(!M(e.to,d.from)&&!M(d.to,e.from)){var h=[g,1];(M(e.from,d.from)||!a.inclusiveLeft&&L(e.from,d.from))&&h.push({from:e.from,to:d.from});(M(d.to,e.to)||!a.inclusiveRight&&L(e.to,d.to))&&h.push({from:d.to,to:e.to});b.splice.apply(b,h);g+=h.length-1}}}return b}function Ua(b,f){var a=nb&&b.markedSpans,c;if(a)for(var d,g=0;g<a.length;++g)if(d=a[g],d.marker.collapsed&&(null==d.from||d.from<f)&&(null==d.to||d.to>f)&&(!c||c.width<d.marker.width))c=d.marker;return c}function Mb(b){return Ua(b,b.text.length+
1)}function sa(b,f){for(var a;a=Ua(f,-1);)f=C(b,a.find().from.line);return f}function Da(b,f){var a=nb&&f.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=a[d],c.marker.collapsed&&(null==c.from||!c.marker.replacedWith&&0==c.from&&c.marker.inclusiveLeft&&Qc(b,f,c)))return!0}function Qc(b,f,a){if(null==a.to)return f=a.marker.find().to,f=C(b,f.line),Qc(b,f,Bb(f.markedSpans,a.marker));if(a.marker.inclusiveRight&&a.to==f.text.length)return!0;for(var c,d=0;d<f.markedSpans.length;++d)if(c=f.markedSpans[d],
c.marker.collapsed&&!c.marker.replacedWith&&c.from==a.to&&(c.marker.inclusiveLeft||a.marker.inclusiveRight)&&Qc(b,f,c))return!0}function Ed(b){var f=b.markedSpans;if(f){for(var a=0;a<f.length;++a)f[a].marker.detachLine(b);b.markedSpans=null}}function Fd(b,f){if(f){for(var a=0;a<f.length;++a)f[a].marker.attachLine(b);b.markedSpans=f}}function Gd(b){return function(){var f=!this.cm.curOp;f&&Na(this.cm);try{var a=b.apply(this,arguments)}finally{f&&Ka(this.cm)}return a}}function Nb(b){if(null!=b.height)return b.height;
(!b.node.parentNode||1!=b.node.parentNode.nodeType)&&na(b.cm.display.measure,B("div",[b.node],null,"position: relative"));return b.height=b.node.offsetHeight}function pe(b,f,a,c){var d=new bc(b,a,c);d.noHScroll&&(b.display.alignWidgets=!0);$b(b,f,function(f){var a=f.widgets||(f.widgets=[]);null==d.insertAt?a.push(d):a.splice(Math.min(a.length-1,Math.max(0,d.insertAt)),0,d);d.line=f;if(!Da(b.doc,f)||d.showIfHidden)a=ob(b,f)<b.doc.scrollTop,ha(f,f.height+Nb(d)),a&&Oc(b,0,d.height);return!0});return d}
function Hd(b,f,a,c,d){var g=a.flattenSpans;null==g&&(g=b.options.flattenSpans);var e=0,h=null,k=new yb(f,b.options.tabSize),m;for(""==f&&a.blankLine&&a.blankLine(c);!k.eol();){k.pos>b.options.maxHighlightLength?(g=!1,k.pos=f.length,m=null):m=a.token(k,c);if(!g||h!=m)e<k.start&&d(k.start,h),e=k.start,h=m;k.start=k.pos}for(;e<k.pos;)b=Math.min(k.pos,e+5E4),d(b,h),e=b}function $c(b,f,a){var c=[b.state.modeGen];Hd(b,f.text,b.doc.mode,a,function(b,f){c.push(b,f)});for(a=0;a<b.state.overlays.length;++a){var d=
b.state.overlays[a],g=1,e=0;Hd(b,f.text,d.mode,!0,function(b,f){for(var a=g;e<b;){var l=c[g];l>b&&c.splice(g,1,b,c[g+1],l);g+=2;e=Math.min(b,l)}if(f)if(d.opaque)c.splice(a,g-a,b,f),g=a+2;else for(;a<g;a+=2)l=c[a+1],c[a+1]=l?l+" "+f:f})}return c}function Id(b,f){if(!f.styles||f.styles[0]!=b.state.modeGen)f.styles=$c(b,f,f.stateAfter=gb(b,fa(f)));return f.styles}function ad(b,f,a){var c=b.doc.mode,d=new yb(f.text,b.options.tabSize);for(""==f.text&&c.blankLine&&c.blankLine(a);!d.eol()&&d.pos<=b.options.maxHighlightLength;)c.token(d,
a),d.start=d.pos}function Jd(b){return!b?null:Kd[b]||(Kd[b]="cm-"+b.replace(/ +/g," cm-"))}function tc(b,f,a,c){for(var d,g=f,e=!0;d=Ua(g,-1);)g=C(b.doc,d.find().from.line);c={pre:B("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:b,copyWidgets:c};g.textClass&&(c.pre.className=g.textClass);do{g.text&&(e=!1);c.measure=g==f&&a;c.pos=0;c.addToken=c.measure?qe:Ld;if((O||S)&&b.getOption("lineWrapping"))c.addToken=re(c.addToken);a:{d=c;var h=Id(b,g),k=g.markedSpans,m=g.text,n=0;if(k)for(var r=m.length,
p=0,q=1,u="",v=void 0,s=0,t=void 0,G=void 0,x=void 0,D=void 0,w=void 0;;){if(s==p){for(var t=G=x=D="",w=null,s=Infinity,z=[],y=0;y<k.length;++y){var A=k[y],E=A.marker;if(A.from<=p&&(null==A.to||A.to>p)){if(null!=A.to&&s>A.to&&(s=A.to,G=""),E.className&&(t+=" "+E.className),E.startStyle&&A.from==p&&(x+=" "+E.startStyle),E.endStyle&&A.to==s&&(G+=" "+E.endStyle),E.title&&!D&&(D=E.title),E.collapsed&&(!w||w.marker.size<E.size))w=A}else A.from>p&&s>A.from&&(s=A.from);"bookmark"==E.type&&(A.from==p&&E.replacedWith)&&
z.push(E)}if(w&&(w.from||0)==p)if(Md(d,(null==w.to?r:w.to)-p,w.marker,null==w.from),null==w.to){d=w.marker.find();break a}if(!w&&z.length)for(y=0;y<z.length;++y)Md(d,0,z[y])}if(p>=r)break;for(z=Math.min(r,s);;){if(u){y=p+u.length;w||(A=y>z?u.slice(0,z-p):u,d.addToken(d,A,v?v+t:t,x,p+A.length==s?G:"",D));if(y>=z){u=u.slice(z-p);p=z;break}p=y;x=""}u=m.slice(n,n=h[q++]);v=Jd(h[q++])}}else for(var q=1;q<h.length;q+=2)d.addToken(d,m.slice(n,n=h[q]),Jd(h[q+1]));d=void 0}a&&(g==f&&!c.measuredSomething)&&
(a[0]=c.pre.appendChild(pb(b.display.measure)),c.measuredSomething=!0);d&&(g=C(b.doc,d.to.line))}while(d);a&&(!c.measuredSomething&&!a[0])&&(a[0]=c.pre.appendChild(e?B("span","\u00a0"):pb(b.display.measure)));!c.pre.firstChild&&!Da(b.doc,f)&&c.pre.appendChild(document.createTextNode("\u00a0"));var F;if(a&&O&&(F=ma(g)))if(e=F.length-1,F[e].from==F[e].to&&--e,g=F[e],F=F[e-1],g.from+1==g.to&&(F&&g.level<F.level)&&(a=a[c.pos-1]))a.parentNode.insertBefore(a.measureRight=pb(b.display.measure),a.nextSibling);
T(b,"renderLine",b,f,c.pre);return c.pre}function Ld(b,a,c,d,g,e){if(a){if(Rc.test(a))for(var h=document.createDocumentFragment(),k=0;;){Rc.lastIndex=k;var m=Rc.exec(a),n=m?m.index-k:a.length-k;n&&(h.appendChild(document.createTextNode(a.slice(k,k+n))),b.col+=n);if(!m)break;k+=n+1;"\t"==m[0]?(m=b.cm.options.tabSize,m-=b.col%m,h.appendChild(B("span",Ad(m),"cm-tab")),b.col+=m):(n=B("span","\u2022","cm-invalidchar"),n.title="\\u"+m[0].charCodeAt(0).toString(16),h.appendChild(n),b.col+=1)}else{b.col+=
a.length;var h=document.createTextNode(a)}if(c||d||g||b.measure)return a=c||"",d&&(a+=d),g&&(a+=g),n=B("span",[h],a),e&&(n.title=e),b.pre.appendChild(n);b.pre.appendChild(h)}}function qe(b,a,c,d,g){for(var e=b.cm.options.lineWrapping,h=0;h<a.length;++h){var k=a.charAt(h),m=0==h;"\ud800"<=k&&"\udbff">k&&h<a.length-1?(k=a.slice(h,h+2),++h):h&&(e&&Cb(a,h))&&b.pre.appendChild(B("wbr"));var n=b.measure[b.pos],m=b.measure[b.pos]=Ld(b,k,c,m&&d,h==a.length-1&&g);n&&(m.leftSide=n.leftSide||n);O&&(e&&" "==
k&&h&&!/\s/.test(a.charAt(h-1))&&h<a.length-1&&!/\s/.test(a.charAt(h+1)))&&(m.style.whiteSpace="normal");b.pos+=k.length}a.length&&(b.measuredSomething=!0)}function re(b){function a(b){for(var f=" ",c=0;c<b.length-2;++c)f+=c%2?" ":"\u00a0";return f+" "}return function(c,d,g,e,h,k){return b(c,d.replace(/ {3,}/,a),g,e,h,k)}}function Md(b,a,c,d){if(d=!d&&c.replacedWith)if(b.copyWidgets&&(d=d.cloneNode(!0)),b.pre.appendChild(d),b.measure){if(a)b.measure[b.pos]=d;else{var g=pb(b.cm.display.measure);if("bookmark"==
c.type&&!c.insertLeft)b.measure[b.pos]=b.pre.appendChild(g);else{if(b.measure[b.pos])return;b.measure[b.pos]=b.pre.insertBefore(g,d)}}b.measuredSomething=!0}b.pos+=a}function Nc(b,a,c,d,g){function e(b,c,d){var l=g;b.text=c;b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null);null!=b.order&&(b.order=null);Ed(b);Fd(b,d);c=l?l(b):1;c!=b.height&&ha(b,c);Z(b,"change",b,a)}var h=a.from,k=a.to,m=a.text,n=C(b,h.line),p=C(b,k.line),r=aa(m),q=c?c[m.length-1]:null,u=k.line-h.line;if(0==h.ch&&0==k.ch&&
""==r){for(var v=0,s=m.length-1,t=[];v<s;++v)t.push(new Ea(m[v],c?c[v]:null,g));e(p,p.text,q);u&&b.remove(h.line,u);t.length&&b.insert(h.line,t)}else if(n==p)if(1==m.length)e(n,n.text.slice(0,h.ch)+r+n.text.slice(k.ch),q);else{t=[];v=1;for(s=m.length-1;v<s;++v)t.push(new Ea(m[v],c?c[v]:null,g));t.push(new Ea(r+n.text.slice(k.ch),q,g));e(n,n.text.slice(0,h.ch)+m[0],c?c[0]:null);b.insert(h.line+1,t)}else if(1==m.length)e(n,n.text.slice(0,h.ch)+m[0]+p.text.slice(k.ch),c?c[0]:null),b.remove(h.line+1,
u);else{e(n,n.text.slice(0,h.ch)+m[0],c?c[0]:null);e(p,r+p.text.slice(k.ch),q);v=1;s=m.length-1;for(t=[];v<s;++v)t.push(new Ea(m[v],c?c[v]:null,g));1<u&&b.remove(h.line+1,u-1);b.insert(h.line+1,t)}Z(b,"change",b,a);xa(b,d.anchor,d.head,null,!0)}function cc(b){this.lines=b;this.parent=null;for(var a=0,c=b.length,d=0;a<c;++a)b[a].parent=this,d+=b[a].height;this.height=d}function Db(b){this.children=b;for(var a=0,c=0,d=0,g=b.length;d<g;++d){var e=b[d],a=a+e.chunkSize(),c=c+e.height;e.parent=this}this.size=
a;this.height=c;this.parent=null}function bb(b,a,c){function d(b,g,e){if(b.linked)for(var h=0;h<b.linked.length;++h){var k=b.linked[h];if(k.doc!=g){var m=e&&k.sharedHist;if(!c||m)a(k.doc,m),d(k.doc,b,m)}}}d(b,null,!0)}function Xc(b,f){if(f.cm)throw Error("This document is already in use.");b.doc=f;f.cm=b;g(b);a(b);b.options.lineWrapping||H(b);b.options.mode=f.modeOption;P(b)}function C(b,a){for(a-=b.first;!b.lines;)for(var c=0;;++c){var d=b.children[c],g=d.chunkSize();if(a<g){b=d;break}a-=g}return b.lines[a]}
function Mc(b,a,c){var d=[],g=a.line;b.iter(a.line,c.line+1,function(b){b=b.text;g==c.line&&(b=b.slice(0,c.ch));g==a.line&&(b=b.slice(a.ch));d.push(b);++g});return d}function Sc(b,a,c){var d=[];b.iter(a,c,function(b){d.push(b.text)});return d}function ha(b,a){for(var c=a-b.height,d=b;d;d=d.parent)d.height+=c}function fa(b){if(null==b.parent)return null;var a=b.parent;b=ua(a.lines,b);for(var c=a.parent;c;a=c,c=c.parent)for(var d=0;c.children[d]!=a;++d)b+=c.children[d].chunkSize();return b+a.first}
function mb(b,a){var c=b.first;a:do{for(var d=0,g=b.children.length;d<g;++d){var e=b.children[d],h=e.height;if(a<h){b=e;continue a}a-=h;c+=e.chunkSize()}return c}while(!b.lines);d=0;for(g=b.lines.length;d<g;++d){e=b.lines[d].height;if(a<e)break;a-=e}return c+d}function ob(b,a){a=sa(b.doc,a);for(var c=0,d=a.parent,g=0;g<d.lines.length;++g){var e=d.lines[g];if(e==a)break;else c+=e.height}for(e=d.parent;e;d=e,e=d.parent)for(g=0;g<e.children.length;++g){var h=e.children[g];if(h==d)break;else c+=h.height}return c}
function ma(b){var a=b.order;null==a&&(a=b.order=se(b.text));return a}function dc(b){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:b||1,maxGeneration:b||1}}function Nd(b,a,c,d){var g=a["spans_"+b.id],e=0;b.iter(Math.max(b.first,c),Math.min(b.first+b.size,d),function(c){c.markedSpans&&((g||(g=a["spans_"+b.id]={}))[e]=c.markedSpans);++e})}function Lc(b,a){var c={from:{line:a.from.line,ch:a.from.ch},to:Ic(a),text:Mc(b,a.from,a.to)};Nd(b,c,a.from.line,a.to.line+
1);bb(b,function(b){Nd(b,c,a.from.line,a.to.line+1)},!0);return c}function ud(b,a,c,d){var g=b.history;g.undone.length=0;var e=+new Date,h=aa(g.done);if(h&&(g.lastOp==d||g.lastOrigin==a.origin&&a.origin&&("+"==a.origin.charAt(0)&&b.cm&&g.lastTime>e-b.cm.options.historyEventDelay||"*"==a.origin.charAt(0)))){var k=aa(h.changes);L(a.from,a.to)&&L(a.from,k.to)?k.to=Ic(a):h.changes.push(Lc(b,a));h.anchorAfter=c.anchor;h.headAfter=c.head}else{h={changes:[Lc(b,a)],generation:g.generation,anchorBefore:b.sel.anchor,
headBefore:b.sel.head,anchorAfter:c.anchor,headAfter:c.head};g.done.push(h);for(g.generation=++g.maxGeneration;g.done.length>g.undoDepth;)g.done.shift()}g.lastTime=e;g.lastOp=d;g.lastOrigin=a.origin}function oe(b){if(!b)return null;for(var a=0,c;a<b.length;++a)b[a].marker.explicitlyCleared?c||(c=b.slice(0,a)):c&&c.push(b[a]);return!c?b:c.length?c:null}function ec(b,a){for(var c=0,d=[];c<b.length;++c){var g=b[c],e=g.changes,h=[];d.push({changes:h,anchorBefore:g.anchorBefore,headBefore:g.headBefore,
anchorAfter:g.anchorAfter,headAfter:g.headAfter});for(g=0;g<e.length;++g){var k=e[g],m;h.push({from:k.from,to:k.to,text:k.text});if(a)for(var n in k)if((m=n.match(/^spans_(\d+)$/))&&-1<ua(a,Number(m[1])))aa(h)[n]=k[n],delete k[n]}}return d}function fc(b,a,c,d){c<b.line?b.line+=d:a<b.line&&(b.line=a,b.ch=0)}function Od(b,a,c,d){for(var g=0;g<b.length;++g){for(var e=b[g],h=!0,k=0;k<e.changes.length;++k){var m=e.changes[k];e.copied||(m.from=Ha(m.from),m.to=Ha(m.to));if(c<m.from.line)m.from.line+=d,m.to.line+=
d;else if(a<=m.to.line){h=!1;break}}e.copied||(e.anchorBefore=Ha(e.anchorBefore),e.headBefore=Ha(e.headBefore),e.anchorAfter=Ha(e.anchorAfter),e.readAfter=Ha(e.headAfter),e.copied=!0);h?(fc(e.anchorBefore),fc(e.headBefore),fc(e.anchorAfter),fc(e.headAfter)):(b.splice(0,g+1),g=0)}}function vd(b,a){var c=a.from.line,d=a.to.line,g=a.text.length-(d-c)-1;Od(b.done,c,d,g);Od(b.undone,c,d,g)}function te(){sb(this)}function rb(b){b.stop||(b.stop=te);return b}function Q(b){b.preventDefault?b.preventDefault():
b.returnValue=!1}function Pd(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0}function Cc(b){return null!=b.defaultPrevented?b.defaultPrevented:!1==b.returnValue}function sb(b){Q(b);Pd(b)}function kd(b){var a=b.which;null==a&&(b.button&1?a=1:b.button&2?a=3:b.button&4&&(a=2));Va&&(b.ctrlKey&&1==a)&&(a=3);return a}function E(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):(b=b._handlers||(b._handlers={}),(b[a]||(b[a]=[])).push(c))}function ta(b,a,
c){if(b.removeEventListener)b.removeEventListener(a,c,!1);else if(b.detachEvent)b.detachEvent("on"+a,c);else if(b=b._handlers&&b._handlers[a])for(a=0;a<b.length;++a)if(b[a]==c){b.splice(a,1);break}}function T(b,a){var c=b._handlers&&b._handlers[a];if(c)for(var d=Array.prototype.slice.call(arguments,2),g=0;g<c.length;++g)c[g].apply(null,d)}function Z(b,a){function c(b){return function(){b.apply(null,g)}}var d=b._handlers&&b._handlers[a];if(d){var g=Array.prototype.slice.call(arguments,2);wa||(++Qb,
wa=[],setTimeout(ue,0));for(var e=0;e<d.length;++e)wa.push(c(d[e]))}}function oa(b,a,c){T(b,c||a.type,b,a);return Cc(a)||a.codemirrorIgnore}function ue(){--Qb;var b=wa;wa=null;for(var a=0;a<b.length;++a)b[a]()}function pa(b,a){var c=b._handlers&&b._handlers[a];return c&&0<c.length}function db(b){b.prototype.on=function(b,a){E(this,b,a)};b.prototype.off=function(b,a){ta(this,b,a)}}function pc(){this.id=null}function Xa(b,a,c,d,g){null==a&&(a=b.search(/[^\s\u00a0]/),-1==a&&(a=b.length));d=d||0;for(g=
g||0;d<a;++d)"\t"==b.charAt(d)?g+=c-g%c:++g;return g}function Ad(b){for(;gc.length<=b;)gc.push(aa(gc)+" ");return gc[b]}function aa(b){return b[b.length-1]}function fd(b){if(jb)b.selectionStart=0,b.selectionEnd=b.value.length;else try{b.select()}catch(a){}}function ua(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;++c)if(b[c]==a)return c;return-1}function Qd(b,a){function c(){}c.prototype=b;var d=new c;a&&ac(a,d);return d}function ac(b,a){a||(a={});for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c]);return a}function cd(b){for(var a=[],c=0;c<b;++c)a.push(void 0);return a}function ea(b){var a=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,a)}}function xb(b){return/\w/.test(b)||"\u0080"<b&&(b.toUpperCase()!=b.toLowerCase()||ve.test(b))}function Rd(b){for(var a in b)if(b.hasOwnProperty(a)&&b[a])return!1;return!0}function B(b,a,c,d){b=document.createElement(b);c&&(b.className=c);d&&(b.style.cssText=d);if("string"==typeof a)Zc(b,a);else if(a)for(c=0;c<a.length;++c)b.appendChild(a[c]);
return b}function kb(b){for(var a=b.childNodes.length;0<a;--a)b.removeChild(b.firstChild);return b}function na(b,a){return kb(b).appendChild(a)}function Zc(b,a){ga?(b.innerHTML="",b.appendChild(document.createTextNode(a))):b.textContent=a}function N(b){return b.getBoundingClientRect()}function Cb(){return!1}function lb(b){if(null!=qb)return qb;var a=B("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");na(b,a);a.offsetWidth&&(qb=a.offsetHeight-a.clientHeight);return qb||0}function pb(b){if(null==
Tc){var a=B("span","\u200b");na(b,B("span",[a,document.createTextNode("x")]));0!=b.firstChild.offsetHeight&&(Tc=1>=a.offsetWidth&&2<a.offsetHeight&&!Ta)}return Tc?B("span","\u200b"):B("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function be(b,a,c,d){if(!b)return d(a,c,"ltr");for(var g=!1,e=0;e<b.length;++e){var h=b[e];if(h.from<c&&h.to>a||a==c&&h.to==a)d(Math.max(h.from,a),Math.min(h.to,c),1==h.level?"rtl":"ltr"),g=!0}g||d(a,c,"ltr")}function uc(b){return b.level%
2?b.from:b.to}function Ob(b){return(b=ma(b))?b[0].level%2?b[0].to:b[0].from:0}function Pb(b){var a=ma(b);return!a?b.text.length:uc(aa(a))}function Sd(b,a){var c=C(b.doc,a),d=sa(b.doc,c);d!=c&&(a=fa(d));c=ma(d);d=!c?0:c[0].level%2?Pb(d):Ob(d);return w(a,d)}function we(b,a){for(var c,d;c=Mb(d=C(b.doc,a));)a=c.find().to.line;c=ma(d);d=!c?d.text.length:c[0].level%2?Ob(d):Pb(d);return w(a,d)}function vc(b,a){for(var c=0,d;c<b.length;++c){var g=b[c];if(g.from<a&&g.to>a)return Ya=null,c;if(g.from==a||g.to==
a)if(null==d)d=c;else{var g=g.level,e=b[d].level,h=b[0].level,g=g==h?!0:e==h?!1:g<e;if(g)return Ya=d,c;Ya=c;return d}}Ya=null;return d}function Uc(b,a,c,d){if(!d)return a+c;do a+=c;while(0<a&&xc.test(b.text.charAt(a)));return a}function wc(b,a,c,d){var g=ma(b);if(!g)return Bd(b,a,c,d);var e=vc(g,a),h=g[e];for(a=Uc(b,a,h.level%2?-c:c,d);;){if(a>h.from&&a<h.to)return a;if(a==h.from||a==h.to){if(vc(g,a)==e)return a;h=g[e+c];return 0<c==h.level%2?h.to:h.from}h=g[e+=c];if(!h)return null;a=0<c==h.level%
2?Uc(b,h.to,-1,d):Uc(b,h.from,1,d)}}function Bd(b,a,c,d){a+=c;if(d)for(;0<a&&xc.test(b.text.charAt(a));)a+=c;return 0>a||a>b.text.length?null:a}var ab=/gecko\/\d/i.test(navigator.userAgent),O=/MSIE \d/.test(navigator.userAgent),Ta=O&&(null==document.documentMode||8>document.documentMode),ga=O&&(null==document.documentMode||9>document.documentMode),S=/WebKit\//.test(navigator.userAgent),xe=S&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ye=/Chrome\//.test(navigator.userAgent),ia=/Opera\//.test(navigator.userAgent),
Bc=/Apple Computer/.test(navigator.vendor),sc=/KHTML\//.test(navigator.userAgent),$d=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),ae=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),de=/PhantomJS/.test(navigator.userAgent),jb=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),oc=jb||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Va=jb||/Mac/.test(navigator.platform),ze=/win/i.test(navigator.platform),Ja=ia&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);
Ja&&(Ja=Number(Ja[1]));Ja&&15<=Ja&&(ia=!1,S=!0);var Dd=Va&&(xe||ia&&(null==Ja||12.11>Ja)),Ac=ab||O&&!ga,td=!1,nb=!1,Fa,ce=0,Tb,Sb,jd=0,Ub=0,ja=null;O?ja=-0.53:ab?ja=15:ye?ja=-0.7:Bc&&(ja=-1/3);var od,Fc=null,Gc,Ic=e.changeEnd=function(b){return!b.text?b.to:w(b.from.line+b.text.length-1,aa(b.text).length+(1==b.text.length?b.from.ch:0))};e.Pos=w;e.prototype={constructor:e,focus:function(){window.focus();ba(this);va(this);La(this)},setOption:function(b,a){var c=this.options,d=c[b];c[b]==a&&"mode"!=b||
(c[b]=a,Ra.hasOwnProperty(b)&&A(this,Ra[b])(this,a,d))},getOption:function(b){return this.options[b]},getDoc:function(){return this.doc},addKeyMap:function(b,a){this.state.keyMaps[a?"push":"unshift"](b)},removeKeyMap:function(b){for(var a=this.state.keyMaps,c=0;c<a.length;++c)if(a[c]==b||"string"!=typeof a[c]&&a[c].name==b)return a.splice(c,1),!0},addOverlay:A(null,function(b,a){var c=b.token?b:e.getMode(this.options,b);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,
modeSpec:b,opaque:a&&a.opaque});this.state.modeGen++;P(this)}),removeOverlay:A(null,function(b){for(var a=this.state.overlays,c=0;c<a.length;++c){var d=a[c].modeSpec;if(d==b||"string"==typeof b&&d.name==b){a.splice(c,1);this.state.modeGen++;P(this);break}}}),indentLine:A(null,function(b,a,c){"string"!=typeof a&&"number"!=typeof a&&(a=null==a?this.options.smartIndent?"smart":"prev":a?"add":"subtract");cb(this.doc,b)&&Wb(this,b,a,c)}),indentSelection:A(null,function(b){var a=this.doc.sel;if(L(a.from,
a.to))return Wb(this,a.from.line,b);for(var c=a.to.line-(a.to.ch?0:1),a=a.from.line;a<=c;++a)Wb(this,a,b)}),getTokenAt:function(b,a){var c=this.doc;b=y(c,b);for(var d=gb(this,b.line,a),g=this.doc.mode,c=C(c,b.line),c=new yb(c.text,this.options.tabSize);c.pos<b.ch&&!c.eol();){c.start=c.pos;var e=g.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:e||null,type:e||null,state:d}},getTokenTypeAt:function(b){b=y(this.doc,b);var a=Id(this,C(this.doc,b.line)),c=0,d=(a.length-1)/2;b=b.ch;
if(0==b)return a[2];for(;;){var g=c+d>>1;if((g?a[2*g-1]:0)>=b)d=g;else if(a[2*g+1]<b)c=g+1;else return a[2*g+2]}},getModeAt:function(b){var a=this.doc.mode;return!a.innerMode?a:e.innerMode(a,this.getTokenAt(b).state).mode},getHelper:function(b,a){if(Eb.hasOwnProperty(a)){var c=Eb[a],d=this.getModeAt(b);return d[a]&&c[d[a]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(b,a){var c=this.doc;b=Math.max(c.first,Math.min(null==b?c.first+c.size-1:b,c.first+c.size-1));return gb(this,
b+1,a)},cursorCoords:function(b,a){var c;c=this.doc.sel;c=null==b?c.head:"object"==typeof b?y(this.doc,b):b?c.from:c.to;return la(this,c,a||"page")},charCoords:function(b,a){return Jb(this,y(this.doc,b),a||"page")},coordsChar:function(b,a){b=da(this,b,a||"page");return kc(this,b.left,b.top)},lineAtHeight:function(b,a){b=da(this,{top:b,left:0},a||"page").top;return mb(this.doc,b+this.display.viewOffset)},heightAtLine:function(b,a){var c=!1,d=this.doc.first+this.doc.size-1;b<this.doc.first?b=this.doc.first:
b>d&&(b=d,c=!0);d=C(this.doc,b);return Ba(this,C(this.doc,b),{top:0,left:0},a||"page").top+(c?d.height:0)},defaultTextHeight:function(){return Ma(this.display)},defaultCharWidth:function(){return Wc(this.display)},setGutterMarker:A(null,function(b,a,c){return $b(this,b,function(b){var d=b.gutterMarkers||(b.gutterMarkers={});d[a]=c;!c&&Rd(d)&&(b.gutterMarkers=null);return!0})}),clearGutter:A(null,function(b){var a=this,c=a.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[b]&&(c.gutterMarkers[b]=
null,P(a,d,d+1),Rd(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineClass:A(null,function(b,a,c){return $b(this,b,function(b){var d="text"==a?"textClass":"background"==a?"bgClass":"wrapClass";if(b[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(b[d]))return!1;b[d]+=" "+c}else b[d]=c;return!0})}),removeLineClass:A(null,function(b,a,c){return $b(this,b,function(b){var d="text"==a?"textClass":"background"==a?"bgClass":"wrapClass",g=b[d];if(g)if(null==c)b[d]=null;else{var e=g.match(RegExp("(?:^|\\s+)"+
c+"(?:$|\\s+)"));if(!e)return!1;var h=e.index+e[0].length;b[d]=g.slice(0,e.index)+(!e.index||h==g.length?"":" ")+g.slice(h)||null}else return!1;return!0})}),addLineWidget:A(null,function(b,a,c){return pe(this,b,a,c)}),removeLineWidget:function(b){b.clear()},lineInfo:function(b){if("number"==typeof b){if(!cb(this.doc,b))return null;var a=b;b=C(this.doc,b);if(!b)return null}else if(a=fa(b),null==a)return null;return{line:a,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,
wrapClass:b.wrapClass,widgets:b.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(b,a,c,d,g){var e=this.display;b=la(this,y(this.doc,b));var h=b.bottom,k=b.left;a.style.position="absolute";e.sizer.appendChild(a);if("over"==d)h=b.top;else if("above"==d||"near"==d){var m=Math.max(e.wrapper.clientHeight,this.doc.height),n=Math.max(e.sizer.clientWidth,e.lineSpace.clientWidth);("above"==d||b.bottom+a.offsetHeight>m)&&b.top>a.offsetHeight?
h=b.top-a.offsetHeight:b.bottom+a.offsetHeight<=m&&(h=b.bottom);k+a.offsetWidth>n&&(k=n-a.offsetWidth)}a.style.top=h+"px";a.style.left=a.style.right="";"right"==g?(k=e.sizer.clientWidth-a.offsetWidth,a.style.right="0px"):("left"==g?k=0:"middle"==g&&(k=(e.sizer.clientWidth-a.offsetWidth)/2),a.style.left=k+"px");c&&(b=Rb(this,k,h,k+a.offsetWidth,h+a.offsetHeight),null!=b.scrollTop&&ub(this,b.scrollTop),null!=b.scrollLeft&&Za(this,b.scrollLeft))},triggerOnKeyDown:A(null,id),execCommand:function(b){return Dc[b](this)},
findPosH:function(b,a,c,d){var g=1;0>a&&(g=-1,a=-a);var e=0;for(b=y(this.doc,b);e<a&&!(b=Pc(this.doc,b,g,c,d),b.hitSide);++e);return b},moveH:A(null,function(b,a){var c=this.doc.sel,c=c.shift||c.extend||L(c.from,c.to)?Pc(this.doc,c.head,b,a,this.options.rtlMoveVisually):0>b?c.from:c.to;W(this.doc,c,c,b)}),deleteH:A(null,function(b,a){var c=this.doc.sel;L(c.from,c.to)?ya(this.doc,"",c.from,Pc(this.doc,c.head,b,a,!1),"+delete"):ya(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(b,
a,c,d){var g=1;0>a&&(g=-1,a=-a);var e=0;for(b=y(this.doc,b);e<a&&!(b=la(this,b,"div"),null==d?d=b.left:b.left=d,b=Cd(this,b,g,c),b.hitSide);++e);return b},moveV:A(null,function(b,a){var c=this.doc.sel,d=la(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var g=Cd(this,d,b,a);"page"==a&&Oc(this,0,Jb(this,g,"div").top-d.top);W(this.doc,g,g,b);c.goalColumn=d.left}),toggleOverwrite:function(b){null!=b&&b==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=
" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:A(null,function(b,a){Zb(this,b,a)}),getScrollInfo:function(){var b=this.display.scroller,a=Sa;return{left:b.scrollLeft,top:b.scrollTop,height:b.scrollHeight-a,width:b.scrollWidth-a,clientHeight:b.clientHeight-a,clientWidth:b.clientWidth-a}},scrollIntoView:A(null,function(b,a){"number"==typeof b&&(b=w(b,0));a||(a=0);var c=
b;if(!b||null!=b.line)this.curOp.scrollToPos=b?y(this.doc,b):this.doc.sel.head,this.curOp.scrollToPosMargin=a,c=la(this,this.curOp.scrollToPos);c=Rb(this,c.left,c.top-a,c.right,c.bottom+a);Zb(this,c.scrollLeft,c.scrollTop)}),setSize:A(null,function(b,a){function c(b){return"number"==typeof b||/^\d+$/.test(String(b))?b+"px":b}null!=b&&(this.display.wrapper.style.width=c(b));null!=a&&(this.display.wrapper.style.height=c(a));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=
0);this.curOp.forceUpdate=!0}),operation:function(b){return lc(this,b)},refresh:A(null,function(){var b=null==this.display.cachedTextHeight;Aa(this);Zb(this,this.doc.scrollLeft,this.doc.scrollTop);P(this);b&&g(this)}),swapDoc:A(null,function(b){var a=this.doc;a.cm=null;Xc(this,b);Aa(this);qa(this,!0);Zb(this,b.scrollLeft,b.scrollTop);return a}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},
getGutterElement:function(){return this.display.gutters}};db(e);var Ra=e.optionHandlers={},nc=e.defaults={},Yc=e.Init={toString:function(){return"CodeMirror.Init"}};F("value","",function(b,a){b.setValue(a)},!0);F("mode",null,function(b,c){b.doc.modeOption=c;a(b)},!0);F("indentUnit",2,a,!0);F("indentWithTabs",!1);F("smartIndent",!0);F("tabSize",4,function(b){a(b);Aa(b);P(b)},!0);F("electricChars",!0);F("rtlMoveVisually",!ze);F("theme","default",function(b){v(b);D(b)},!0);F("keyMap","default",r);F("extraKeys",
null);F("onKeyEvent",null);F("onDragEvent",null);F("lineWrapping",!1,function(b){b.options.lineWrapping?(b.display.wrapper.className+=" CodeMirror-wrap",b.display.sizer.style.minWidth=""):(b.display.wrapper.className=b.display.wrapper.className.replace(" CodeMirror-wrap",""),H(b));g(b);P(b);Aa(b);setTimeout(function(){p(b)},100)},!0);F("gutters",[],function(b){n(b.options);D(b)},!0);F("fixedGutter",!0,function(b,a){b.display.gutters.style.left=a?J(b.display)+"px":"0";b.refresh()},!0);F("coverGutterNextToScrollbar",
!1,p,!0);F("lineNumbers",!1,function(b){n(b.options);D(b)},!0);F("firstLineNumber",1,D,!0);F("lineNumberFormatter",function(b){return b},D,!0);F("showCursorWhenSelecting",!1,ka,!0);F("readOnly",!1,function(b,a){"nocursor"==a?(qc(b),b.display.input.blur()):a||qa(b,!0)});F("dragDrop",!0);F("cursorBlinkRate",530);F("cursorScrollMargin",0);F("cursorHeight",1);F("workTime",100);F("workDelay",100);F("flattenSpans",!0);F("pollInterval",100);F("undoDepth",40,function(b,a){b.doc.history.undoDepth=a});F("historyEventDelay",
500);F("viewportMargin",10,function(b){b.refresh()},!0);F("maxHighlightLength",1E4,function(b){a(b);b.refresh()},!0);F("crudeMeasuringFrom",1E4);F("moveInputWithCursor",!0,function(b,a){a||(b.display.inputDiv.style.top=b.display.inputDiv.style.left=0)});F("tabindex",null,function(b,a){b.display.input.tabIndex=a||""});F("autofocus",null);var Td=e.modes={},Fb=e.mimeModes={};e.defineMode=function(b,a){!e.defaults.mode&&"null"!=b&&(e.defaults.mode=b);if(2<arguments.length){a.dependencies=[];for(var c=
2;c<arguments.length;++c)a.dependencies.push(arguments[c])}Td[b]=a};e.defineMIME=function(b,a){Fb[b]=a};e.resolveMode=function(b){if("string"==typeof b&&Fb.hasOwnProperty(b))b=Fb[b];else if(b&&"string"==typeof b.name&&Fb.hasOwnProperty(b.name)){var a=Fb[b.name];b=Qd(a,b);b.name=a.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return e.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};e.getMode=function(b,a){a=e.resolveMode(a);var c=Td[a.name];if(!c)return e.getMode(b,
"text/plain");c=c(b,a);if(Gb.hasOwnProperty(a.name)){var d=Gb[a.name],g;for(g in d)d.hasOwnProperty(g)&&(c.hasOwnProperty(g)&&(c["_"+g]=c[g]),c[g]=d[g])}c.name=a.name;return c};e.defineMode("null",function(){return{token:function(b){b.skipToEnd()}}});e.defineMIME("text/plain","null");var Gb=e.modeExtensions={};e.extendMode=function(b,a){var c=Gb.hasOwnProperty(b)?Gb[b]:Gb[b]={};ac(a,c)};e.defineExtension=function(b,a){e.prototype[b]=a};e.defineDocExtension=function(b,a){Y.prototype[b]=a};e.defineOption=
F;var rc=[];e.defineInitHook=function(b){rc.push(b)};var Eb=e.helpers={};e.registerHelper=function(b,a,c){Eb.hasOwnProperty(b)||(Eb[b]=e[b]={});Eb[b][a]=c};e.isWordChar=xb;e.copyState=Wa;e.startState=bd;e.innerMode=function(b,a){for(;b.innerMode;){var c=b.innerMode(a);if(!c||c.mode==b)break;a=c.state;b=c.mode}return c||{mode:b,state:a}};var Dc=e.commands={selectAll:function(b){b.setSelection(w(b.firstLine(),0),w(b.lastLine()))},killLine:function(b){var a=b.getCursor(!0),c=b.getCursor(!1),d=!L(a,c);
!d&&b.getLine(a.line).length==a.ch?b.replaceRange("",a,w(a.line+1,0),"+delete"):b.replaceRange("",a,d?c:w(a.line),"+delete")},deleteLine:function(b){var a=b.getCursor().line;b.replaceRange("",w(a,0),w(a),"+delete")},delLineLeft:function(b){var a=b.getCursor();b.replaceRange("",w(a.line,0),a,"+delete")},undo:function(b){b.undo()},redo:function(b){b.redo()},goDocStart:function(b){b.extendSelection(w(b.firstLine(),0))},goDocEnd:function(b){b.extendSelection(w(b.lastLine()))},goLineStart:function(b){b.extendSelection(Sd(b,
b.getCursor().line))},goLineStartSmart:function(b){var a=b.getCursor(),c=Sd(b,a.line),d=b.getLineHandle(c.line),g=ma(d);!g||0==g[0].level?(d=Math.max(0,d.text.search(/\S/)),b.extendSelection(w(c.line,a.line==c.line&&a.ch<=d&&a.ch?0:d))):b.extendSelection(c)},goLineEnd:function(b){b.extendSelection(we(b,b.getCursor().line))},goLineRight:function(b){var a=b.charCoords(b.getCursor(),"div").top+5;b.extendSelection(b.coordsChar({left:b.display.lineDiv.offsetWidth+100,top:a},"div"))},goLineLeft:function(b){var a=
b.charCoords(b.getCursor(),"div").top+5;b.extendSelection(b.coordsChar({left:0,top:a},"div"))},goLineUp:function(b){b.moveV(-1,"line")},goLineDown:function(b){b.moveV(1,"line")},goPageUp:function(b){b.moveV(-1,"page")},goPageDown:function(b){b.moveV(1,"page")},goCharLeft:function(b){b.moveH(-1,"char")},goCharRight:function(b){b.moveH(1,"char")},goColumnLeft:function(b){b.moveH(-1,"column")},goColumnRight:function(b){b.moveH(1,"column")},goWordLeft:function(b){b.moveH(-1,"word")},goGroupRight:function(b){b.moveH(1,
"group")},goGroupLeft:function(b){b.moveH(-1,"group")},goWordRight:function(b){b.moveH(1,"word")},delCharBefore:function(b){b.deleteH(-1,"char")},delCharAfter:function(b){b.deleteH(1,"char")},delWordBefore:function(b){b.deleteH(-1,"word")},delWordAfter:function(b){b.deleteH(1,"word")},delGroupBefore:function(b){b.deleteH(-1,"group")},delGroupAfter:function(b){b.deleteH(1,"group")},indentAuto:function(b){b.indentSelection("smart")},indentMore:function(b){b.indentSelection("add")},indentLess:function(b){b.indentSelection("subtract")},
insertTab:function(b){b.replaceSelection("\t","end","+input")},defaultTab:function(b){b.somethingSelected()?b.indentSelection("add"):b.replaceSelection("\t","end","+input")},transposeChars:function(b){var a=b.getCursor(),c=b.getLine(a.line);0<a.ch&&a.ch<c.length-1&&b.replaceRange(c.charAt(a.ch)+c.charAt(a.ch-1),w(a.line,a.ch-1),w(a.line,a.ch+1))},newlineAndIndent:function(b){A(b,function(){b.replaceSelection("\n","end","+input");b.indentLine(b.getCursor().line,null,!0)})()},toggleOverwrite:function(b){b.toggleOverwrite()}},
ra=e.keyMap={};ra.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};ra.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd",
"Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineLeft","Alt-Right":"goLineRight","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};ra.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd",
"Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};ra["default"]=Va?ra.macDefault:ra.pcDefault;ra.emacsy=
{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineLeft","Ctrl-E":"goLineRight","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};e.lookupKey=vb;e.isModifierKey=pd;e.keyName=qd;e.fromTextArea=function(b,a){function c(){b.value=r.getValue()}a||(a={});a.value=
b.value;!a.tabindex&&b.tabindex&&(a.tabindex=b.tabindex);!a.placeholder&&b.placeholder&&(a.placeholder=b.placeholder);if(null==a.autofocus){var d=document.body;try{d=document.activeElement}catch(g){}a.autofocus=d==b||null!=b.getAttribute("autofocus")&&d==document.body}if(b.form&&(E(b.form,"submit",c),!a.leaveSubmitMethodAlone)){var h=b.form,m=h.submit;try{var n=h.submit=function(){c();h.submit=m;h.submit();h.submit=n}}catch(p){}}b.style.display="none";var r=e(function(a){b.parentNode.insertBefore(a,
b.nextSibling)},a);r.save=c;r.getTextArea=function(){return b};r.toTextArea=function(){c();b.parentNode.removeChild(r.getWrapperElement());b.style.display="";b.form&&(ta(b.form,"submit",c),"function"==typeof b.form.submit&&(b.form.submit=m))};return r};yb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},
eat:function(b){var a=this.string.charAt(this.pos);if("string"==typeof b?a==b:a&&(b.test?b.test(a):b(a)))return++this.pos,a},eatWhile:function(b){for(var a=this.pos;this.eat(b););return this.pos>a},eatSpace:function(){for(var b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>b},skipToEnd:function(){this.pos=this.string.length},skipTo:function(b){b=this.string.indexOf(b,this.pos);if(-1<b)return this.pos=b,!0},backUp:function(b){this.pos-=b},column:function(){this.lastColumnPos<
this.start&&(this.lastColumnValue=Xa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue},indentation:function(){return Xa(this.string,null,this.tabSize)},match:function(b,a,c){if("string"==typeof b){var d=this.string.substr(this.pos,b.length);if((c?d.toLowerCase():d)==(c?b.toLowerCase():b))return!1!==a&&(this.pos+=b.length),!0}else{if((b=this.string.slice(this.pos).match(b))&&0<b.index)return null;b&&!1!==a&&(this.pos+=
b[0].length);return b}},current:function(){return this.string.slice(this.start,this.pos)}};e.StringStream=yb;e.TextMarker=za;db(za);za.prototype.clear=function(){if(!this.explicitlyCleared){var b=this.doc.cm,a=b&&!b.curOp;a&&Na(b);if(pa(this,"clear")){var c=this.find();c&&Z(this,"clear",c.from,c.to)}for(var d=c=null,g=0;g<this.lines.length;++g){var e=this.lines[g],h=Bb(e.markedSpans,this);null!=h.to&&(d=fa(e));for(var k=e,m=e.markedSpans,n=h,p=void 0,r=0;r<m.length;++r)m[r]!=n&&(p||(p=[])).push(m[r]);
k.markedSpans=p;null!=h.from?c=fa(e):this.collapsed&&(!Da(this.doc,e)&&b)&&ha(e,Ma(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(g=0;g<this.lines.length;++g)e=sa(b.doc,this.lines[g]),h=z(b.doc,e),h>b.display.maxLineLength&&(b.display.maxLine=e,b.display.maxLineLength=h,b.display.maxLineChanged=!0);null!=c&&b&&P(b,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&zd(b));a&&Ka(b)}};za.prototype.find=function(){for(var b,a,c=
0;c<this.lines.length;++c){var d=this.lines[c],g=Bb(d.markedSpans,this);if(null!=g.from||null!=g.to)d=fa(d),null!=g.from&&(b=w(d,g.from)),null!=g.to&&(a=w(d,g.to))}return"bookmark"==this.type?b:b&&{from:b,to:a}};za.prototype.changed=function(){var b=this.find(),a=this.doc.cm;if(b&&a){"bookmark"!=this.type&&(b=b.from);var c=C(this.doc,b.line);Wd(a,c);if(b.line>=a.display.showingFrom&&b.line<a.display.showingTo){for(b=a.display.lineDiv.firstChild;b;b=b.nextSibling)if(b.lineObj==c){b.offsetHeight!=c.height&&
ha(c,b.offsetHeight);break}lc(a,function(){a.curOp.selectionChanged=a.curOp.forceUpdate=a.curOp.updateMaxLine=!0})}}};za.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;if(!a.maybeHiddenMarkers||-1==ua(a.maybeHiddenMarkers,this))(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)};za.prototype.detachLine=function(b){this.lines.splice(ua(this.lines,b),1);!this.lines.length&&this.doc.cm&&(b=this.doc.cm.curOp,(b.maybeHiddenMarkers||
(b.maybeHiddenMarkers=[])).push(this))};e.SharedTextMarker=Ab;db(Ab);Ab.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var b=0;b<this.markers.length;++b)this.markers[b].clear();Z(this,"clear")}};Ab.prototype.find=function(){return this.primary.find()};var bc=e.LineWidget=function(b,a,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=b;this.node=a};db(bc);bc.prototype.clear=Gd(function(){var b=this.line.widgets,a=fa(this.line);if(null!=a&&b){for(var c=
0;c<b.length;++c)b[c]==this&&b.splice(c--,1);b.length||(this.line.widgets=null);b=ob(this.cm,this.line)<this.cm.doc.scrollTop;ha(this.line,Math.max(0,this.line.height-Nb(this)));b&&Oc(this.cm,0,-this.height);P(this.cm,a,a+1)}});bc.prototype.changed=Gd(function(){var b=this.height;this.height=null;if(b=Nb(this)-b)ha(this.line,this.line.height+b),b=fa(this.line),P(this.cm,b,b+1)});var Ea=e.Line=function(b,a,c){this.text=b;Fd(this,a);this.height=c?c(this):1};db(Ea);var Kd={},Rc=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;
cc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(b,a){for(var c=b,d=b+a;c<d;++c){var g=this.lines[c];this.height-=g.height;var e=g;e.parent=null;Ed(e);Z(g,"delete")}this.lines.splice(b,a)},collapse:function(b){b.splice.apply(b,[b.length,0].concat(this.lines))},insertInner:function(b,a,c){this.height+=c;this.lines=this.lines.slice(0,b).concat(a).concat(this.lines.slice(b));b=0;for(c=a.length;b<c;++b)a[b].parent=this},iterN:function(b,a,c){for(a=b+a;b<a;++b)if(c(this.lines[b]))return!0}};
Db.prototype={chunkSize:function(){return this.size},removeInner:function(b,a){this.size-=a;for(var c=0;c<this.children.length;++c){var d=this.children[c],g=d.chunkSize();if(b<g){var e=Math.min(a,g-b),h=d.height;d.removeInner(b,e);this.height-=h-d.height;g==e&&(this.children.splice(c--,1),d.parent=null);if(0==(a-=e))break;b=0}else b-=g}25>this.size-a&&(c=[],this.collapse(c),this.children=[new cc(c)],this.children[0].parent=this)},collapse:function(b){for(var a=0,c=this.children.length;a<c;++a)this.children[a].collapse(b)},
insertInner:function(b,a,c){this.size+=a.length;this.height+=c;for(var d=0,g=this.children.length;d<g;++d){var e=this.children[d],h=e.chunkSize();if(b<=h){e.insertInner(b,a,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)b=e.lines.splice(e.lines.length-25,25),b=new cc(b),e.height-=b.height,this.children.splice(d+1,0,b),b.parent=this;this.maybeSpill()}break}b-=h}},maybeSpill:function(){if(!(10>=this.children.length)){var b=this;do{var a=b.children.splice(b.children.length-5,5),a=new Db(a);
if(b.parent){b.size-=a.size;b.height-=a.height;var c=ua(b.parent.children,b);b.parent.children.splice(c+1,0,a)}else c=new Db(b.children),c.parent=b,b.children=[c,a],b=c;a.parent=b.parent}while(10<b.children.length);b.parent.maybeSpill()}},iterN:function(b,a,c){for(var d=0,g=this.children.length;d<g;++d){var e=this.children[d],h=e.chunkSize();if(b<h){h=Math.min(a,h-b);if(e.iterN(b,h,c))return!0;if(0==(a-=h))break;b=0}else b-=h}}};var Ae=0,Y=e.Doc=function(b,a,c){if(!(this instanceof Y))return new Y(b,
a,c);null==c&&(c=0);Db.call(this,[new cc([new Ea("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=dc();this.cleanGeneration=1;this.frontier=c;c=w(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++Ae;this.modeOption=a;"string"==typeof b&&(b=Ga(b));Nc(this,{from:c,to:c,text:b},null,{head:c,anchor:c})};Y.prototype=Qd(Db.prototype,{constructor:Y,iter:function(b,a,c){c?this.iterN(b-this.first,a-b,c):this.iterN(this.first,this.first+
this.size,b)},insert:function(b,a){for(var c=0,d=0,g=a.length;d<g;++d)c+=a[d].height;this.insertInner(b-this.first,a,c)},remove:function(b,a){this.removeInner(b-this.first,a)},getValue:function(b){var a=Sc(this,this.first,this.first+this.size);return!1===b?a:a.join(b||"\n")},setValue:function(b){var a=w(this.first,0),c=this.first+this.size-1;$a(this,{from:a,to:w(c,C(this,c).text.length),text:Ga(b),origin:"setValue"},{head:a,anchor:a},!0)},replaceRange:function(b,a,c,d){a=y(this,a);c=c?y(this,c):a;
ya(this,b,a,c,d)},getRange:function(b,a,c){b=Mc(this,y(this,b),y(this,a));return!1===c?b:b.join(c||"\n")},getLine:function(b){return(b=this.getLineHandle(b))&&b.text},setLine:function(b,a){cb(this,b)&&ya(this,a,w(b,0),y(this,w(b)))},removeLine:function(b){b?ya(this,"",y(this,w(b-1)),y(this,w(b))):ya(this,"",w(0,0),y(this,w(1,0)))},getLineHandle:function(b){if(cb(this,b))return C(this,b)},getLineNumber:function(b){return fa(b)},getLineHandleVisualStart:function(b){"number"==typeof b&&(b=C(this,b));
return sa(this,b)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(b){return y(this,b)},getCursor:function(b){var a=this.sel;return Ha(null==b||"head"==b?a.head:"anchor"==b?a.anchor:"end"==b||!1===b?a.to:a.from)},somethingSelected:function(){return!L(this.sel.head,this.sel.anchor)},setCursor:hb(function(b,a,c){b=y(this,"number"==typeof b?w(b,a||0):b);c?W(this,b):xa(this,b,b)}),setSelection:hb(function(b,
a,c){xa(this,y(this,b),y(this,a||b),c)}),extendSelection:hb(function(b,a,c){W(this,y(this,b),a&&y(this,a),c)}),getSelection:function(b){return this.getRange(this.sel.from,this.sel.to,b)},replaceSelection:function(b,a,c){$a(this,{from:this.sel.from,to:this.sel.to,text:Ga(b),origin:c},a||"around")},undo:hb(function(){wd(this,"undo")}),redo:hb(function(){wd(this,"redo")}),setExtending:function(b){this.sel.extend=b},historySize:function(){var b=this.history;return{undo:b.done.length,redo:b.undone.length}},
clearHistory:function(){this.history=dc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){this.history.lastOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(b){return this.history.generation==(b||this.cleanGeneration)},getHistory:function(){return{done:ec(this.history.done),undone:ec(this.history.undone)}},setHistory:function(b){var a=this.history=dc(this.history.maxGeneration);a.done=b.done.slice(0);
a.undone=b.undone.slice(0)},markText:function(b,a,c){return zb(this,y(this,b),y(this,a),c,"range")},setBookmark:function(b,a){var c={replacedWith:a&&(null==a.nodeType?a.widget:a),insertLeft:a&&a.insertLeft};b=y(this,b);return zb(this,b,b,c,"bookmark")},findMarksAt:function(b){b=y(this,b);var a=[],c=C(this,b.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var g=c[d];if((null==g.from||g.from<=b.ch)&&(null==g.to||g.to>=b.ch))a.push(g.marker.parent||g.marker)}return a},getAllMarks:function(){var b=
[];this.iter(function(a){if(a=a.markedSpans)for(var c=0;c<a.length;++c)null!=a[c].from&&b.push(a[c].marker)});return b},posFromIndex:function(b){var a,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>b)return a=b,!0;b-=d;++c});return y(this,w(c,a))},indexFromPos:function(b){b=y(this,b);var a=b.ch;if(b.line<this.first||0>b.ch)return 0;this.iter(this.first,b.line,function(b){a+=b.text.length+1});return a},copy:function(b){var a=new Y(Sc(this,this.first,this.first+this.size),this.modeOption,
this.first);a.scrollTop=this.scrollTop;a.scrollLeft=this.scrollLeft;a.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};b&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory()));return a},linkedDoc:function(b){b||(b={});var a=this.first,c=this.first+this.size;null!=b.from&&b.from>a&&(a=b.from);null!=b.to&&b.to<c&&(c=b.to);a=new Y(Sc(this,a,c),b.mode||this.modeOption,a);b.sharedHist&&
(a.history=this.history);(this.linked||(this.linked=[])).push({doc:a,sharedHist:b.sharedHist});a.linked=[{doc:this,isParent:!0,sharedHist:b.sharedHist}];return a},unlinkDoc:function(b){b instanceof e&&(b=b.doc);if(this.linked)for(var a=0;a<this.linked.length;++a)if(this.linked[a].doc==b){this.linked.splice(a,1);b.unlinkDoc(this);break}if(b.history==this.history){var c=[b.id];bb(b,function(b){c.push(b.id)},!0);b.history=dc();b.history.done=ec(this.history.done,c);b.history.undone=ec(this.history.undone,
c)}},iterLinkedDocs:function(b){bb(this,b)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Y.prototype.eachLine=Y.prototype.iter;var Be=["iter","insert","remove","copy","getEditor"],Hb;for(Hb in Y.prototype)Y.prototype.hasOwnProperty(Hb)&&0>ua(Be,Hb)&&(e.prototype[Hb]=function(b){return function(){return b.apply(this.doc,arguments)}}(Y.prototype[Hb]));db(Y);e.e_stop=sb;e.e_preventDefault=Q;e.e_stopPropagation=Pd;var wa,Qb=0;e.on=E;e.off=ta;e.signal=T;var Sa=30,ld=e.Pass=
{toString:function(){return"CodeMirror.Pass"}};pc.prototype={set:function(b,a){clearTimeout(this.id);this.id=setTimeout(a,b)}};e.countColumn=Xa;var gc=[""],ve=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,xc=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;e.replaceGetRect=function(b){N=b};var je=
function(){if(ga)return!1;var b=B("div");return"draggable"in b||"dragDrop"in b}();ab?Cb=function(b,a){return 36==b.charCodeAt(a-1)&&39==b.charCodeAt(a)}:Bc&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Cb=function(a,c){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(c-1,c+1))}:S&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?Cb=function(a,c){var d=a.charCodeAt(c-1);return 8208<=d&&8212>=d}:S&&(Cb=function(a,c){if(1<c&&45==a.charCodeAt(c-1)){if(/\w/.test(a.charAt(c-
2))&&/[^\-?\.]/.test(a.charAt(c)))return!0;if(2<c&&/[\d\.,]/.test(a.charAt(c-2))&&/[\d\.,]/.test(a.charAt(c)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(c-1,c+1))});var qb,Tc,Ga=3!="\n\nb".split(/\n/).length?function(a){for(var c=0,d=[],g=a.length;c<=g;){var e=a.indexOf("\n",c);-1==e&&(e=a.length);var h=a.slice(c,"\r"==a.charAt(e-1)?e-1:e),k=h.indexOf("\r");-1!=k?(d.push(h.slice(0,k)),c+=k+1):(d.push(h),
c=e+1)}return d}:function(a){return a.split(/\r\n?|\n/)};e.splitLines=Ga;var ee=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(c){return!1}}:function(a){try{var c=a.ownerDocument.selection.createRange()}catch(d){}return!c||c.parentElement()!=a?!1:0!=c.compareEndPoints("StartToEnd",c)},ed=function(){var a=B("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Ia={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",
17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=Ia;(function(){for(var a=
0;10>a;a++)Ia[a+48]=String(a);for(a=65;90>=a;a++)Ia[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Ia[a+111]=Ia[a+63235]="F"+a})();var Ya,se=function(){function a(b){return 255>=b?c.charAt(b):1424<=b&&1524>=b?"R":1536<=b&&1791>=b?d.charAt(b-1536):1792<=b&&2220>=b?"r":"L"}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",
d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,h=/[LRr]/,k=/[Lb1n]/,m=/[1n]/;return function(c){if(!g.test(c))return!1;for(var d=c.length,f=[],l=0,n;l<d;++l)f.push(a(c.charCodeAt(l)));for(var l=0,p="L";l<d;++l)n=f[l],"m"==n?f[l]=p:
p=n;l=0;for(p="L";l<d;++l)n=f[l],"1"==n&&"r"==p?f[l]="n":h.test(n)&&(p=n,"r"==n&&(f[l]="R"));l=1;for(p=f[0];l<d-1;++l){n=f[l];if("+"==n&&"1"==p&&"1"==f[l+1])f[l]="1";else if(","==n&&p==f[l+1]&&("1"==p||"n"==p))f[l]=p;p=n}for(l=0;l<d;++l)if(n=f[l],","==n)f[l]="N";else if("%"==n){for(p=l+1;p<d&&"%"==f[p];++p);var r=l&&"!"==f[l-1]||p<d-1&&"1"==f[p]?"1":"N";for(n=l;n<p;++n)f[n]=r;l=p-1}l=0;for(p="L";l<d;++l)n=f[l],"L"==p&&"1"==n?f[l]="L":h.test(n)&&(p=n);for(l=0;l<d;++l)if(e.test(f[l])){for(p=l+1;p<d&&
e.test(f[p]);++p);n="L"==(p<d-1?f[p]:"L");r="L"==(l?f[l-1]:"L")||n?"L":"R";for(n=l;n<p;++n)f[n]=r;l=p-1}for(var p=[],q,l=0;l<d;)if(k.test(f[l])){n=l;for(++l;l<d&&k.test(f[l]);++l);p.push({from:n,to:l,level:0})}else{var u=l,r=p.length;for(++l;l<d&&"L"!=f[l];++l);for(n=u;n<l;)if(m.test(f[n])){u<n&&p.splice(r,0,{from:u,to:n,level:1});u=n;for(++n;n<l&&m.test(f[n]);++n);p.splice(r,0,{from:u,to:n,level:2});u=n}else++n;u<l&&p.splice(r,0,{from:u,to:l,level:1})}if(1==p[0].level&&(q=c.match(/^\s+/)))p[0].from=
q[0].length,p.unshift({from:0,to:q[0].length,level:0});if(1==aa(p).level&&(q=c.match(/\s+$/)))aa(p).to-=q[0].length,p.push({from:d-q[0].length,to:d,level:0});p[0].level!=aa(p).level&&p.push({from:d,to:d,level:p[0].level});return p}}();e.version="3.16.1";e.prototype.focus=function(){window.focus();Aa(this);ba(this);x(this);va(this);La(this)};return e}()},"1.0");
YUI.add("squarespace-uploader",function(e){e.namespace("Squarespace");var k={ERR_FILE_UPLOAD:"Upload failed, please retry",ERR_FILE_PROCESSING:"Error processing file, please retry.",INVALID_SIZE_TITLE:"File Size Limit Exceeded",INVALID_SIZE:"The file <strong>{name}</strong> is too large. The maximum allowed file size is <strong>{size}MB</strong>.",INVALID_TYPE_TITLE:"Only {typeDescription} Allowed",INVALID_TYPE:"The file <strong>{name}</strong> does not appear to be a supported {type} file.",HINT_FILE_UPLOAD:"Click here or drag and drop to add a file",
HINT_FILE_UPLOAD_CLICK_ONLY:"Click here to add a file"};"none"===e.Uploader.TYPE?console.error("non-functional uploader"):e.Squarespace.Uploader=e.Base.create("uploader",e.Uploader,[e.WidgetChild],{initializer:function(c){this.set("swfURL","/combo/yui/?3.10.1/uploader/assets/flashuploader.swf");this.set("buttonClassNames",{hover:"",active:"",focus:""});this.after(["dragenter","dragleave","drop"],this._ddHandler,this);this._files={};this.get("fileFilters")||this.addAttr("fileFilters",{value:null});
this.after("uploadprogress",this._onUploadFileProgress,this);this.after("uploadcomplete",this._onUploadFileComplete,this);this.on("uploaderror",this._onUploadFileFailure,this);this.on("fileListChange",this._fileListChange,this);this.after("fileFiltersChange",this._fileFiltersChange,this);e.Data.DEBUG&&(this.on("fileuploadstart",function(a){console.log("[UPLOAD] SEND:  "+this.get("uploadURL")+" (POST) : ",e.clone(a.target._files[a.file.get("id")].postData))},this),this.on("uploadcomplete",function(a){console.log("[UPLOAD] RECV:  "+
this.get("uploadURL")+" (POST) : ",e.clone(a.target._files[a.file.get("id")].postData))},this));c.fileFilters&&this.set("fileFilters",c.fileFilters)},destructor:function(){var c=this.get("dragAndDropArea");c&&c.removeClass("drop-active");this._jobOnceCompleteEvt&&this._jobOnceCompleteEvt.detach();this._jobOnceFailureEvt&&this._jobOnceFailureEvt.detach()},cleanupFile:function(c){if(c){var a=c.get("id");this.set("fileList",this.get("fileList").filter(function(c){return c.get("id")!==a}),{source:"cleanupFile"});
delete this._files[a]}},bindUI:function(){e.Squarespace.Uploader.superclass.bindUI.call(this);this.on("selectButtonLabelChange",function(c){this.get("selectFilesButton").one(".text").setContent(c.newVal)},this)},_onUploadFileProgress:function(c){var a=c.file&&c.file.get("id");if(a=(a=this._files[a])&&a.placeholder&&a.placeholder.progress)a.set("showBar",!0),a.set("showSpinner",!1),a.set("progress",c.percentLoaded)},_onUploadFileComplete:function(c){var a=c.file&&c.file.get("id"),a=this._files[a]||
{},k=a.placeholder&&a.placeholder.progress,g=c.data;if("string"===typeof g)try{g=e.JSON.parse(g)}catch(r){this._onUploadFileFailure(c)}if(g.error)this._onServerRejectFile(c,g);else if(k?(k.set("progress",100),k.set("showBar",!1)):console.warn("No progress plugin was found on the placeholder. (_onUploadFileComplete)"),this.get("fileComplete")&&this.get("fileComplete")(a,g),this.get("createJob")){if(g&&g.job&&(k&&k.set("showSpinner",!0),c=a.job=this.get("createJob")(a,g)))c.get("id")||c.set("id",a.id),
this._jobOnceCompleteEvt=c.once("complete",e.bind(this._onJobHandler,this,"Complete",a)),this._jobOnceFailureEvt=c.once("failure",e.bind(this._onJobHandler,this,"Failure",a)),Static.JOB_MANAGER.addJob(c)}else k&&a.placeholder.progress.setAttrs({showBar:!1,showSpinner:!1}),this.cleanupFile(c.file),this.fire("upload-complete",e.JSON.parse(c.data))},_onServerRejectFile:function(c,a){(new e.Squarespace.Alert).show("Upload error",a.error);this.fire("upload-failure");this.cleanupFile(c.file)},_onUploadFileFailure:function(c){var a=
this.fileDataFromFile(c.file);a.error={type:e.Squarespace.MediaProcessingErrors.UPLOAD,message:k.ERR_FILE_UPLOAD};c.fileData=a;this.cleanupFile(c.file);this.abort()},_onJobHandler:function(c,a,m){var g="job"+c,r=a.placeholder&&a.placeholder.progress;r&&r.set("showSpinner",!1);if(a.id&&!this._files[a.id])return console.log("file upload aborted");"failure"==c.toLowerCase()&&(a.error={type:e.Squarespace.MediaProcessingErrors.PROCESSING,message:k.ERR_FILE_PROCESSING});this.get(g)&&this.get(g)(a,m.target);
this.cleanupFile(a.file);this.fire(g,{job:m.target,fileData:a})},_ddHandler:function(c){var a=this.get("dragAndDropArea");a&&("dragenter"===c.type?a.addClass("drop-active"):a.removeClass("drop-active"))},uploadAll:function(){var c=this.get("fileList");c&&0===c.length||(this.get("isTransient")&&!this.get("transientItemId")?this.preflightTransient(this.get("isGlobal"),function(){e.each(this._files,function(a){var c=a.postData,g=this.get("transientItemId");c&&("undefined"!==typeof c.replaceItemId&&!c.replaceItemId)&&
(a.postData.replaceItemId=g)},this);this.uploadAll()},this):(c=this.get("preflight"))?c(e.bind(function(){e.each(this.get("fileList"),function(a,c){this._processFile(this.fileDataFromFile(a))},this);e.Squarespace.Uploader.superclass.uploadAll.call(this)},this)):e.Squarespace.Uploader.superclass.uploadAll.call(this))},abort:function(){this.set("fileList",[])},fileDataFromFile:function(c){if(c)return this._files[c.get("id")]},preflightTransient:function(c,a,k){e.Data.post({url:"/api/commondata/"+(c?
"SaveTransientGlobalItem":"SaveTransientItem"),data:this.transientItemId,success:e.bind(function(c){this.set("transientItemId",c.id);this.set("transientItemUrl",c.urlId);a.call(k||this,c)},this)})},validateFile:function(c){c=c.get?this.fileDataFromFile(c):c;var a=c.file,m=[];a.get("size")>1048576*this.get("maxSize")&&m.push({title:k.INVALID_SIZE_TITLE,message:e.substitute(k.INVALID_SIZE,{name:a.get("name"),size:this.get("maxSize")})});if(this._extensionCheck&&!this._extensionCheck.test(a.get("name"))){var g=
this.get("fileFilters").map(function(a){return a.description}),g=1<g.length?g.slice(0,-1).join(",")+" or "+g[g.length-1]:g[0],a={typeDescription:g,name:a.get("name"),type:g.toLowerCase().replace(/s\b/g,"")};m.push({title:e.substitute(k.INVALID_TYPE_TITLE,a),message:e.substitute(k.INVALID_TYPE,a)})}m.length&&(c.invalid=m);return!m.length},makeDefaultErrorBlock:function(c){var a=(c=c.file?c:this.fileDataFromFile(c))&&c.error;return!a?"":err=e.Node.create('<div class="failed"><div class="message">'+
a.message+'</div><div class="filename">'+c.file.get("name")+'</div><div class="button"><div class="button-title">Dismiss</div></div></div>')},_fileFiltersChange:function(c){var a=[];c.newVal&&(e.each(c.newVal,function(c){c=c.extensions.split(";").map(function(a){return"(?:"+a.slice(2)+"$)"});a=a.concat(c)},this),this._extensionCheck=RegExp(a.join("|"),"i"))},_setFileFilters:function(){if(this._fileInputField)if(0<this.get("fileFilters").length){for(var c=[],a=this.get("fileFilters"),e=0;e<a.length;e++)c+=
a[e].acceptTypes;this._fileInputField.set("accept",c)}else this._fileInputField.set("accept","")},_fileListChange:function(c){if("cleanupFile"!=c.source){var a={},k=!1;!this.get("multipleFiles")&&1<c.newVal.length&&(c.newVal=[c.newVal[0]]);var g=[];e.each(c.newVal,function(c,e){var r=c.get("id");if(this._files[r])g.push(c);else{var z=this._processFile({id:r,file:c,index:e});z.invalid?(console.log("invalid",c.get("name")),g.push(c)):(a[r]=z,k=!0,!a[r].placeholder&&this.get("addPlaceholder")&&(a[r].placeholder=
this.get("addPlaceholder")(a[r])),console.log("processing "+c.get("name")),delete this._files[r])}},this);if(g.length)for(var r=0;r<g.length;r++)c.newVal.remove(g[r]);this.get("removePlaceholder")&&e.each(this._files,function(a,c){this.queue&&this.queue.cancelUpload(a.file);a.job&&Static.JOB_MANAGER.removeJobById(a.job.id);this.get("removePlaceholder")(a)},this);this._files=a;k&&this.get("autoUpload")&&e.later(0,this,this.uploadAll)}},_processFile:function(c){this.validateFile(c);var a=this.get("processFile");
a&&a(c);c.postData=e.merge(c.postData||{},{fileName:c.file.get("name"),fileSize:c.file.get("size")});a=this.get("postVarsPerFile");a[c.id]=c.postData;this.set("postVarsPerFile",a);return c},_makeDefaultSelectFilesButton:function(){return e.Node.create('<button class="upload-indicator image" tabindex="0"><div class="icon">&nbsp;</div><div class="text">'+this.get("selectButtonLabel")+"</div></button>")}},{CSS_PREFIX:"sqs-uploader",ATTRS:{processFile:{},addPlaceholder:{},removePlaceholder:{},preflight:{},
createJob:{},fileComplete:{},jobComplete:{},jobFailure:{},autoUpload:{value:!1},isTransient:{value:!1},isGlobal:{value:!1},transientItemId:{value:""},transientItemUrl:{value:""},maxSize:{value:20},uploadURL:{valueFn:function(){return"/api/commondata/"+(this.get("isGlobal")?"SaveGlobalMedia":"SaveMedia")},setter:function(c){return e.Data.addCrumb(c)}},selectButtonLabel:{value:"flash"==e.Uploader.TYPE?k.HINT_FILE_UPLOAD_CLICK_ONLY_HINT:k.HINT_FILE_UPLOAD},selectFilesButton:{valueFn:"_makeDefaultSelectFilesButton",
setter:function(c){return!c?this._makeDefaultSelectFilesButton():c}}}})},"1.0",{requires:["base","node","widget-child","uploader"]});
YUI.add("thirdparty-codemirror3-modeless",function(e){CodeMirror.defineMode("less",function(e){function c(a,c){t=c;return a}function a(a,e){var k=a.next();if("@"==k)return a.eatWhile(/[\w\-]/),c("meta",a.current());if("/"==k&&a.eat("*"))return e.tokenize=g,g(a,e);if("<"==k&&a.eat("!"))return e.tokenize=r,r(a,e);if("="==k)c(null,"compare");else{if("|"==k&&a.eat("="))return c(null,"compare");if('"'==k||"'"==k)return e.tokenize=v(k),e.tokenize(a,e);if("/"==k){if(a.eat("/"))return e.tokenize=m,m(a,e);
if("string"==t||"("==t)return c("string","string");if(void 0!=e.stack[e.stack.length-1])return c(null,k);a.eatWhile(/[\a-zA-Z0-9\-_.\s]/);if(/\/|\)|#/.test(a.peek()||a.eatSpace()&&")"==a.peek())||a.eol())return c("string","string")}else{if("!"==k)return a.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(k))return a.eatWhile(/[\w.%]/),c("number","unit");if(/[,+<>*\/]/.test(k))return"="==a.peek()||"a"==t?c("string","string"):c(null,"select-op");if(/[;{}:\[\]()~\|]/.test(k)){if(":"==k)return a.eatWhile(/[a-z\\\-]/),
H.test(a.current())?c("tag","tag"):":"==a.peek()?(a.next(),a.eatWhile(/[a-z\\\-]/),a.current().match(/\:\:\-(o|ms|moz|webkit)\-/)?c("string","string"):H.test(a.current().substring(1))?c("tag","tag"):c(null,k)):c(null,k);if("~"==k){if("r"==t)return c("string","string")}else return c(null,k)}else{if("."==k){if("("==t||"string"==t)return c("string","string");a.eatWhile(/[\a-zA-Z0-9\-_]/);" "==a.peek()&&a.eatSpace();return")"==a.peek()?c("number","unit"):c("tag","tag")}if("#"==k){a.eatWhile(/[A-Za-z0-9]/);
if(4==a.current().length||7==a.current().length){if(null!=a.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1)){if(a.current().substring(1)!=a.current().match(/[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}/,!1))return c("atom","tag");a.eatSpace();return/[\/<>.(){!$%^&*_\-\\?=+\|#'~`]/.test(a.peek())?c("atom","tag"):"}"==a.peek()?c("number","unit"):/[a-zA-Z\\]/.test(a.peek())?c("atom","tag"):a.eol()?c("atom","tag"):c("number","unit")}a.eatWhile(/[\w\\\-]/);return c("atom","tag")}a.eatWhile(/[\w\\\-]/);return c("atom",
"tag")}if("&"==k)return a.eatWhile(/[\w\-]/),c(null,k);a.eatWhile(/[\w\\\-_%.{]/);if("string"==t)return c("string","string");if(null!=a.current().match(/(^http$|^https$)/))return a.eatWhile(/[\w\\\-_%.{:\/]/),c("string","string");if("<"==a.peek()||">"==a.peek())return c("tag","tag");if(/\(/.test(a.peek()))return c(null,k);if("/"==a.peek()&&void 0!=e.stack[e.stack.length-1])return c("string","string");if(a.current().match(/\-\d|\-.\d/))return c("number","unit");var G;a:{G=a.current().toLowerCase();
for(var D=0;D<z.length;D++)if(G===z[D]){G=!0;break a}G=void 0}if(G)return c("tag","tag");if(/\/|[\s\)]/.test(a.peek()||a.eol()||a.eatSpace()&&"/"==a.peek())&&-1!==a.current().indexOf(".")){if("{"==a.current().substring(a.current().length-1,a.current().length))return a.backUp(1),c("tag","tag");a.eatSpace();return/[{<>.a-zA-Z\/]/.test(a.peek())||a.eol()?c("tag","tag"):c("string","string")}if(a.eol()||"["==a.peek()||"#"==a.peek()||"tag"==t)return"{"==a.current().substring(a.current().length-1,a.current().length)&&
a.backUp(1),c("tag","tag");if("compare"==t||"a"==t||"("==t)return c("string","string");if("|"==t||"-"==a.current()||"["==t)return c(null,k);if(":"==a.peek()){a.next();if(k=":"==a.peek()?!0:!1)a.backUp(1);else{G=a.pos;D=a.current().length;a.eatWhile(/[a-z\\\-]/);var J=a.pos;if(null!=a.current().substring(D-1).match(H))return a.backUp(J-(G-1)),c("tag","tag");a.backUp(J-(G-1))}return k?c("tag","tag"):c("variable","variable")}return c("variable","variable")}}}}function m(g,e){g.skipToEnd();e.tokenize=
a;return c("comment","comment")}function g(g,e){for(var k=!1,m;null!=(m=g.next());){if(k&&"/"==m){e.tokenize=a;break}k="*"==m}return c("comment","comment")}function r(g,e){for(var k=0,m;null!=(m=g.next());){if(2<=k&&">"==m){e.tokenize=a;break}k="-"==m?k+1:0}return c("comment","comment")}function v(g){return function(e,k){for(var m=!1,r;null!=(r=e.next())&&(r!=g||m);)m=!m&&"\\"==r;m||(k.tokenize=a);return c("string","string")}}var D=e.indentUnit,t,z="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins keygen kbd label legend li link map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),
H=/(^\:root$|^\:nth\-child$|^\:nth\-last\-child$|^\:nth\-of\-type$|^\:nth\-last\-of\-type$|^\:first\-child$|^\:last\-child$|^\:first\-of\-type$|^\:last\-of\-type$|^\:only\-child$|^\:only\-of\-type$|^\:empty$|^\:link|^\:visited$|^\:active$|^\:hover$|^\:focus$|^\:target$|^\:lang$|^\:enabled^\:disabled$|^\:checked$|^\:first\-line$|^\:first\-letter$|^\:before$|^\:after$|^\:not$|^\:required$|^\:invalid$)/;return{startState:function(c){return{tokenize:a,baseIndent:c||0,stack:[]}},token:function(a,c){if(a.eatSpace())return null;
var g=c.tokenize(a,c),e=c.stack[c.stack.length-1];if("hash"==t&&"rule"==e)g="atom";else if("variable"==g)if("rule"==e)g=null;else if(!e||"@media{"==e)g="when"==a.current()?"variable":/[\s,|\s\)|\s]/.test(a.peek())?"tag":t;"rule"==e&&/^[\{\};]$/.test(t)&&c.stack.pop();"{"==t?"@media"==e?c.stack[c.stack.length-1]="@media{":c.stack.push("{"):"}"==t?c.stack.pop():"@media"==t?c.stack.push("@media"):"{"==e&&"comment"!=t&&c.stack.push("rule");return g},indent:function(a,c){var g=a.stack.length;/^\}/.test(c)&&
(g-="rule"==a.stack[a.stack.length-1]?2:1);return a.baseIndent+g*D},electricChars:"}"}});CodeMirror.defineMIME("text/x-less","less");CodeMirror.mimeModes.hasOwnProperty("text/css")||CodeMirror.defineMIME("text/css","less")},"1.0",{requires:["thirdparty-codemirror3"]});
YUI.add("squarespace-plugin-progress",function(e){e.namespace("Squarespace.Plugin");e.Squarespace.Plugin.Progress=e.Base.create("Progress",e.Plugin.Base,[],{initializer:function(){this._renderContent();this._bindAttributeChanges()},destructor:function(){var k=this._contentEl;k.setStyle("opacity",0);e.later(this.get("unplugDelay"),k,k.remove);k=this.get("host");k.removeClass(this.constructor.NS+"-show-bar");k.removeClass(this.constructor.NS+"-show-spinner");k.removeClass(this.constructor.NS+"-show-cancel")},
_renderContent:function(){var k=this._contentEl=e.Node.create('<div class="progress-container"><div class="progress"><div class="spinner"></div><div class="bar"><div class="bar-inner"></div></div><div class="cancel-process">Cancel</div></div></div>'),c=this._spinnerEl=k.one(".spinner");(new e.Squarespace.Spinner({render:c,size:this.get("spinnerSize"),color:this.get("spinnerColor")})).get("boundingBox");this._barEl=k.one(".bar");this._cancelEl=k.one(".cancel-process");this._setClasses();this._bindContent();
this._syncProgressBar(this.get("progress"));this.get("host").prepend(k)},_setClasses:function(){var e=this.get("showSpinner"),c=this.get("showBar"),a=this.get("showCancel"),m=this.get("host"),g=this.constructor.NS;m.toggleClass(g+"-show-spinner",e);m.toggleClass(g+"-show-bar",c);m.toggleClass(g+"-show-cancel",a);this._spinnerEl.toggleClass("visible",e);this._barEl.toggleClass("visible",c);this._cancelEl.toggleClass("visible",a)},_bindContent:function(){this._cancelEl.on("click",function(e){e.halt();
this.fire("cancel")},this)},_bindAttributeChanges:function(){this.after(["showSpinnerChange","showBarChange","showCancelChange"],this._setClasses,this);this.after("progressChange",function(e){this._syncProgressBar(e.newVal)},this)},_syncProgressBar:function(e){var c=this._barEl.one(".bar-inner");0<=e?(c.removeClass("indeterminate"),c.setStyle("width",Math.max(0,Math.min(100,0+e))+"%")):c.addClass("indeterminate")}},{NS:"progress",ATTRS:{progress:{value:0},showSpinner:{value:!1},showBar:{value:!1},
showCancel:{value:!1},spinnerSize:{value:30},spinnerColor:{value:"dark"},unplugDelay:{value:300}}})},"1.0",{requires:["base","plugin","node","squarespace-spinner"]});
YUI.add("file-flash",function(e,k){var c=function(a){c.superclass.constructor.apply(this,arguments)};e.extend(c,e.Base,{initializer:function(a){this.get("id")||this._set("id",e.guid("file"))},_swfEventHandler:function(a){if(a.id===this.get("id"))switch(a.type){case "uploadstart":this.fire("uploadstart",{uploader:this.get("uploader")});break;case "uploadprogress":this.fire("uploadprogress",{originEvent:a,bytesLoaded:a.bytesLoaded,bytesTotal:a.bytesTotal,percentLoaded:Math.min(100,Math.round(1E4*a.bytesLoaded/
a.bytesTotal)/100)});this._set("bytesUploaded",a.bytesLoaded);break;case "uploadcomplete":this.fire("uploadfinished",{originEvent:a});break;case "uploadcompletedata":this.fire("uploadcomplete",{originEvent:a,data:a.data});break;case "uploadcancel":this.fire("uploadcancel",{originEvent:a});break;case "uploaderror":this.fire("uploaderror",{originEvent:a,status:a.status,statusText:a.message,source:a.source})}},startUpload:function(a,c,g){if(this.get("uploader")){var e=this.get("uploader");g=g||"Filedata";
var k=this.get("id");c=c||null;this._set("bytesUploaded",0);e.on("uploadstart",this._swfEventHandler,this);e.on("uploadprogress",this._swfEventHandler,this);e.on("uploadcomplete",this._swfEventHandler,this);e.on("uploadcompletedata",this._swfEventHandler,this);e.on("uploaderror",this._swfEventHandler,this);e.callSWF("upload",[k,a,c,g])}},cancelUpload:function(){this.get("uploader")&&(this.get("uploader").callSWF("cancel",[this.get("id")]),this.fire("uploadcancel"))}},{NAME:"file",TYPE:"flash",ATTRS:{id:{writeOnce:"initOnly",
value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},uploader:{writeOnce:"initOnly",value:null}}});e.FileFlash=c},"3.10.1",{requires:["base"]});
YUI.add("uploader",function(e,k){var c=e.config.win;c&&c.File&&c.FormData&&c.XMLHttpRequest?e.Uploader=e.UploaderHTML5:e.SWFDetect.isFlashVersionAtLeast(10,0,45)?e.Uploader=e.UploaderFlash:(e.namespace("Uploader"),e.Uploader.TYPE="none")},"3.10.1",{requires:["uploader-html5","uploader-flash"]});
YUI.add("uploader-queue",function(e,k){var c=function(){this.queuedFiles=[];this.uploadRetries={};this.numberOfUploads=0;this.currentUploadedByteValues={};this.currentFiles={};this.totalBytes=this.totalBytesUploaded=0;c.superclass.constructor.apply(this,arguments)};e.extend(c,e.Base,{_currentState:c.STOPPED,initializer:function(){},_uploadStartHandler:function(a){a.file=a.target;a.originEvent=a;this.fire("uploadstart",a)},_uploadErrorHandler:function(a){var e=this.get("errorAction"),g;a.file=a.target;
a.originEvent=a;this.numberOfUploads-=1;delete this.currentFiles[a.target.get("id")];this._detachFileEvents(a.target);a.target.cancelUpload();e===c.STOP?this.pauseUpload():e===c.RESTART_ASAP?(e=a.target.get("id"),g=this.uploadRetries[e]||0,g<this.get("retryCount")&&(this.uploadRetries[e]=g+1,this.addToQueueTop(a.target)),this._startNextFile()):e===c.RESTART_AFTER&&(e=a.target.get("id"),g=this.uploadRetries[e]||0,g<this.get("retryCount")&&(this.uploadRetries[e]=g+1,this.addToQueueBottom(a.target)),
this._startNextFile());this.fire("uploaderror",a)},_startNextFile:function(){if(0<this.queuedFiles.length){var a=this.queuedFiles.shift(),c=a.get("id"),g=this.get("perFileParameters"),g=g.hasOwnProperty(c)?g[c]:g;this.currentUploadedByteValues[c]=0;a.on("uploadstart",this._uploadStartHandler,this);a.on("uploadprogress",this._uploadProgressHandler,this);a.on("uploadcomplete",this._uploadCompleteHandler,this);a.on("uploaderror",this._uploadErrorHandler,this);a.on("uploadcancel",this._uploadCancelHandler,
this);a.set("xhrHeaders",this.get("uploadHeaders"));a.set("xhrWithCredentials",this.get("withCredentials"));a.startUpload(this.get("uploadURL"),g,this.get("fileFieldName"));this._registerUpload(a)}},_registerUpload:function(a){this.numberOfUploads+=1;this.currentFiles[a.get("id")]=a},_unregisterUpload:function(a){0<this.numberOfUploads&&(this.numberOfUploads-=1);delete this.currentFiles[a.get("id")];delete this.uploadRetries[a.get("id")];this._detachFileEvents(a)},_detachFileEvents:function(a){a.detach("uploadstart",
this._uploadStartHandler);a.detach("uploadprogress",this._uploadProgressHandler);a.detach("uploadcomplete",this._uploadCompleteHandler);a.detach("uploaderror",this._uploadErrorHandler);a.detach("uploadcancel",this._uploadCancelHandler)},_uploadCompleteHandler:function(a){this._unregisterUpload(a.target);this.totalBytesUploaded+=a.target.get("size");delete this.currentUploadedByteValues[a.target.get("id")];0<this.queuedFiles.length&&this._currentState===c.UPLOADING&&this._startNextFile();var k=this.totalBytesUploaded,
g=Math.min(100,Math.round(1E4*k/this.totalBytes)/100);a.file=a.target;a.originEvent=a;e.each(this.currentUploadedByteValues,function(a){k+=a});this.fire("totaluploadprogress",{bytesLoaded:k,bytesTotal:this.totalBytes,percentLoaded:g});this.fire("uploadcomplete",a);0===this.queuedFiles.length&&0>=this.numberOfUploads&&(this.fire("alluploadscomplete"),this._currentState=c.STOPPED)},_uploadCancelHandler:function(a){a.originEvent=a;a.file=a.target;this.fire("uploadcacel",a)},_uploadProgressHandler:function(a){this.currentUploadedByteValues[a.target.get("id")]=
a.bytesLoaded;var c=this.totalBytesUploaded,g=Math.min(100,Math.round(1E4*c/this.totalBytes)/100);a.originEvent=a;a.file=a.target;this.fire("uploadprogress",a);e.each(this.currentUploadedByteValues,function(a){c+=a});this.fire("totaluploadprogress",{bytesLoaded:c,bytesTotal:this.totalBytes,percentLoaded:g})},startUpload:function(){this.queuedFiles=this.get("fileList").slice(0);this.numberOfUploads=0;this.currentUploadedByteValues={};this.currentFiles={};this.totalBytesUploaded=0;for(this._currentState=
c.UPLOADING;this.numberOfUploads<this.get("simUploads")&&0<this.queuedFiles.length;)this._startNextFile()},pauseUpload:function(){this._currentState=c.STOPPED},restartUpload:function(){for(this._currentState=c.UPLOADING;this.numberOfUploads<this.get("simUploads");)this._startNextFile()},forceReupload:function(a){var c=a.get("id");this.currentFiles.hasOwnProperty(c)&&(a.cancelUpload(),this._unregisterUpload(a),this.addToQueueTop(a),this._startNextFile())},addToQueueTop:function(a){this.queuedFiles.unshift(a)},
addToQueueBottom:function(a){this.queuedFiles.push(a)},cancelUpload:function(a){var e;if(a)if(a=a.get("id"),this.currentFiles[a])this.currentFiles[a].cancelUpload(),this._unregisterUpload(this.currentFiles[a]),this._currentState===c.UPLOADING&&this._startNextFile();else{e=0;for(len=this.queuedFiles.length;e<len;e++)if(this.queuedFiles[e].get("id")===a){this.queuedFiles.splice(e,1);break}}else{for(e in this.currentFiles)this.currentFiles[e].cancelUpload(),this._unregisterUpload(this.currentFiles[e]);
this.currentUploadedByteValues={};this.currentFiles={};this.totalBytesUploaded=0;this.fire("alluploadscancelled");this._currentState=c.STOPPED}}},{CONTINUE:"continue",STOP:"stop",RESTART_ASAP:"restartasap",RESTART_AFTER:"restartafter",STOPPED:"stopped",UPLOADING:"uploading",NAME:"uploaderqueue",ATTRS:{simUploads:{value:2,validator:function(a){return 1<=a&&5>=a}},errorAction:{value:"continue",validator:function(a){return a===c.CONTINUE||a===c.STOP||a===c.RESTART_ASAP||a===c.RESTART_AFTER}},bytesUploaded:{readOnly:!0,
value:0},bytesTotal:{readOnly:!0,value:0},fileList:{value:[],lazyAdd:!1,setter:function(a){e.Array.each(a,function(a){this.totalBytes+=a.get("size")},this);return a}},fileFieldName:{value:"Filedata"},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},perFileParameters:{value:{}},retryCount:{value:3}}});e.namespace("Uploader");e.Uploader.Queue=c},"3.10.1",{requires:["base"]});
YUI.add("squarespace-code-editor",function(e){e.namespace("Squarespace");e.Squarespace.CodeEditorManager=Class.extend(e.Squarespace.Gizmo,{_name:"CodeEditorManager",initialize:function(k){this.container=k.container;this.saved=this.syntaxOk=!0;this.currentError=null;this.initDone=!1;this.initialData=null;this._isSplashPage=k.isSplashPage;this._splashPageCustomCss=k.splashPageCustomCss;this._super(k);this._maxLength=128E3;e.one("html").addClass("code-editor-bbox");k=e.Node.create('<div class="code-editor"><div class="code-container"><div class="code-area"></div><div class="asset-upload-panel"><div class="asset-upload-canvas"></div></div></div><div class="code-editor-footer"><div class="code-editor-footer-inner"><div class="code-editor-status"><div class="code-editor-unsaved">unsaved</div><div class="code-editor-error">errors</div></div><div class="code-editor-buttons"><input class="upload-asset" type="button" value="Custom Files" /><input class="save" type="button" value="Save" disabled="disabled" /></div></div></div></div>');
this.container.append(k);var c=k.one(".code-area"),a=this._saveButton=k.one(".save");this._codeUnsavedEl=k.one(".code-editor-unsaved");this.createCodeMirrorInstance(c);this._isSplashPage?(this._resetSplashPageEditor(),this.preview(),this.initDone=!0):this._resetEditor();a.on("click",function(){this.save()},this);this.container.one(".upload-asset").on("click",function(){this.toggleUploadPanel()},this);c.on("preview",function(){this.preview()},this);this.uploader=new e.Squarespace.Uploader({dragAndDropArea:e.one(".asset-upload-canvas"),
process:!1,autoUpload:!0,fileFilters:[{description:"Fonts",extensions:"*.eot;*.ttf;*.otf;*.woff"},{description:"Images",extensions:"*.jpeg;*.jpg;*.png;*.gif"}],selectButtonLabel:"Click here or drag images or fonts here from your desktop to upload.",processFile:e.bind(function(a){a.postData={contentType:"css-asset",recordType:e.Squarespace.ContentConstants.CSSASSET}},this),addPlaceholder:e.bind(function(a){return this.renderPlaceholder(a.file).one(".item")},this),fileComplete:e.bind(function(a,c){this.renderItem(c.media[0],
a.placeholder.get("parentNode"))},this)});var m=this.uploader.render(this.container.one(".asset-upload-canvas"));m.after(["uploaderror","jobFailure"],function(a){a=a.fileData||m.fileDataFromFile(a.file);a.placeholder.setContent(m.makeDefaultErrorBlock(a))});window.onunload=e.bind(function(){this._isSplashPage?this.codeMirror.setValue(this._splashPageCustomCss.get("css")||""):this.codeMirror.setValue(this.initialData)},this);this.getCssAssets();this.container.one(".asset-upload-panel").hide();e.on("windowresize",
e.bind(function(){this.setEditorSize()},this));e.one("body").on("keyup",this._onKeyUp,this);this.codeMirror.focus();this.setEditorSize();this.container.one(".asset-upload-panel").on("dragover",function(){e.all(".item").setStyle("zIndex",0)});this.container.one(".asset-upload-panel").on("mouseenter",function(){setTimeout(function(){e.all(".item").setStyle("zIndex",999)},50)})},_onKeyUp:function(e){83===e.keyCode&&(e.ctrlKey||e.altKey)&&this.save()},getCssAssets:function(k){var c={websiteId:e.Object.getValue(Static,
["SQUARESPACE_CONTEXT","website","id"]),templateId:Static.SQUARESPACE_CONTEXT.templateId,recordType:e.Squarespace.ContentConstants.CSSASSET};e.Data.get({url:"/api/template/GetTemplateCSSAssets",data:e.merge(c,k),success:function(a){for(var c=0;c<a.assets.length;c++)this.renderItem(a.assets[c])}},this)},removeCssAsset:function(k,c){var a={websiteId:e.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]),templateId:Static.SQUARESPACE_CONTEXT.templateId};e.Data.post({url:"/api/template/RemoveTemplateCSSAsset",
data:e.merge(a,c),success:function(a){a=new e.Anim({node:k,duration:0.25,to:{height:0,opacity:0}});a.on("end",function(){k.remove()});a.run()}},this)},renderPlaceholder:function(k,c){var a=e.DB.DIV("pseudo-item",e.DB.DIV("item").plug(e.Squarespace.Plugin.Progress,{showBar:!1,showSpinner:!1,spinnerColor:"light"}));this.uploader.get("boundingBox").get("parentNode").append(a);this._subscribe(a,"click",function(a){if(a.target.ancestor(".failed .button",!0)){var c=a.target.ancestor(".failed",!0),k=a.target.ancestor(".pseudo-item",
!0);c.getData("errorType")==e.Squarespace.MediaProcessingErrors.UPLOAD&&k.transition({opacity:0,transform:"scale(0.94)",duration:0.4},e.bind(function(){k.remove();this.emptyStateCheck()},this))}},this);a.transition({opacity:1,transform:"scale(1)",duration:0.6});return a},renderItem:function(k,c){var a=e.DB.DIV("main-image",{"data-img-src":k.assetUrl});if(k.contentType.startsWith("image"))a.setStyle("background","url("+k.assetUrl+")");else{var m="font"+k.id,g="styleNode-"+m,r=e.Node.create("<style>@font-face {font-family: "+
m+";src: url("+k.assetUrl+");}</style>");r.set("id",g);r.appendTo(e.one("body"));a.addClass("font-swatch");a.setStyle("fontFamily","'"+m+"'");a.set("text","Sample Font 12345")}var v=e.DB.DIV("item",e.DB.DIV("item-inner",a,e.DB.DIV("asset-info",e.DB.A("main-image-link",{href:k.fullUrl},k.filename)),e.DB.DIV("asset-remove",e.DB.IMG("remove-x",{src:"/universal/images-v6/configuration/x-20x20-dark.png"}))));v.setAttribute("id","item-"+k.id);v.on("click",e.bind(function(a){this.pasteAssetUrlForItem(v);
a.preventDefault();a.stopPropagation()},this));v.one(".asset-remove").on("click",e.bind(function(a){a.currentTarget.hide();this.removeCssAsset(v,{itemId:k.id});a.stopPropagation()},this));c&&c.remove();this.uploader.get("boundingBox").get("parentNode").append(v);this.setEditorSize();return v},createCodeMirrorInstance:function(k){CodeMirror.assetHint=function(a){var c=a.getCursor();a=a.getTokenAt(c);return{list:["asdf","xyz","fcsk"],from:{line:c.line,ch:a.start},to:{line:c.line,ch:a.end}}};var c=k.getDOMNode();
c.value=c.value||"";this.codeMirror=CodeMirror.fromTextArea(k.getDOMNode(),{mode:"less",lineNumbers:!0,theme:"squarespace-css",indentUnit:2,tabMode:"indent",matchBrackets:!0,onChange:function(){k.fire("preview")},onKeyEvent:e.bind(function(a,c){var g=a.getCursor(),e=a.getTokenAt(g);0<g.ch&&g.ch--;g=a.getTokenAt(g);"("==e.string&&"url"==g.string&&this.showAssetCodeCompletions()},this)});this.codeMirror.on("change",function(){k.fire("preview")});this.setEditorSize()},pasteAssetUrlForItem:function(e){e=
e.one(".main-image").getAttribute("data-img-src");this.codeMirror.replaceRange(e,this.codeMirror.getCursor())},showAssetCodeCompletions:function(){function k(){H||(H=!0,v.parentNode.removeChild(v))}function c(){m.replaceRange(r[D.selectedIndex].url,m.getCursor());k();setTimeout(function(){m.focus()},50)}function a(a){var e=a.keyCode;if(13==e)a.preventDefault(),c();else if(27==e||38!=e&&40!=e)a.preventDefault(),k(),m.focus(),g._completionCooldown=!0,setTimeout(function(){g._completionCooldown=!1},
750)}var m=this.codeMirror,g=this;if(!this._completionCooldown){var r=[];e.all(".item").each(function(a){r.push({assetId:a.get("id"),displayName:a.one(".main-image-link").get("text"),url:a.one(".main-image").getAttribute("data-img-src")})});if(0!==r.length){var v=document.createElement("div");v.className="CodeMirror-completions";for(var D=v.appendChild(document.createElement("select")),t=0;t<r.length;++t){var z=D.appendChild(document.createElement("option"));z.appendChild(document.createTextNode(r[t].displayName));
z.setAttribute("data-css-asset-id",r[t].assetId)}D.firstChild.selected=!0;D.size=Math.min(10,r.length);t=this.codeMirror.cursorCoords();v.style.position="absolute";v.style.left=t.left+"px";v.style.top=t.bottom+"px";document.body.appendChild(v);var H=!1,t=new e.Node(D);t.on("dblclick",c);t.on("blur",k);t.on("keydown",a);D.focus()}}},setUploadCanvasSize:function(){var e=0;this.container.all(".item").each(function(a){e+=a.get("offsetHeight")});var e=e+135,c=Math.max(e,this.getAvailableHeightForEditor());
this.container.one(".asset-upload-canvas").setStyles({height:c+"px"})},setEditorSize:function(k){var c=this.codeMirror.getScrollerElement();e.Node(c).setStyles({height:this.getAvailableHeightForEditor()+"px",width:k?k:this.getAvailableWidthForEditor()+"px"});this.container.one(".asset-upload-panel").setStyles({height:this.getAvailableHeightForEditor()});this.codeMirror.refresh();this.setUploadCanvasSize()},getAvailableHeightForEditor:function(){var e=this.container.one(".code-editor-footer");return e.get("winHeight")-
parseInt(e.get("offsetHeight"),10)},getAvailableWidthForEditor:function(){var e=this.container.one(".asset-upload-panel");return e.get("winWidth")-parseInt(e.get("offsetWidth"),10)},_resetSplashPageEditor:function(){this._codeUnsavedEl.setStyle("visibility","hidden");this._disableSaveButton();var e=this._splashPageCustomCss.get("css")||"";this.initialData=e;this.codeMirror.setValue(e);this.saved=!0},_resetEditor:function(){this._codeUnsavedEl.setStyle("visibility","hidden");window.onbeforeunload=
null;this._disableSaveButton();this.saved=!0;this.initDone=!1;e.Data.get({url:"/api/template/GetTemplateCustomCss",data:{},success:function(e){e&&e.css?this.codeMirror.setValue(e.css):this.codeMirror.setValue("");this.initialData=this.codeMirror.getValue();this.initDone=!0}},this)},_getSanitizedCss:function(e){var c=this.codeMirror.getValue(),a={css:"",error:!1};try{(new less.Parser).parse(c||"",function(c,m){c&&(a.error=c);a.css=m.toCSS({compress:e})})}catch(m){a.error=m}return a},getTargetWindow:function(){if(null!==
window.opener&&!window.opener.closed)return"undefined"!=typeof window.opener.frames["preview-frame"]?window.opener.frames["preview-frame"]:window.opener;console.log("No parent :(");return null},preview:function(){this.saved&&this.initDone&&(this._codeUnsavedEl.setStyle("visibility","visible"),window.onbeforeunload=function(){return"You have unsaved changes."},this.saved=!1,this._enableSaveButton());var k=this._getSanitizedCss(!0),c=k.error;if(!1===c){var a=this.getTargetWindow();if(a){var m=e.one(a.document).one("body");
m.all("style").each(function(a){a.hasClass("SquarespaceInjectedCustomCss")&&a.remove()});e.UA.ie?a.insertCSS(k.css):m.append('<style type="text/css" class="SquarespaceInjectedCustomCss">'+k.css+"</style>")}}this.setStatus(c)},_shorterThanMaxLength:function(e){return e.replace(/\n/g,"").length<=this._maxLength},_saveSplashPageCustomCss:function(k){var c=this._splashPageCustomCss;c.set("css",k);c.save(e.bind(function(a){a?(this.saved=!1,this._codeUnsavedEl.setStyle("visibility","visible"),window.onbeforeunload=
function(){return"You have unsaved changes."},this.setStatus({message:"Failed to save. Please try again."}),this._enableSaveButton()):(this.saved=!0,this.initialData=k,this._disableSaveButton(),(new e.Squarespace.Information({position:"top-right"})).show("CSS Saved","Your CSS changes have been saved."))},this))},_saveTemplateCustomCss:function(k){e.Data.post({url:"/api/template/SetTemplateCustomCss",data:{css:k},success:function(c){this.saved=!0;this.initialData=k;this._disableSaveButton()},failure:function(){this.saved=
!1;this._codeUnsavedEl.setStyle("visibility","visible");window.onbeforeunload=function(){return"You have unsaved changes."};this.setStatus({message:"Failed to save. Please try again."});this._enableSaveButton()}},this)},save:function(){var e=this.codeMirror.getValue();this._shorterThanMaxLength(e)?!1===this._getSanitizedCss(!1).error&&(this._codeUnsavedEl.setStyle("visibility","hidden"),window.onbeforeunload=null,this._isSplashPage?this._saveSplashPageCustomCss(e):this._saveTemplateCustomCss(e)):
this.setStatus({message:"You have entered too much CSS, please reduce the amount before proceeding."})},toggleUploadPanel:function(){var k=this.container.one(".asset-upload-panel");if(k.hasClass("asset-upload-panel-open")){var c=new e.Anim({node:k,from:{right:0},to:{right:-1*k.get("offsetWidth")},duration:0.25,easing:"easeIn"});c.on("end",e.bind(function(){k.hide()},this));this.setEditorSize(k.get("winWidth"));c.run();k.removeClass("asset-upload-panel-open")}else k.addClass("asset-upload-panel-open"),
k.show(),k.setStyles({right:-1*k.get("offsetWidth")+"px"}),c=new e.Anim({node:k,from:{right:-1*k.get("offsetWidth")},to:{right:0},duration:0.25,easing:"easeOut"}),c.on("end",e.bind(function(){this.setEditorSize()},this)),c.run()},_enableSaveButton:function(){this._saveButton.removeAttribute("disabled")},_disableSaveButton:function(){this._saveButton.set("disabled","disabled")},setStatus:function(e){var c=this.currentError;c&&(c=c.lineHandler)&&this.codeMirror.clearGutter(c);this.currentError=e;c=
this.container.one(".code-editor-error");!1===e?(this.container.removeClass("error"),c.setContent(""),this._enableSaveButton()):(this.container.addClass("error"),this._disableSaveButton(),e.line&&(e.lineHandler=this.codeMirror.setGutterMarker(--e.line,"%N%","error")),c.setContent(e.message))}})},"1.0",{requires:"event json cookie node transition squarespace-gizmo squarespace-common squarespace-util squarespace-ui-base squarespace-dombuilder squarespace-uploader squarespace-plugin-progress thirdparty-less thirdparty-codemirror3 thirdparty-codemirror3-modeless thirdparty-codemirror3-modecss thirdparty-codemirror3-modeless".split(" ")});
YUI.add("file-html5",function(e,k){var c=e.bind,a=e.config.win,m=function(a){var c=null,c=m.isValidFile(a)?a:m.isValidFile(a.file)?a.file:!1;m.superclass.constructor.apply(this,arguments);if(c&&m.canUpload()){this.get("file")||this._set("file",c);this.get("name")||this._set("name",c.name||c.fileName);if(this.get("size")!=(c.size||c.fileSize))this._set("size",c.size||c.fileSize);this.get("type")||this._set("type",c.type);c.hasOwnProperty("lastModifiedDate")&&!this.get("dateModified")&&this._set("dateModified",
c.lastModifiedDate)}};e.extend(m,e.Base,{initializer:function(a){this.get("id")||this._set("id",e.guid("file"))},_uploadEventHandler:function(a){var c=this.get("xhr");switch(a.type){case "progress":this.fire("uploadprogress",{originEvent:a,bytesLoaded:a.loaded,bytesTotal:this.get("size"),percentLoaded:Math.min(100,Math.round(1E4*a.loaded/this.get("size"))/100)});this._set("bytesUploaded",a.loaded);break;case "load":if(200<=c.status&&299>=c.status){this.fire("uploadcomplete",{originEvent:a,data:a.target.responseText});
a=c.upload;var e=this.get("boundEventHandler");a.removeEventListener("progress",e);a.removeEventListener("error",e);a.removeEventListener("abort",e);c.removeEventListener("load",e);c.removeEventListener("error",e);c.removeEventListener("readystatechange",e);this._set("xhr",null)}else this.fire("uploaderror",{originEvent:a,status:c.status,statusText:c.statusText,source:"http"});break;case "error":this.fire("uploaderror",{originEvent:a,status:c.status,statusText:c.statusText,source:"io"});break;case "abort":this.fire("uploadcancel",
{originEvent:a});break;case "readystatechange":this.fire("readystatechange",{readyState:a.target.readyState,originEvent:a})}},startUpload:function(a,k,m){this._set("bytesUploaded",0);this._set("xhr",new XMLHttpRequest);this._set("boundEventHandler",c(this._uploadEventHandler,this));var D=new FormData;m=m||"Filedata";var t=this.get("xhr"),z=this.get("xhr").upload,H=this.get("boundEventHandler");e.each(k,function(a,c){D.append(c,a)});D.append(m,this.get("file"));t.addEventListener("loadstart",H,!1);
z.addEventListener("progress",H,!1);t.addEventListener("load",H,!1);t.addEventListener("error",H,!1);z.addEventListener("error",H,!1);z.addEventListener("abort",H,!1);t.addEventListener("abort",H,!1);t.addEventListener("loadend",H,!1);t.addEventListener("readystatechange",H,!1);t.open("POST",a,!0);t.withCredentials=this.get("xhrWithCredentials");e.each(this.get("xhrHeaders"),function(a,c){t.setRequestHeader(c,a)});t.send(D);this.fire("uploadstart",{xhr:t})},cancelUpload:function(){this.get("xhr").abort()}},
{NAME:"file",TYPE:"html5",ATTRS:{id:{writeOnce:"initOnly",value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},file:{writeOnce:"initOnly",value:null},xhr:{readOnly:!0,value:null},xhrHeaders:{value:{}},xhrWithCredentials:{value:!0},boundEventHandler:{readOnly:!0,value:null}},isValidFile:function(c){return a&&
a.File&&c instanceof File},canUpload:function(){return a&&a.FormData&&a.XMLHttpRequest}});e.FileHTML5=m},"3.10.1",{requires:["base"]});
YUI.add("uploader-html5",function(e,k){function c(){c.superclass.constructor.apply(this,arguments)}var a=e.Lang.sub,m=e.Uploader.Queue;e.UploaderHTML5=e.extend(c,e.Widget,{_fileInputField:null,_buttonBinding:null,queue:null,initializer:function(){this._buttonBinding=this.queue=this._fileInputField=null;this._fileList=[];this.publish("fileselect");this.publish("uploadstart");this.publish("fileuploadstart");this.publish("uploadprogress");this.publish("totaluploadprogress");this.publish("uploadcomplete");
this.publish("alluploadscomplete");this.publish("uploaderror");this.publish("dragenter");this.publish("dragover");this.publish("dragleave");this.publish("drop")},renderUI:function(){var a=this.get("contentBox"),k=this.get("selectFilesButton");k.setStyles({width:"100%",height:"100%"});a.append(k);this._fileInputField=e.Node.create(c.HTML5FILEFIELD_TEMPLATE);a.append(this._fileInputField)},bindUI:function(){this._bindSelectButton();this._setMultipleFiles();this._setFileFilters();this._bindDropArea();
this._triggerEnabled();this.after("multipleFilesChange",this._setMultipleFiles,this);this.after("fileFiltersChange",this._setFileFilters,this);this.after("enabledChange",this._triggerEnabled,this);this.after("selectFilesButtonChange",this._bindSelectButton,this);this.after("dragAndDropAreaChange",this._bindDropArea,this);this.after("tabIndexChange",function(){this.get("selectFilesButton").set("tabIndex",this.get("tabIndex"))},this);this._fileInputField.on("change",this._updateFileList,this);this.get("selectFilesButton").set("tabIndex",
this.get("tabIndex"))},_rebindFileField:function(){this._fileInputField.remove(!0);this._fileInputField=e.Node.create(c.HTML5FILEFIELD_TEMPLATE);this.get("contentBox").append(this._fileInputField);this._fileInputField.on("change",this._updateFileList,this);this._setMultipleFiles();this._setFileFilters()},_bindDropArea:function(a){a=a||{prevVal:null};var c=this.get("dragAndDropArea");null!==a.prevVal&&(a.prevVal.detach("drop",this._ddEventHandler),a.prevVal.detach("dragenter",this._ddEventHandler),
a.prevVal.detach("dragover",this._ddEventHandler),a.prevVal.detach("dragleave",this._ddEventHandler));null!==c&&(c.on("drop",this._ddEventHandler,this),c.on("dragenter",this._ddEventHandler,this),c.on("dragover",this._ddEventHandler,this),c.on("dragleave",this._ddEventHandler,this))},_bindSelectButton:function(){this._buttonBinding=this.get("selectFilesButton").on("click",this.openFileSelectDialog,this)},_ddEventHandler:function(a){a.stopPropagation();a.preventDefault();if(-1<e.Array.indexOf(a._event.dataTransfer.types,
"Files"))switch(a.type){case "dragenter":this.fire("dragenter");break;case "dragover":this.fire("dragover");break;case "dragleave":this.fire("dragleave");break;case "drop":a=a._event.dataTransfer.files;var c=[],k=this.get("fileFilterFunction");k?e.each(a,function(a){a=new e.FileHTML5(a);k(a)&&c.push(a)}):e.each(a,function(a){c.push(new e.FileHTML5(a))});0<c.length&&(a=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?a.concat(c):c),this.fire("fileselect",{fileList:c}));this.fire("drop",
{fileList:c})}},_setButtonClass:function(a,c){c?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[a]):this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[a])},_setMultipleFiles:function(){!0===this.get("multipleFiles")?this._fileInputField.set("multiple","multiple"):this._fileInputField.set("multiple","")},_setFileFilters:function(){0<this.get("fileFilters").length?this._fileInputField.set("accept",this.get("fileFilters").join(",")):this._fileInputField.set("accept",
"")},_triggerEnabled:function(){this.get("enabled")&&null===this._buttonBinding?(this._bindSelectButton(),this._setButtonClass("disabled",!1),this.get("selectFilesButton").setAttribute("aria-disabled","false")):!this.get("enabled")&&this._buttonBinding&&(this._buttonBinding.detach(),this._buttonBinding=null,this._setButtonClass("disabled",!0),this.get("selectFilesButton").setAttribute("aria-disabled","true"))},_getFileList:function(){return this._fileList.concat()},_setFileList:function(a){this._fileList=
a.concat();return this._fileList.concat()},_updateFileList:function(a){a=a.target.getDOMNode().files;var c=[],k=this.get("fileFilterFunction");k?e.each(a,function(a){a=new e.FileHTML5(a);k(a)&&c.push(a)}):e.each(a,function(a){c.push(new e.FileHTML5(a))});0<c.length&&(a=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?a.concat(c):c),this.fire("fileselect",{fileList:c}));this._rebindFileField()},_uploadEventHandler:function(a){switch(a.type){case "file:uploadstart":this.fire("fileuploadstart",
a);break;case "file:uploadprogress":this.fire("uploadprogress",a);break;case "uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",a);break;case "file:uploadcomplete":this.fire("uploadcomplete",a);break;case "uploaderqueue:alluploadscomplete":this.queue=null;this.fire("alluploadscomplete",a);break;case "file:uploaderror":case "uploaderqueue:uploaderror":this.fire("uploaderror",a);break;case "file:uploadcancel":case "uploaderqueue:uploadcancel":this.fire("uploadcancel",a)}},openFileSelectDialog:function(){var a=
this._fileInputField.getDOMNode();a.click&&a.click()},upload:function(a,c,k){c=c||this.get("uploadURL");k=k||this.get("postVarsPerFile");var m=a.get("id");k=k.hasOwnProperty(m)?k[m]:k;a instanceof e.FileHTML5&&(a.on("uploadstart",this._uploadEventHandler,this),a.on("uploadprogress",this._uploadEventHandler,this),a.on("uploadcomplete",this._uploadEventHandler,this),a.on("uploaderror",this._uploadEventHandler,this),a.on("uploadcancel",this._uploadEventHandler,this),a.startUpload(c,k,this.get("fileFieldName")))},
uploadAll:function(a,c){this.uploadThese(this.get("fileList"),a,c)},uploadThese:function(a,c,k){this.queue?this.queue._currentState===m.UPLOADING&&(this.queue.set("perFileParameters",this.get("postVarsPerFile")),e.each(a,function(a){this.queue.addToQueueBottom(a)},this)):(c=c||this.get("uploadURL"),k=k||this.get("postVarsPerFile"),this.queue=new m({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),fileList:a,uploadURL:c,perFileParameters:k,
retryCount:this.get("retryCount"),uploadHeaders:this.get("uploadHeaders"),withCredentials:this.get("withCredentials")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("uploadcancel",this._uploadEventHandler,this),this.queue.on("uploaderror",
this._uploadEventHandler,this),this.queue.startUpload(),this.fire("uploadstart"))}},{HTML5FILEFIELD_TEMPLATE:"<input type='file' style='visibility:hidden; width:0px; height: 0px;'>",SELECT_FILES_BUTTON:'<button type="button" class="yui3-button" role="button" aria-label="{selectButtonLabel}" tabindex="{tabIndex}">{selectButtonLabel}</button>',TYPE:"html5",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",
focus:"yui3-button-selected"}},dragAndDropArea:{value:null,setter:function(a){return e.one(a)}},enabled:{value:!0},errorAction:{value:"continue",validator:function(a){return a===m.CONTINUE||a===m.STOP||a===m.RESTART_ASAP||a===m.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return e.Node.create(a(e.UploaderHTML5.SELECT_FILES_BUTTON,
{selectButtonLabel:this.get("selectButtonLabel"),tabIndex:this.get("tabIndex")}))}},simLimit:{value:2,validator:function(a){return 1<=a&&5>=a}},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},retryCount:{value:3}}});e.UploaderHTML5.Queue=m},"3.10.1",{requires:["widget","node-event-simulate","file-html5","uploader-queue"]});
YUI.add("swf",function(e,k){function c(c,k,R){var J=this._id=e.guid("yuiswf");c=r.one(c);R=R||{};var K=((R.version||z)+"").split("."),K=a.isFlashVersionAtLeast(parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)),X=a.isFlashVersionAtLeast(8,0,0)&&!K&&R.useExpressInstall,x=X?H:k;k="<object ";var d="yId="+e.id+"&YUISwfId="+J+"&YUIBridgeCallback="+n+"&allowedDomain="+document.location.hostname;e.SWF._instances[J]=this;if(c&&(K||X)&&x){k+='id="'+J+'" ';k=g.ie?k+('classid="'+D+'" '):k+('type="'+t+'" data="'+
v.html(x)+'" ');k+='width="100%" height="100%">';g.ie&&(k+='<param name="movie" value="'+v.html(x)+'"/>');for(var q in R.fixedAttributes)p.hasOwnProperty(q)&&(k+='<param name="'+v.html(q)+'" value="'+v.html(R.fixedAttributes[q])+'"/>');for(var U in R.flashVars)q=R.flashVars[U],m.isString(q)&&(d+="&"+v.html(U)+"="+v.html(encodeURIComponent(q)));d&&(k+='<param name="flashVars" value="'+d+'"/>');c.set("innerHTML",k+"</object>");this._swf=r.one("#"+J)}else this.publish("wrongflashversion",{fireOnce:!0}),
this.fire("wrongflashversion",{type:"wrongflashversion"})}var a=e.SWFDetect,m=e.Lang,g=e.UA,r=e.Node,v=e.Escape,D="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",t="application/x-shockwave-flash",z="10.0.22",H="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+Math.random(),n="SWF.eventHandler",p={align:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",loop:"",menu:"",name:"",play:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};
c._instances=c._instances||{};c.eventHandler=function(a,e){c._instances[a]._eventHandler(e)};c.prototype={_eventHandler:function(a){"swfReady"===a.type?(this.publish("swfReady",{fireOnce:!0}),this.fire("swfReady",a)):"log"!==a.type&&this.fire(a.type,a)},callSWF:function(a,c){c||(c=[]);return this._swf._node[a]?this._swf._node[a].apply(this._swf._node,c):null},toString:function(){return"SWF "+this._id}};e.augment(c,e.EventTarget);e.SWF=c},"3.10.1",{requires:["event-custom","node","swfdetect","escape"]});
SQUARESPACE_ROLLUPS.push("squarespace-code-editor");
