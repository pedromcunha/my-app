YUI.add("squarespace-dialog-html",function(a){a.namespace("Squarespace.DialogFields");var b=a.Squarespace.DialogFields.HTML=a.Base.create("html",a.Squarespace.DialogField2,[],{bindUI:function(){b.superclass.bindUI.call(this);this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){b.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-html",ATTRS:{content:{value:""},focusable:{value:!1}}})},
"1.0",{requires:["base","squarespace-dialog-field-2"]});
YUI.add("squarespace-autocomplete-types",function(a){a.namespace("Squarespace.Constants").AutocompleteTypes={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};a.Squarespace.AutocompleteTypeATTR={value:null,writeOnce:"initOnly",validator:function(b){if(a.Lang.isNull(b)||a.Object.hasValue(a.Squarespace.Constants.AutocompleteTypes,
b))return!0;console.warn(this.name+": That constant is not an available autocomplete type.");return!1}}},"1.0");YUI.add("squarespace-responsive-modal",function(a){},"1.0",{requires:["base"]});
YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var b=function(a){return function(b){b.halt();a.call(this,b)}};a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{bindUI:function(){a.Squarespace.DialogFields.Check.superclass.bindUI.call(this);this.get("boundingBox").on("tap",b(this._toggleActive),this)},syncUI:function(){a.Squarespace.DialogFields.Check.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.renderTemplate());
a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:!1}}})},"1.0",{requires:["base","base-build","squarespace-dialog-field-2","squarespace-dialog-check-template"]});
YUI.add("squarespace-dialog-multi-option",function(a){var b=a.namespace("Squarespace.DialogFields").MultiOption=a.Base.create("multiOption",a.Squarespace.DialogField2,[],{initializer:function(c){this.get("data");!this.get("data")&&!a.Lang.isUndefined(c.defaultValue)&&this.set("data",c.defaultValue);this._selectedOptionEl=null},renderUI:function(){b.superclass.renderUI.call(this);this._calculateMargins();this._renderTitle();this._renderOptions()},bindUI:function(){this.get("contentBox").delegate("click",
this._onOptionClick,".option",this);this.after("optionsChange",this._renderOptions,this);this.after("stringsChange",this._renderTitle,this)},syncUI:function(){b.superclass.syncUI.call(this);this._setupOptionWidths()},getBBInnerWidth:function(){var a=this.get("boundingBox");return a.get("offsetWidth")-(parseInt(a.getComputedStyle("paddingLeft"),10)+parseInt(a.getComputedStyle("paddingRight"),10))},selectOption:function(a){this.get("contentBox").all(".option").each(function(b){this._optionMatchesData(b,
a)&&this._selectOption(b)},this)},addOption:function(a){a=this.get("options");a.push(optionOjb);this.set("options",a)},didDataChange:function(){return!1},_renderTitle:function(){var c=this.get("strings.title"),b=this.get("contentBox"),e=b.one(".title");c&&a.Lang.isNull(e)?b.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):c?e.setHTML(this.get("strings.title")):!c&&!a.Lang.isNull(e)&&e.remove()},_renderOptions:function(){var c=this.get("contentBox"),b=this.get("options"),
e=this._getOptionWidth();c.all(".option").remove();a.Array.each(b,function(b){if(b.section)c.append(a.Node.create('<div class="option-label">'+b.section+"</div>"));else{var d=a.Node.create(a.Lang.sub('<div class="option" data-value="{value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',b));d.setData(b);d.setStyles({width:e});var k=b.description;k&&d.one(".option-content").append(a.Node.create('<div class="option-description">'+k+"</div>"));b.icon?d.addClass("icon-"+
b.icon):d.addClass("no-icon");c.append(d);this._optionMatchesData(d)&&this._markSelected(d);b.upgradeLocked&&(d.addClass("upgrade-locked"),new a.Squarespace.ToolTip({target:".option.upgrade-locked",title:"Upgrade to Connect",body:"You must be on the Business Plan to use this feature.",dialogTooltip:!0,showTimeout:350}),d.on("click",function(){(new a.Squarespace.ConfirmationDialog({cancelText:"Not Now",confirmText:"Go to Upgrade"})).show("Do you want to upgrade?","Upgrading to the Business Plan will enable this feature.",
b.upgradeConfirmCb)}))}},this)},_selectOptions:function(){this.get("contentBox").all(".option").each(function(a){this._optionMatchesData(a)&&this._selectOption(a)},this)},_optionMatchesData:function(c,b){a.Lang.isUndefined(b)&&(b=this.get("data"));var e=c.getData("value");if(this.get("numeric"))return b===a.Number.parse(e);a.Lang.isObject(e)&&a.Lang.isObject(b)&&console.warn("Trying to compare to objects, which is a bit out of scope.");return b===e},_onOptionClick:function(c){c.halt();c=c.target.hasClass("option")?
c.target:c.target.ancestor(".option");var b=this.get("optionClickCb");c.hasClass("upgrade-locked")||this._selectOption(c);a.Lang.isFunction(b)&&b(this.get("data"))},_markSelected:function(a){a!=this._selectedOptionEl&&(this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected"),a.addClass("selected"),this._selectedOptionEl=a)},_selectOption:function(c){if(c!=this._selectedOptionEl){this._markSelected(c);c=c.getData("value");if(this.get("numeric")){var b=a.Number.parse(c);a.Lang.isNumber(b)&&
(c=b)}this.set("data",c)}},_getOptionWidth:function(){var c=this.get("optionWidth");if(a.Lang.isValue(c))return c;c=this.get("options");c=parseInt(this.get("columns"),10)||c.length;return this.getBBInnerWidth()/c-this.get("marginOffset")},_calculateMargins:function(){var c=a.Node.create('<div class="option" style="visibility:hidden;"></div>');this.get("contentBox").append(c);var b=parseInt(c.getStyle("marginLeft"),10),e=parseInt(c.getStyle("marginRight"),10);this.set("marginOffset",b+e);c.remove()},
_setupOptionWidths:function(){var a=this.get("columns")||this.get("options").length;0<parseInt(a,10)&&this.get("boundingBox").addClass("columns-"+a);this.get("contentBox").all(".option").setStyle("width",this._getOptionWidth())}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(c){return this.get("numeric")?a.Number.parse(c):c}},options:{value:null},optionClickCb:{value:null,setter:function(c){return!a.Lang.isFunction(c)?null:c}},optionWidth:{value:null},columns:{value:null},marginOffset:{value:0,
validator:a.Lang.isNumber},numeric:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-hidden",function(a){var b=function(){};a.namespace("Squarespace.DialogFields").Hidden=a.Base.create("hidden",a.Squarespace.DialogField2,[],{initializer:function(){this.unplug(a.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:b,bindUI:b,syncUI:b},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:!1},focusable:{value:!1}}});a.Squarespace.DialogFields.HiddenField=a.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","base-build","squarespace-dialog-field-2"]});
YUI.add("squarespace-trial-login-dialog",function(a){var b=a.namespace("Squarespace.Widgets").TrialLoginDialog=a.Base.create("trialLoginDialog",a.Squarespace.Widgets.ModalDialog,[],{initializer:function(){this._expectedAnswer=this._generateCaptcha();this._captcha=new a.Squarespace.DialogFields.HTML({content:this._expectedAnswer,className:"captcha"});this._description=new a.Squarespace.DialogFields.HTML({content:this.get("strings.description"),className:"description"});this._captchaEntry=new a.Squarespace.DialogFields.Text({name:"captcha",
submitOnEnter:!0,"strings.placeholder":"Type the word above...",className:"captcha-entry-field"});this.add(this._description);this.add(this._captcha);this.add(this._captchaEntry)},bindUI:function(){b.superclass.bindUI.call(this);var a=this.get("contentBox");a.delegate("click",this._fadeAndDestroy,".cancel",this);a.delegate("click",this._authenticate,".submit",this);this._captchaEntry.on("submit",this._authenticate,this)},_authenticate:function(){var c=this._captchaEntry.get("data");if(!a.Lang.isValue(c)||
""===c)this._captchaEntry.showError("Required field");else{var c=c.trim().toLowerCase(),b=this._expectedAnswer.toLowerCase();c!==b?this._captchaEntry.showError("That's not the right word."):this._submitAuthRequest()}},_submitAuthRequest:function(){a.Data.post({url:"/api/auth/AuthenticateAsVisitor",success:function(a){a=Math.floor(99999999*Math.random()+1);document.location.href=0<window.location.search.length?document.location.href+"&r="+a:document.location.href+"/?r="+a}},this)},_generateCaptcha:function(){for(var a=
"",b=0;5>b;b++)a+="ABCDEFGHJKLMNOPQRSTUVWXYZ".charAt(Math.floor(25*Math.random()));return a}},{CSS_PREFIX:"sqs-trial-login-dialog",ATTRS:{strings:{value:{title:"Visitor Access",description:"This website is in trial mode and has not yet launched. To log into this trial website, type this word in the box below."}},buttons:{value:['<a href="#" class="cancel">Cancel</a>','<span class="submit button-light">View Website</span>']}}})},"1.0",{requires:["base","squarespace-modal-dialog","squarespace-dialog-text",
"squarespace-dialog-html","squarespace-dialog-button"]});
YUI.add("squarespace-dialog-text-template",function(a){var b=a.Handlebars;(function(){var a=b.template;(b.templates=b.templates||{})["dialog-text.html"]=a(function(a,b,c,f,k){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);k=k||{};a="";var n,u=this.escapeExpression;if((f=c["if"].call(b,(n=b.strings,null==n||!1===n?n:n.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;return c=""+('\n  <div class="title">'+u((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===
typeof d?d.apply(a):d))+"</div>\n")},k),data:k}))||0===f)a+=f;a+='\n\n<input type="text" ';if((f=c["if"].call(b,b.maxLength,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var d,e;d='maxlength="';(e=c.maxLength)?e=e.call(a,{hash:{},data:b}):(e=a.maxLength,e="function"===typeof e?e.apply(a):e);return d+=u(e)+'"'},k),data:k}))||0===f)a+=f;a+="\n       ";if((f=c["if"].call(b,b.readOnly,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'readonly="readonly"'},k),data:k}))||0===
f)a+=f;a+="\n       ";if((f=c["if"].call(b,b.selectAllOnFocus,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){return'onClick="this.select()"'},k),data:k}))||0===f)a+=f;a+="/>\n\n";if((f=c["if"].call(b,(n=b.strings,null==n||!1===n?n:n.description),{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var c,d,e;c='\n\n\t<div class="description">\n    ';if((e=(d=(d=a.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(a):d))||0===e)c+=e;return c+"\n  </div>\n\n"},k),
data:k}))||0===f)a+=f;return a+"\n"})})();a.Handlebars.registerPartial("dialog-text.html".replace("/","."),b.templates["dialog-text.html"])},"1.0",{requires:["handlebars-base"]});YUI.add("datatype-number-parse",function(a,b){var c=a.Lang;a.mix(a.namespace("Number"),{parse:function(a){a=null===a||""===a?a:+a;return c.isNumber(a)?a:null}});a.namespace("Parsers").number=a.Number.parse;a.namespace("DataType");a.DataType.Number=a.Number},"3.10.1");
YUI.add("squarespace-dialog-button",function(a){var b=a.namespace("Squarespace.DialogFields").Button=a.namespace("Squarespace.Widgets").Button=a.Base.create("button",a.Squarespace.DialogField2,[],{initializer:function(a){this.get("contentBox").addClass(this.get("alignment"));this.publish("click")},bindUI:function(){b.superclass.bindUI.call(this);this.get("contentBox").delegate("click",this._handleClick,"a",this);this.on("stringsChange",this._updateStringElements,this);this.after("waitingChange",function(a){this._toggleWaitingSpinner(a.newVal)},
this)},renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("boundingBox"),d=this._anchorNode=this.get("contentBox").one("a"),e=this.get("name");d.set("value",this.get("data"));d.set("name",e);c.setAttribute("title",this.get("strings.text"));this._renderButtonText();this._renderSpinner();this._toggleActive(this.get("active")&&a.Lang.isValue(e))},syncUI:function(){b.superclass.syncUI.call(this);this._toggleWaitingSpinner(this.get("waiting"))},setText:function(a){this.set("strings.text",
a)},getText:function(){return this.get("strings.text")},setOnClick:function(b,d){a.Lang.isFunction(b)&&this.set("onClick",b);a.Lang.isValue(d)&&this.set("context",d)},disable:function(){this.toggleDisabled(!0)},enable:function(){this.toggleDisabled(!1)},showWaiting:function(){this._toggleWaitingSpinner(!0);this.set("waiting",!0)},hideWaiting:function(){this._toggleWaitingSpinner(!1);this.set("waiting",!1)},toggleDisabled:function(a){this.set("disabled",a);this.get("contentBox").toggleClass("disabled",
a)},_toggleActive:function(a){this.set("active",a);this.get("contentBox").toggleClass("active",a)},_toggleWaitingSpinner:function(a){a?this._waiting.show():this._waiting.hide()},_handleClick:function(b){var d=this._anchorNode;this.get("disabled")?b.halt():(b=this.get("href"))?this.get("newWindow")?window.open(b):window.location=b:a.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context")):d.fire("click",this.get("active"))},_animateTextChange:function(b){var d=new a.Anim({node:this._anchorNode,
from:{opacity:0},to:{opacity:1},duration:0.2,easing:"easeOut"});b=new a.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:0.2,easing:"easeIn"});d.on("end",a.bind(function(){this._toggleActive(!0)},this));b.on("end",a.bind(function(){this._renderButtonText();a.Lang.isNull(this._anchorNode)||d.run()},this));this._toggleActive(!1);this._registerAnim(d);this._registerAnim(b);b.run()},_updateStringElements:function(a){"strings.text"===a.subAttrName&&this._animateTextChange(a.newVal.text)},
_renderButtonText:function(){var b=this.get("strings.text");a.Lang.isString(b)&&0<b.length&&this._anchorNode.setHTML(b)},_renderSpinner:function(){this._waiting=a.Node.create('<div class="waiting"></div>');this.get("contentBox").append(this._waiting);this._waiting.hide()}},{CSS_PREFIX:"sqs-button",TEMPLATE:"<a></a>",ATTRS:{active:{},alignment:{value:"",validator:a.Lang.isString},className:{value:"normal-button"},context:{value:this},data:{},disabled:{setter:function(a){return!!a}},href:{validator:a.Lang.isString},
icon:{},name:{},onClick:{validator:a.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:!1},newWindow:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:"base node anim squarespace-dialog-field-2 squarespace-dialog squarespace-util".split(" ")});
YUI.add("squarespace-dialog-label",function(a){a.namespace("Squarespace.Plugin").DialogFieldLabel=a.Base.create("dialogFieldLabel",a.Plugin.Base,[],{initializer:function(a){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){a.detach(this.get("id")+"|*");var b=this.get("host"),c=b.get("boundingBox");b.get("rendered")&&(c&&c._node)&&b.get("boundingBox").removeClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},
_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},renderLabel:function(){this._labelNode=a.Node.create("<label></label>");this._labelNode.addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var b=this._labelNode;this.get("inField");var c=this.get("renderNode");this.get("strings.text");var d=this.get("className"),e=this.get("forNode"),g=this.get("host").get("contentBox");
d&&b.addClass(d);c?(a.Lang.isString(c)&&(c=g.one(c)),c.appendChild(b)):e?(a.Lang.isString(e)&&(e=g.one(e)),(c=e.getAttribute("id"))&&b.setAttribute("for",c),e.insert(b,"before")):(g.one("input")||g.one("select")||g.one("textarea")||g.one("button")).insert(b,"before")},bindLabel:function(){var a=this.get("id");this.on(a+"|classNameChange",function(a){this._labelNode.removeClass(a.prevVal);this._labelNode.addClass(a.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},
{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});a.namespace("Squarespace.DialogFields").DialogFieldLabel=function(b){this.plug(a.Squarespace.Plugin.DialogFieldLabel,a.merge({renderNode:b.labelRenderNode||null,forNode:b.labelForNode||null,className:b.labelClassName||null,"strings.text":this.get("strings.label")},b.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))};a.Squarespace.DialogFields.DialogFieldLabel.NAME=
"dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-description",function(a){var b=a.namespace("Squarespace.DialogFields").Description=a.Base.create("descriptionField",a.Squarespace.DialogField2,[],{renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-description");a.Lang.isArray(c)&&0<c.length&&this._descEl.setStyles({paddingTop:c[0],paddingBottom:c[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){b.superclass.bindUI.call(this);
this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){b.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},_attachNode:function(b){var d=this.get(b);a.Lang.isString(d)&&0<d.length&&(attrNode=a.Node.create('<div class="'+b+'">'+d+"</div>"),this._descEl.append(attrNode))},_getAsString:function(b){return!a.Lang.isValue(b)?"":b+""},setTitle:function(a){this.set("title",a)},setText:function(a){this.set("text",a)}},{CSS_PREFIX:"sqs-description",
TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:a.Lang.isString},padding:{value:[],validator:a.Lang.isArray},focusable:{value:!1}}})},"1.0.0",{requires:["node","base","squarespace-dialog-field-2"]});
YUI.add("squarespace-trial-alert-dialog",function(a){var b=a.namespace("Squarespace.Widgets").TrialAlertDialog=a.Base.create("trialAlertDialog",a.Squarespace.Widgets.ModalDialog,[],{initializer:function(){this.add(new a.Squarespace.DialogFields.HTML({content:this.get("strings.description"),className:"description"}))},bindUI:function(){b.superclass.bindUI.call(this);this.get("contentBox").delegate("click",this._showCaptchaLogin,".captcha-login",this)},_showCaptchaLogin:function(){this._spawnChild(new a.Squarespace.Widgets.TrialLoginDialog({render:!0,
visible:!1,zIndex:this.get("zIndex")+1}))}},{CSS_PREFIX:"sqs-trial-alert-dialog",ATTRS:{strings:{value:{title:"Squarespace Trial",description:"<strong>Squarespace trial accounts are not visible to the public.</strong> When you are ready to publish your website, upgrading your trial will make your site active to the world."}},buttons:{value:['<a href="/config" class="button">Owner Login</a>','<span class="button captcha-login">Visitor Access</span>']}}})},"1.0",{requires:["base","squarespace-modal-dialog",
"squarespace-trial-login-dialog","squarespace-dialog-html"]});var hexcase=0,b64pad="=",chrsz=8;function hex_sha1(a){return binb2hex(core_sha1(str2binb(a),a.length*chrsz))}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),a.length*chrsz))}function str_sha1(a){return binb2str(core_sha1(str2binb(a),a.length*chrsz))}function hex_hmac_sha1(a,b){return binb2hex(core_hmac_sha1(a,b))}function b64_hmac_sha1(a,b){return binb2b64(core_hmac_sha1(a,b))}
function str_hmac_sha1(a,b){return binb2str(core_hmac_sha1(a,b))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}
function core_sha1(a,b){a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;for(var c=Array(80),d=1732584193,e=-271733879,g=-1732584194,f=271733878,k=-1009589776,n=0;n<a.length;n+=16){for(var u=d,H=e,m=g,B=f,t=k,p=0;80>p;p++){c[p]=16>p?a[n+p]:rol(c[p-3]^c[p-8]^c[p-14]^c[p-16],1);var r=safe_add(safe_add(rol(d,5),sha1_ft(p,e,g,f)),safe_add(safe_add(k,c[p]),sha1_kt(p))),k=f,f=g,g=rol(e,30),e=d,d=r}d=safe_add(d,u);e=safe_add(e,H);g=safe_add(g,m);f=safe_add(f,B);k=safe_add(k,t)}return[d,e,g,f,k]}
function sha1_ft(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function sha1_kt(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function core_hmac_sha1(a,b){var c=str2binb(a);16<c.length&&(c=core_sha1(c,a.length*chrsz));for(var d=Array(16),e=Array(16),g=0;16>g;g++)d[g]=c[g]^909522486,e[g]=c[g]^1549556828;c=core_sha1(d.concat(str2binb(b)),512+b.length*chrsz);return core_sha1(e.concat(c),672)}
function safe_add(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function rol(a,b){return a<<b|a>>>32-b}function str2binb(a){for(var b=[],c=(1<<chrsz)-1,d=0;d<a.length*chrsz;d+=chrsz)b[d>>5]|=(a.charCodeAt(d/chrsz)&c)<<24-d%32;return b}function binb2str(a){for(var b="",c=(1<<chrsz)-1,d=0;d<32*a.length;d+=chrsz)b+=String.fromCharCode(a[d>>5]>>>24-d%32&c);return b}
function binb2hex(a){for(var b=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c}function binb2b64(a){for(var b="",c=0;c<4*a.length;c+=3)for(var d=(a[c>>2]>>8*(3-c%4)&255)<<16|(a[c+1>>2]>>8*(3-(c+1)%4)&255)<<8|a[c+2>>2]>>8*(3-(c+2)%4)&255,e=0;4>e;e++)b=8*c+6*e>32*a.length?b+b64pad:b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6*(3-e)&63);return b}
YUI.add("thirdparty-sha1",function(a){},"2.97.0");
YUI.add("squarespace-external-authentication",function(a){a.namespace("Squarespace");a.Squarespace.ExternalAuthentication=a.Base.create("externalAuthentication",a.Base,[],{initializer:function(){this.publish("completed")},openPopupWindow:function(a,c,d){a="/auth/ExternalAuthenticationInitiate?"+this._buildQueryParams(a,c,d);this._oauthWindow=window.open(a,"ConnectWithOAuth","location=0,status=0,scrollbars=1,width=1020,height=520");this._checkClosedOnInterval()},_buildQueryParams:function(b,c,d){var e=
"serviceProvider="+b;a.Lang.isValue(c)&&a.Lang.isValue(d)&&(e+="&"+c+"="+d);this.get("useLoginFlag")&&(e+="&loginFlag=true");c=this.get("authenticationType");a.Lang.isValue(c)&&(e+="&type="+c);(c=this._getInviteCode())&&(e+="&"+c);b===a.Squarespace.ExternalServiceProviders.FACEBOOK&&(e+="&redirArgs="+encodeURIComponent("scope"+a.Squarespace.FacebookExtendedPermissions));return e},_getInviteCode:function(){var b=document.location.search;"?"===b[0]&&(b=b.slice(1));return a.Array.find(b.split("&"),function(a){return 0===
a.indexOf("invitation=")},this)},_checkClosedOnInterval:function(){this._oauthWindow.closed||window.callbackFinished?(window.callbackFinished=!1,this.fire("completed")):a.later(200,this,this._checkClosedOnInterval)}},{ATTRS:{useLoginFlag:{value:!1},authenticationType:{value:null}}})},"1.0",{requires:["base","squarespace-enum","squarespace-util"]});
(function(a,b,c,d,e,g){function f(a,b){var c=typeof a[b];return"function"==c||!!("object"==c&&a[b])||"unknown"==c}function k(){if(!p(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!p(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(E=a.match(/\d+/g))}if(!E){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
E=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(c){}}if(!E)return!1;a=parseInt(E[0],10);b=parseInt(E[1],10);R=9<a&&0<b;return!0}function n(){if(!F){F=!0;for(var a=0;a<L.length;a++)L[a]();L.length=0}}function u(a,b){F?a.call(b):L.push(function(){a.call(b)})}function H(){var a=parent;if(""!==I)for(var b=0,c=I.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function m(a){var b=a.toLowerCase().match(M);a=b[2];var c=b[3],b=b[4]||"";if("http:"==a&&":80"==
b||"https:"==a&&":443"==b)b="";return a+"//"+c+b}function B(a){a=a.replace($,"$1/");if(!a.match(/^(http||https):\/\//)){var b="/"===a.substring(0,1)?"":c.pathname;"/"!==b.substring(b.length-1)&&(b=b.substring(0,b.lastIndexOf("/")+1));a=c.protocol+"//"+c.host+b+a}for(;U.test(a);)a=a.replace(U,"");return a}function t(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e+"="+g(b[e]));return a+(V?"#":-1==a.indexOf("?")?"?":"&")+
d.join("&")+c}function p(a){return"undefined"===typeof a}function r(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"===typeof d?r(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function D(a){if(p(N)){var c=b.body.appendChild(b.createElement("form")),d=c.appendChild(b.createElement("input"));d.name=y+"TEST"+W;N=d!==c.elements[d.name];b.body.removeChild(c)}N?c=b.createElement('<iframe name="'+a.props.name+'"/>'):(c=b.createElement("IFRAME"),c.name=a.props.name);c.id=c.name=a.props.name;
delete a.props.name;"string"==typeof a.container&&(a.container=b.getElementById(a.container));a.container||(r(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=b.body);d=a.props.src;a.props.src="javascript:false";r(c,a.props);c.border=c.frameBorder=0;c.allowTransparency=!0;a.container.appendChild(c);a.onLoad&&z(c,"load",a.onLoad);if(a.usePost){var e=a.container.appendChild(b.createElement("form")),m;e.target=c.name;e.action=d;e.method="POST";if("object"===typeof a.usePost)for(var s in a.usePost)a.usePost.hasOwnProperty(s)&&
(N?m=b.createElement('<input name="'+s+'"/>'):(m=b.createElement("INPUT"),m.name=s),m.value=a.usePost[s],e.appendChild(m));e.submit();e.parentNode.removeChild(e)}else c.src=d;a.props.src=d;return c}function X(l){var d=l.protocol,e;l.isHost=l.isHost||p(x.xdm_p);V=l.hash||!1;l.props||(l.props={});if(l.isHost)l.remote=B(l.remote),l.channel=l.channel||"default"+W++,l.secret=Math.random().toString(16).substring(2),p(d)&&(d=m(c.href)==m(l.remote)?"4":f(a,"postMessage")||f(b,"postMessage")?"1":l.swf&&f(a,
"ActiveXObject")&&k()?"6":"Gecko"===navigator.product&&"frameElement"in a&&-1==navigator.userAgent.indexOf("WebKit")?"5":l.remoteHelper?"2":"0");else{l.channel=x.xdm_c.replace(/["'<>\\]/g,"");l.secret=x.xdm_s;l.remote=x.xdm_e.replace(/["'<>\\]/g,"");var d=x.xdm_p,w;if(w=l.acl){a:{w=l.acl;var g=l.remote;"string"==typeof w&&(w=[w]);for(var s,q=w.length;q--;)if(s=w[q],s=RegExp("^"==s.substr(0,1)?s:"^"+s.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),s.test(g)){w=!0;break a}w=!1}w=!w}if(w)throw Error("Access denied for "+
l.remote);}l.protocol=d;switch(d){case "0":r(l,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(l.isHost){if(!l.local){d=c.protocol+"//"+c.host;e=b.body.getElementsByTagName("img");for(g=e.length;g--;)if(w=e[g],w.src.substring(0,d.length)===d){l.local=w.src;break}l.local||(l.local=a)}d={xdm_c:l.channel,xdm_p:0};l.local===a?(l.usePolling=!0,l.useParent=!0,l.local=c.protocol+"//"+c.host+c.pathname+c.search,d.xdm_e=l.local,d.xdm_pa=1):d.xdm_e=B(l.local);l.container&&(l.useResize=
!1,d.xdm_po=1);l.remote=t(l.remote,d)}else r(l,{channel:x.xdm_c,remote:x.xdm_e,useParent:!p(x.xdm_pa),usePolling:!p(x.xdm_po),useResize:l.useParent?!1:l.useResize});e=[new h.stack.HashTransport(l),new h.stack.ReliableBehavior({}),new h.stack.QueueBehavior({encode:!0,maxLength:4E3-l.remote.length}),new h.stack.VerifyBehavior({initiate:l.isHost})];break;case "1":e=[new h.stack.PostMessageTransport(l)];break;case "2":l.remoteHelper=B(l.remoteHelper);e=[new h.stack.NameTransport(l),new h.stack.QueueBehavior,
new h.stack.VerifyBehavior({initiate:l.isHost})];break;case "3":e=[new h.stack.NixTransport(l)];break;case "4":e=[new h.stack.SameOriginTransport(l)];break;case "5":e=[new h.stack.FrameElementTransport(l)];break;case "6":E||k(),e=[new h.stack.FlashTransport(l)]}e.push(new h.stack.QueueBehavior({lazy:l.lazy,remove:!0}));return e}function Y(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},
destroy:function(){this.down.destroy()}},d=0,e=a.length;d<e;d++)b=a[d],r(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function aa(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var O=this,W=Math.floor(1E4*Math.random()),S=Function.prototype,M=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,U=/[\-\w]+\/\.\.\//,$=/([^:])\/\//g,I="",h={},ba=a.easyXDM,y="easyXDM_",N,V=!1,E,R,z,G;if(f(a,"addEventListener"))z=function(a,b,c){a.addEventListener(b,c,!1)},G=function(a,b,c){a.removeEventListener(b,
c,!1)};else if(f(a,"attachEvent"))z=function(a,b,c){a.attachEvent("on"+b,c)},G=function(a,b,c){a.detachEvent("on"+b,c)};else throw Error("Browser not supported");var F=!1,L=[],P;"readyState"in b?(P=b.readyState,F="complete"==P||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==P||"interactive"==P)):F=!!b.body;if(!F){if(f(a,"addEventListener"))z(b,"DOMContentLoaded",n);else if(z(b,"readystatechange",function(){"complete"==b.readyState&&n()}),b.documentElement.doScroll&&a===top){var Z=function(){if(!F){try{b.documentElement.doScroll("left")}catch(a){d(Z,
1);return}n()}};Z()}z(a,"load",n)}var x=function(a){a=a.substring(1).split("&");for(var b={},c,d=a.length;d--;)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(c.search)?c.search:c.hash),T=function(){var a={},b={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(b).replace(/\s/g,""))return JSON;Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&
(b='{"a":[1,2,3]}'.evalJSON(),b.a&&(3===b.a.length&&3===b.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(T=function(){return a},a):null};r(h,{version:"2.4.16.3",query:x,stack:{},apply:r,getJSONObject:T,whenReady:u,noConflict:function(b){a.easyXDM=ba;(I=b)&&(y="easyXDM_"+I.replace(".","_")+"_");return h}});h.DomHelper={on:z,un:G,requiresJSON:function(c){"object"==typeof a.JSON&&a.JSON||b.write('<script type="text/javascript" src="'+c+'">\x3c/script>')}};(function(){var a=
{};h.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];c&&delete a[b];return d}}})();h.Socket=function(a){var b=Y(X(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=m(a.remote);this.origin=m(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};h.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"===typeof d&&(b.local[c]={method:d})}var e=
Y(X(a).concat([new h.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=m(a.remote);this.destroy=function(){e.destroy()};e.init()};h.stack.SameOriginTransport=function(a){var b,e,g,f;return b={outgoing:function(a,b,c){g(a);c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){f=m(a.remote);a.isHost?(r(a.props,{src:t(a.remote,{xdm_e:c.protocol+"//"+c.host+c.pathname,xdm_c:a.channel,xdm_p:4}),name:y+a.channel+"_provider"}),
e=D(a),h.Fn.set(a.channel,function(a){g=a;d(function(){b.up.callback(!0)},0);return function(a){b.up.incoming(a,f)}})):(g=H().Fn.get(a.channel,!0)(function(a){b.up.incoming(a,f)}),d(function(){b.up.callback(!0)},0))},init:function(){u(b.onDOMReady,b)}}};h.stack.FlashTransport=function(a){function e(a,b){d(function(){f.up.incoming(a,s)},0)}function g(c){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1E4*Math.random());h.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){h.stack.FlashTransport[c].swf=
q=A.firstChild;for(var a=h.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0});a.swfContainer?A="string"==typeof a.swfContainer?b.getElementById(a.swfContainer):a.swfContainer:(A=b.createElement("div"),r(A.style,R&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),b.body.appendChild(A));var m="callback=flash_loaded"+c.replace(/[\-.]/g,"_")+"&proto="+O.location.protocol+"&domain="+
O.location.href.match(M)[3]+"&port="+(O.location.href.match(M)[4]||"")+"&ns="+I;A.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+d+"'></param><param name='flashvars' value='"+m+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+m+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed></object>"}
var f,J,s,q,A;return f={outgoing:function(b,c,d){q.postMessage(a.channel,b.toString());d&&d()},destroy:function(){try{q.destroyChannel(a.channel)}catch(b){}q=null;J&&(J.parentNode.removeChild(J),J=null)},onDOMReady:function(){s=a.remote;h.Fn.set("flash_"+a.channel+"_init",function(){d(function(){f.up.callback(!0)})});h.Fn.set("flash_"+a.channel+"_onMessage",e);a.swf=B(a.swf);var b=a.swf.match(M)[3],A=function(){h.stack.FlashTransport[b].init=!0;q=h.stack.FlashTransport[b].swf;q.createChannel(a.channel,
a.secret,m(a.remote),a.isHost);a.isHost&&(R&&a.swfNoThrottle&&r(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),r(a.props,{src:t(a.remote,{xdm_e:m(c.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:y+a.channel+"_provider"}),J=D(a))};h.stack.FlashTransport[b]&&h.stack.FlashTransport[b].init?A():h.stack.FlashTransport[b]?h.stack.FlashTransport[b].queue.push(A):(h.stack.FlashTransport[b]={queue:[A]},g(b))},init:function(){u(f.onDOMReady,f)}}};h.stack.PostMessageTransport=function(b){function e(a){var d;
if(a.origin)d=m(a.origin);else if(a.uri)d=m(a.uri);else if(a.domain)d=c.protocol+"//"+a.domain;else throw"Unable to retrieve the origin of the event";d==s&&a.data.substring(0,b.channel.length+1)==b.channel+" "&&g.up.incoming(a.data.substring(b.channel.length+1),d)}var g,f,h,s;return g={outgoing:function(a,c,d){h.postMessage(b.channel+" "+a,c||s);d&&d()},destroy:function(){G(a,"message",e);f&&(h=null,f.parentNode.removeChild(f),f=null)},onDOMReady:function(){s=m(b.remote);if(b.isHost){var q=function(c){c.data==
b.channel+"-ready"&&(h="postMessage"in f.contentWindow?f.contentWindow:f.contentWindow.document,G(a,"message",q),z(a,"message",e),d(function(){g.up.callback(!0)},0))};z(a,"message",q);r(b.props,{src:t(b.remote,{xdm_e:m(c.href),xdm_c:b.channel,xdm_p:1}),name:y+b.channel+"_provider"});f=D(b)}else z(a,"message",e),h="postMessage"in a.parent?a.parent:a.parent.document,h.postMessage(b.channel+"-ready",s),d(function(){g.up.callback(!0)},0)},init:function(){u(g.onDOMReady,g)}}};h.stack.FrameElementTransport=
function(e){var g,f,h,k;return g={outgoing:function(a,b,c){h.call(this,a);c&&c()},destroy:function(){f&&(f.parentNode.removeChild(f),f=null)},onDOMReady:function(){k=m(e.remote);e.isHost?(r(e.props,{src:t(e.remote,{xdm_e:m(c.href),xdm_c:e.channel,xdm_p:5}),name:y+e.channel+"_provider"}),f=D(e),f.fn=function(a){delete f.fn;h=a;d(function(){g.up.callback(!0)},0);return function(a){g.up.incoming(a,k)}}):(b.referrer&&m(b.referrer)!=x.xdm_e&&(a.top.location=x.xdm_e),h=a.frameElement.fn(function(a){g.up.incoming(a,
k)}),g.up.callback(!0))},init:function(){u(g.onDOMReady,g)}}};h.stack.NameTransport=function(a){function b(c){k.contentWindow.sendMessage(c,a.remoteHelper+(q?"#_3":"#_2")+a.channel)}function c(){q?(2===++v||!q)&&f.up.callback(!0):(b("ready"),f.up.callback(!0))}function e(a){f.up.incoming(a,K)}function g(){C&&d(function(){C(!0)},0)}var f,q,k,n,v,C,K,Q;return f={outgoing:function(a,c,d){C=d;b(a)},destroy:function(){k.parentNode.removeChild(k);k=null;q&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){q=
a.isHost;v=0;K=m(a.remote);a.local=B(a.local);q?(h.Fn.set(a.channel,function(b){q&&"ready"===b&&(h.Fn.set(a.channel,e),c())}),Q=t(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),r(a.props,{src:Q+"#"+a.channel,name:y+a.channel+"_provider"}),n=D(a)):(a.remoteHelper=a.remote,h.Fn.set(a.channel,e));var b=function(){var e=k||this;G(e,"load",b);h.Fn.set(a.channel+"_load",g);(function da(){"function"==typeof e.contentWindow.sendMessage?c():d(da,50)})()};k=D({props:{src:a.local+"#_4"+a.channel},onLoad:b})},
init:function(){u(f.onDOMReady,f)}}};h.stack.HashTransport=function(b){function c(){if(t){var a=t.location.href,b="",d=a.indexOf("#");-1!=d&&(b=a.substring(d));b&&b!=k&&(k=b,e.up.incoming(k.substring(k.indexOf("_")+1),K))}}var e,g,f,h,k,n,t,v,C,K;return e={outgoing:function(a,c){if(v){var d=b.remote+"#"+n++ +"_"+a;(g||!C?v.contentWindow:v).location=d}},destroy:function(){a.clearInterval(f);(g||!C)&&v.parentNode.removeChild(v);v=null},onDOMReady:function(){g=b.isHost;h=b.interval;k="#"+b.channel;n=
0;C=b.useParent;K=m(b.remote);if(g){r(b.props,{src:b.remote,name:y+b.channel+"_provider"});if(C)b.onLoad=function(){t=a;f=setInterval(c,h);e.up.callback(!0)};else{var Q=0,B=b.delay/50;(function ca(){if(++Q>B)throw Error("Unable to reference listenerwindow");try{t=v.contentWindow.frames[y+b.channel+"_consumer"]}catch(a){}t?(f=setInterval(c,h),e.up.callback(!0)):d(ca,50)})()}v=D(b)}else t=a,f=setInterval(c,h),C?(v=parent,e.up.callback(!0)):(r(b,{props:{src:b.remote+"#"+b.channel+new Date,name:y+b.channel+
"_consumer"},onLoad:function(){e.up.callback(!0)}}),v=D(b))},init:function(){u(e.onDOMReady,e)}}};h.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,g="";return b={incoming:function(a,f){var m=a.indexOf("_"),l=a.substring(0,m).split(",");a=a.substring(m+1);l[0]==d&&(g="",c&&(c(!0),c=null));0<a.length&&(b.down.outgoing(l[1]+","+d+"_"+g,f),e!=l[1]&&(e=l[1],b.up.incoming(a,f)))},outgoing:function(a,f,m){g=a;c=m;b.down.outgoing(e+","+ ++d+"_"+a,f)}}};h.stack.QueueBehavior=function(a){function b(){if(a.remove&&
0===f.length)aa(c);else if(!m&&!(0===f.length||k)){m=!0;var e=f.shift();c.down.outgoing(e.data,e.origin,function(a){m=!1;e.callback&&d(function(){e.callback(a)},0);b()})}}var c,f=[],m=!0,h="",k,n=0,t=!1,v=!1;return c={init:function(){p(a)&&(a={});a.maxLength&&(n=a.maxLength,v=!0);a.lazy?t=!0:c.down.init()},callback:function(a){m=!1;var d=c.up;b();d.callback(a)},incoming:function(b,d){if(v){var f=b.indexOf("_"),g=parseInt(b.substring(0,f),10);h+=b.substring(f+1);0===g&&(a.encode&&(h=e(h)),c.up.incoming(h,
d),h="")}else c.up.incoming(b,d)},outgoing:function(d,e,m){a.encode&&(d=g(d));var h=[],k;if(v){for(;0!==d.length;)k=d.substring(0,n),d=d.substring(k.length),h.push(k);for(;k=h.shift();)f.push({data:h.length+"_"+k,origin:e,callback:0===h.length?m:null})}else f.push({data:d,origin:e,callback:m});t?c.down.init():b()},destroy:function(){k=!0;c.down.destroy()}}};h.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2);c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,
g){var m=f.indexOf("_");-1===m?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,m)===e&&c.up.incoming(f.substring(m+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}};h.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";f.down.outgoing(g.stringify(a))}function d(a,b){var e=Array.prototype.slice;return function(){var d=arguments.length,f,g={method:b};0<d&&"function"===typeof arguments[d-1]?(1<d&&"function"===
typeof arguments[d-2]?(f={success:arguments[d-2],error:arguments[d-1]},g.params=e.call(arguments,0,d-2)):(f={success:arguments[d-1]},g.params=e.call(arguments,0,d-1)),h[""+ ++m]=f,g.id=m):g.params=e.call(arguments,0);a.namedParams&&1===g.params.length&&(g.params=g.params[0]);c(g)}}function e(a,b,d,f){if(d){var g,m;b?(g=function(a){g=S;c({id:b,result:a})},m=function(a,d){m=S;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d);c(e)}):g=m=S;"[object Array]"!==Object.prototype.toString.call(f)&&
(f=[f]);try{var h=d.method.apply(d.scope,f.concat([g,m]));p(h)||g(h)}catch(k){m(k.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}var f,g=b.serializer||T(),m=0,h={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var m=h[f.id];f.error?m.error&&m.error(f.error):m.success&&m.success(f.result);delete h[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&
(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}};O.easyXDM=h})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);YUI.add("thirdparty-easyxdm",function(a){},"2.4.16");
YUI.add("widget-stack",function(a,b){function c(b){this._stackNode=this.get(k);this._stackHandles={};a.after(this._renderUIStack,this,n);a.after(this._syncUIStack,this,H);a.after(this._bindUIStack,this,u)}var d=a.Lang,e=a.UA,g=a.Node,f=a.Widget,k="boundingBox",n="renderUI",u="bindUI",H="syncUI";c.ATTRS={shim:{value:6==e.ie},zIndex:{value:0,setter:"_setZIndex"}};c.HTML_PARSER={zIndex:function(a){return this._parseZIndex(a)}};c.SHIM_CLASS_NAME=f.getClassName("shim");c.STACKED_CLASS_NAME=f.getClassName("stacked");
c.SHIM_TEMPLATE='<iframe class="'+c.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';c.prototype={_syncUIStack:function(){this._uiSetShim(this.get("shim"));this._uiSetZIndex(this.get("zIndex"))},_bindUIStack:function(){this.after("shimChange",this._afterShimChange);this.after("zIndexChange",this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(c.STACKED_CLASS_NAME)},_parseZIndex:function(a){a=
!a.inDoc()||"static"===a.getStyle("position")?"auto":a.getComputedStyle("zIndex");return"auto"===a?null:a},_setZIndex:function(a){d.isString(a)&&(a=parseInt(a,10));d.isNumber(a)||(a=0);return a},_afterShimChange:function(a){this._uiSetShim(a.newVal)},_afterZIndexChange:function(a){this._uiSetZIndex(a.newVal)},_uiSetZIndex:function(a){this._stackNode.setStyle("zIndex",a)},_uiSetShim:function(a){a?(this.get("visible")?this._renderShim():this._renderShimDeferred(),6==e.ie&&this._addShimResizeHandlers()):
this._destroyShim()},_renderShimDeferred:function(){this._stackHandles.shimdeferred=this._stackHandles.shimdeferred||[];this._stackHandles.shimdeferred.push(this.on("visibleChange",function(a){a.newVal&&this._renderShim()}))},_addShimResizeHandlers:function(){this._stackHandles.shimresize=this._stackHandles.shimresize||[];var a=this.sizeShim,b=this._stackHandles.shimresize;b.push(this.after("visibleChange",a));b.push(this.after("widthChange",a));b.push(this.after("heightChange",a));b.push(this.after("contentUpdate",
a))},_detachStackHandles:function(a){a=this._stackHandles[a];var b;if(a&&0<a.length)for(;b=a.pop();)b.detach()},_renderShim:function(){var a=this._shimNode,b=this._stackNode;a||(a=this._shimNode=this._getShimTemplate(),b.insertBefore(a,b.get("firstChild")),this._detachStackHandles("shimdeferred"),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get("parentNode").removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles("shimdeferred"),this._detachStackHandles("shimresize"))},
sizeShim:function(){var a=this._shimNode,b=this._stackNode;a&&(6===e.ie&&this.get("visible"))&&(a.setStyle("width",b.get("offsetWidth")+"px"),a.setStyle("height",b.get("offsetHeight")+"px"))},_getShimTemplate:function(){return g.create(c.SHIM_TEMPLATE,this._stackNode.get("ownerDocument"))}};a.WidgetStack=c},"3.10.1",{requires:["base-build","widget"],skinnable:!0});
YUI.add("squarespace-dialog-check-template",function(a){var b=a.Handlebars;(function(){var a=b.template;(b.templates=b.templates||{})["dialog-check.html"]=a(function(a,b,c,f,k){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);k=k||{};var n,u=this.escapeExpression;a='<div class="check-element ';if((f=c["if"].call(b,b.data,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"active"},k),data:k}))||0===f)a+=f;a+='">\n  ';if((n=c["if"].call(b,(f=b.strings,null==f||!1===f?f:f.title),
{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,d;return c=""+('\n    <div class="title">'+u((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===typeof d?d.apply(a):d))+"</div>\n  ")},k),data:k}))||0===n)a+=n;a+="\n  ";if((n=c["if"].call(b,(f=b.strings,null==f||!1===f?f:f.description),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d;return c=""+('\n    <div class="description">'+u((d=(d=a.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(a):
d))+"</div>\n  ")},k),data:k}))||0===n)a+=n;return a+"\n</div>"})})();a.Handlebars.registerPartial("dialog-check.html".replace("/","."),b.templates["dialog-check.html"])},"1.0",{requires:["handlebars-base"]});YUI.add("squarespace-system-page",function(a){},"1.0",{requires:["squarespace-common","squarespace-dialog","squarespace-login","squarespace-form-lightbox","squarespace-trial-alert-dialog"]});
YUI.add("squarespace-login",function(a){window.SQUARESPACE_LOGIN||(window.SQUARESPACE_LOGIN=Singleton.create({ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount);this.params=this.defaultParams={redirectAfterCancel:!0,redirectAfterLogin:!0,minimal:!1,cancelable:!0,overlayOpacity:0.8,disableOverlayCancel:!1,forgotPassword:!0,disableCreateAccount:!0,globalLogin:!0,allowSocialLogins:!0};this.dialogParameters=null},configure:function(b){this.params=
this.defaultParams;this.params=a.merge(this.params,b)},reset:function(){this.params=this.defaultParams},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},toggle:function(){this.loginDialog&&this.loginDialog.isVisible()?this.loginDialog.cancel():this.show()},_getNoLoginDialogParmas:function(){return{style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:400,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,
tabs:[{title:"Squarespace Login",icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This browser does not accept cookies, which is a requirement for login. You can allow cookies by changing your browser's settings."}}]}]}},showSquarespaceLogo:function(){var b=a.one(".six-icon");b||(b=a.Node.create('<div class="six-icon"></div>'),b.addClass("animated-squarespace-logo"),b.appendChild(a.Node.create('<div class="six-icon-inside"></div>')),
a.one(document.body).append(b));var c=new Image;c.onload=function(){var d=b.one(".six-icon-inside");d.setStyles({backgroundImage:"url("+c.src+")"});a.later(500,this,function(){JSTween.tween(d.getDOMNode(),{transform:{start:"scale(1.4) rotate(10deg)",stop:"scale(1) rotate(0deg)",time:0,duration:2,effect:"easeOut"},opacity:{start:0,stop:100,duration:1,time:0}});JSTween.play()})};c.src="/universal/images-v6/logo/logo.png"},buildDialog:function(){if(a.Squarespace.Utils.areCookiesEnabled()){var b=a.bind(function(b){return a.bind(function(a){this.loginDialog.getField(b).show(a)},
this)},this);this.dialogParameters={name:"login",style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:400,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:"Squarespace Login",icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{type:"multi-frame",name:"login-method-frame",initialFrame:"squarespace",frames:{squarespace:{fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",
"strings.placeholder":"Login or Email",required:!0,mailcheck:!0,submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"password","strings.placeholder":"Password",required:!0,password:!0,submitOnEnter:!0}},{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Check,config:{width:220,name:"remember",strings:{title:"Stay Logged In",description:"Keep me logged in until I log out."}}},{type:"link",width:88,name:"passwordReset",className:"forgotpassword",title:"Forgot Password?",align:"right",
padding:[0,0]}]}]},facebook:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"facebook-login",text:'<div class="facebook-login-button"></div><div class="big-login-caption">Click above to be redirected to Facebook.</div>'}}]},twitter:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"twitter-login",text:'<div class="twitter-login-button"></div><div class="big-login-caption">Click above to be redirected to Twitter.</div>'}}]},google:{fields:[{ctor:a.Squarespace.DialogFields.Description,
config:{name:"google-login",text:'<div class="google-login-button"></div><div class="big-login-caption">Click above to be redirected to Google.</div>'}}]}}},{type:"hidden",name:"inviteCode"},{type:"hidden",name:"srcUrl"}]}]};this.params.allowSocialLogins?(this.dialogParameters.tabs[0].fields.splice(0,0,{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"login-method",optionClickCb:b("login-method-frame"),defaultValue:"squarespace",className:"round square",titleStyle:"top",options:[{icon:"squarespace",
title:"Squarespace",value:"squarespace"},{icon:"twitter",title:"Twitter",value:"twitter"},{icon:"facebook",title:"Facebook",value:"facebook"},{icon:"google",title:"Google",value:"google"}]}}),this.dialogParameters.width=460):this.dialogParameters.width=400;this.params.minimal?(this.dialogParameters.style="transparent",this.dialogParameters.top=300,this.dialogParameters.buttons=[this.params.cancelable?{type:"cancel",title:"Cancel"}:null,!this.params.disableCreateAccount?{type:"createAccount",title:"Create Squarespace Account"}:
null,{type:"saveAndClose",title:"Login"}]):this.dialogParameters.buttons=[!this.params.disableOverlayCancel?{type:"cancel",title:"Cancel"}:null,!this.params.disableCreateAccount?{type:"createAccount",title:"Create Squarespace Account"}:null,{type:"saveAndClose",title:"Login"}]}else this.dialogParameters=this._getNoLoginDialogParmas()},buildCommentDialog:function(b,c,d){var e=a.bind(function(b){return a.bind(function(a){this.loginDialog.getField(b).show(a)},this)},this);this.dialogParameters={name:"comment",
style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:460,height:275,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:b,icon:"/universal/images-v6/standard/icon_comments_24_light.png",fields:[{type:"hidden",name:"inviteCode"},{type:"hidden",name:"srcUrl"},{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"login-method",optionClickCb:e("login-method-frame"),className:"round square",
data:"squarespace",options:[{icon:"squarespace",title:"Squarespace",value:"squarespace"},{icon:"twitter",title:"Twitter",value:"twitter"},{icon:"facebook",title:"Facebook",value:"facebook"},{icon:"google",title:"Google",value:"google"}]}},{type:"multi-frame",name:"login-method-frame",initialFrame:"squarespace",frames:{squarespace:{fields:[{type:"text",required:!0,name:"email",title:"Email Address",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"text",required:!0,name:"password",
password:!0,title:"Password",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"splitter",fields:[{type:"check",width:0.7,required:!0,name:"remember",title:"Stay Signed In",padding:[5,0],description:"Keep you signed in for 2 weeks."},{type:"link",width:0.3,name:"passwordReset",className:"forgotpassword",title:"Forgot Password?",align:"right"}]}]},facebook:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"facebook-login",text:'<div class="facebook-login-button"></div><div class="big-login-caption">Click above to be redirected to Facebook.</div>'}}]},
twitter:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"twitter-login",text:'<div class="twitter-login-button"></div><div class="big-login-caption">Click above to be redirected to Twitter.</div>'}}]},google:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"google-login",text:'<div class="google-login-button"></div><div class="big-login-caption">Click above to be redirected to Google.</div>'}}]}}}]}]};this.params.minimal?(this.dialogParameters.style="transparent",
this.dialogParameters.width=460,this.dialogParameters.height=275,this.dialogParameters.top=300,this.dialogParameters.buttons=[{type:"createAccount",title:"Create Squarespace Account"},{type:"saveAndClose",title:"Login"}]):this.dialogParameters.buttons=[!this.params.disableOverlayCancel?{type:"cancel",title:"Cancel"}:null,{type:"createAccount",title:"Create Squarespace Account"},{type:"saveAndClose",title:c||"Login"}];d&&this.dialogParameters.tabs[0].fields.forEach(function(b){a.Lang.isValue(b.config)&&
"login-method"===b.config.name&&(b.config.options.unshift({icon:"guest",title:"Guest",value:"guest"}),b.config.data="guest");"login-method-frame"===b.name&&(b.initialFrame="guest",b.frames.guest={fields:[{type:"text",name:"displayName",required:!0,title:"Your Name",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"text",name:"anonEmail",title:"Email (Optional)",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,mailcheck:!0,style:"major"},{type:"text",required:!1,
name:"authorUrl",title:"Website URL (Optional)",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"}]})},this)},showCommentLogin:function(a,c,d){this.params.redirectAfterLogin=!1;this.params.redirectAfterCancel=!1;this.loginDialog&&(this.dialogParameters=this.loginDialog=null);this.buildCommentDialog(a,c,d);this.show()},show:function(){a.use("squarespace-dialog","squarespace-external-authentication","squarespace-dialog-hidden",a.bind(function(a){a.one("html").addClass("squarespace-cameron");
if(!this.loginDialog||!this.loginDialog.isVisible())this.loginDialog&&(this.loginDialog.destroy(),this.dialogParameters=this.loginDialog=null),null===this.dialogParameters&&this.buildDialog(),this.loginDialog=new a.Squarespace.EditingDialog(this.dialogParameters),this.loginDialog.on(["cancel-clicked","overlay-click"],function(){window.SQUARESPACE_LOGIN.fire("cancel");this.reset()},this),this.loginDialog.on("loading",function(){var c=a.Cookie.get("email");window.SQUARESPACE_LOGIN.params.inviteCode&&
(window.SQUARESPACE_LOGIN.showBigText("login"),c=this.params.invitation.email,this.params.redirectAfterLogin=!0);c?this.loginDialog.setInitialData({email:c,inviteCode:window.SQUARESPACE_LOGIN.params.inviteCode,remember:!0}):this.loginDialog.setInitialData({inviteCode:window.SQUARESPACE_LOGIN.params.inviteCode,remember:!0})},this),this.loginDialog.on("click",function(c){this.externalAuth||(this.externalAuth=new a.Squarespace.ExternalAuthentication({useLoginFlag:!0}),this.externalAuth.on("completed",
function(){a.Data.get({url:"/api/auth/CheckAuthentication",secure:!0,data:{srcUrl:document.location.href},success:function(a){Static.SQUARESPACE_CONTEXT.permissions=a.permissions;a.member&&(Static.SQUARESPACE_CONTEXT.authenticatedAccount=a.member,window.SQUARESPACE_LOGIN.onLoginComplete(a.member,a.redirectUrl),this.close())}},this)},this));c.target.ancestor(".twitter-login-button",!0)?this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.TWITTER):c.target.ancestor(".facebook-login-button",
!0)?this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.FACEBOOK):c.target.ancestor(".google-login-button",!0)&&this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.GOOGLEAUTH2)}),this.loginDialog.on("button-createAccount",function(){this.loginDialog.temporaryHide();this.createSquarespaceAccount()},this),this.loginDialog.on("link-passwordReset",function(){this.loginDialog.temporaryHide();var a=this.loginDialog.getData();this.passwordReset(a.email)},this),this.loginDialog.on("datachange",
function(){this.getData().remember||a.Cookie.remove("email");this.hideErrors()}),this.loginDialog.on("cancel",function(){this.params.redirectAfterCancel&&!SQUARESPACE_LOGIN.params.externalSwitcher&&(document.location.href="http://"+document.location.host+"/")}),this.loginDialog.on("send-requested",function(){var c=this.loginDialog.getData();if("guest"===c["login-method"]){var d=new Date;d.setSeconds(d.getSeconds()+30);a.Cookie.set("email",c.anonEmail,{path:"/",expires:d});a.Cookie.set("displayName",
c.displayName,{path:"/",expires:d});a.Cookie.set("websiteUrl",c.authorUrl,{path:"/",expires:d});this.fire("guestLogin");this.loginDialog.close()}else-1===c.email.indexOf("@")?a.use("thirdparty-sha1",a.bind(function(a){var b=b64_sha1(c.password);10<=a.UA.ie||23<=a.UA.gecko?this.loginRPCProvider.v5login(c.email,b):this._v5login(c.email,b)},this)):((d=this.loginDialog.getField("srcUrl"))&&"comment"!==this.loginDialog.getName()&&d.setValue(document.location.href),this._setLoginDialogLoadingState(!0),
this.loginDialog.once("show-errors",function(){this._setLoginDialogLoadingState(!1)},this),a.Data.sendForm(this.loginDialog,{url:"/api/auth/Login",secure:!0,success:function(d){c.remember&&a.Cookie.set("email",c.email,{path:"/",expires:new Date("January 1, 2030")});a.Cookie.remove("displayName");Static.SQUARESPACE_CONTEXT.permissions=d.permissions;Static.SQUARESPACE_CONTEXT.managedWebsites=d.managedWebsites;Static.SQUARESPACE_CONTEXT.authenticatedAccount=d.account;this.onLoginComplete(d.account,d.redirectUrl);
this.loginDialog.close()}},this))},this),this.loginDialog.setInitialData({"login-method":"squarespace",login:a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]),password:"",remember:!0,inviteCode:Static.SQUARESPACE_CONTEXT.inviteCode}),this.loginDialog.isVisible()||(this.loginDialog.show(),this.loginDialog.once("shown",function(){this.loginDialog.getField("email").focus()},this))},this))},_setLoginDialogLoadingState:function(b){var c=this.loginDialog.bodyEl.one(".spinner-wrapper");
c||(c=this.loginDialog.bodyEl.appendChild('<div class="spinner-wrapper"></div>'),new a.Squarespace.Spinner({size:"large",render:c}));b?(this.loginDialog.getField("email").disable(),this.loginDialog.getField("password").disable(),this.loginDialog.getField("remember").hide(),this.loginDialog.getField("passwordReset").hide(),this.loginDialog.buttonHolder.setStyles({opacity:0}),c.setStyles({opacity:1})):(this.loginDialog.getField("email").enable(),this.loginDialog.getField("password").enable(),this.loginDialog.getField("remember").show(),
this.loginDialog.getField("passwordReset").show(),this.loginDialog.buttonHolder.setStyles({opacity:1}),c.setStyles({opacity:0}))},createSquarespaceAccount:function(){if(!this.createAccountDialog){var b={name:"squarespace-signup",loadingText:"Loading...",savingText:"Submitting...",closingText:"",style:"flyout",overlay:this.params.overlayOpacity,width:460,top:200,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,title:"Create Squarespace Account",
buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Create Login"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Below you can sign up for a Squarespace account.</strong>  Squarespace accounts let you keep a profile for editing and commenting on Squarespace websites.",padding:[0,15]}},{type:"splitter",fields:[{type:"text",width:0.5,required:!0,name:"firstName",title:"First Name",style:"title",titleStyle:"inline",submitOnEnter:!0},{type:"text",
width:0.5,required:!0,name:"lastName",title:"Last Name",style:"title",titleStyle:"inline",submitOnEnter:!0}]},{type:"text",required:!0,name:"email",title:"your@email.com",style:"title",titleStyle:"inline",submitOnEnter:!0},{type:"text",required:!0,name:"password",password:!0,title:"Password",style:"title",titleStyle:"inline",submitOnEnter:!0}]}]};this.params.minimal?(b.style="transparent",b.tabs[0].fields[0]=null,b.top=260):(b.style=null,b.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png");
this.createAccountDialog=new a.Squarespace.EditingDialog(b);this.createAccountDialog.on("loading",function(){this.showBigText("create")},this);this.createAccountDialog.on("cancel",function(){this.showBigText("login");this.loginDialog.temporaryShow()},this);this.createAccountDialog.on("send-requested",function(){var b=this.createAccountDialog.getData();a.Data.sendForm(this.createAccountDialog,{url:"/api/auth/CreateSquarespaceAccount",secure:!0,success:function(a){this.createAccountDialog.close();this.loginDialog.temporaryShow();
this.loginDialog.getField("email").setValue(b.email);this.loginDialog.getField("password").setValue(b.password);this.loginDialog.save()}},this)},this)}this.params.invitation&&this.createAccountDialog.setInitialData({email:this.params.invitation.email});this.createAccountDialog.show()},passwordReset:function(b){if(!this.passwordResetDialog){var c={subtext:"Squarespace",style:"minimal",overlay:0,width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,
buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Send Email"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Please enter the email address that you used when creating your account.  An email will be sent to that address with further instructions on how to reset your password."}},{ctor:a.Squarespace.DialogFields.Text,config:{required:!0,name:"email","strings.placeholder":"your@email.com",submitOnEnter:!0}}]}]};c.tabs[0].title="Password Reset";
c.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";this.passwordResetDialog=new a.Squarespace.EditingDialog(c);this.passwordResetDialog.on("loading",function(){},this);this.passwordResetDialog.on("close",function(){this.showBigText("login");this.loginDialog.temporaryShow()},this);this.passwordResetDialog.on("send-requested",function(){this.passwordResetDialog.getData();a.Data.sendForm(this.passwordResetDialog,{url:"/api/auth/PasswordReset",secure:!0,success:function(a){this.passwordResetDialog.close();
this.passwordResetDone(a)}},this)},this)}this.passwordResetDialog.setInitialData({email:b?b:""});this.passwordResetDialog.show()},passwordResetDone:function(b){b={subtext:"Squarespace",style:"minimal",overlay:0,width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,buttons:[{type:"done",title:"Back to Login"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"You have been sent an email with further instructions on resetting your password."}}]}]};
b.tabs[0].title="Password Reset";b.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";this.passwordResetDialogDone=new a.Squarespace.EditingDialog(b);this.passwordResetDialogDone.on("button-done",function(){this.passwordResetDialogDone.close();this.showBigText("login");this.loginDialog.temporaryShow()},this);this.passwordResetDialogDone.show()},getPasswordResetDialogParams:function(b){var c={loadingText:"Loading...",savingText:"",closingText:"",style:"minimal",overlay:this.params.overlayOpacity,
width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,buttons:[b.invalidRecoveryId?{type:"login",title:"Back To Login"}:{type:"saveAndClose",title:"Update"}],tabs:[{title:"",fields:[]}]};c.tabs[0].fields=b.invalidRecoveryId?[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This URL is no longer valid, please go back to login and start over."}}]:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Hi, <strong>"+
a.Escape.html(b.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"Please enter your new account password for the account with email: <strong>"+b.email+"</strong>."}},{type:"text",required:!0,name:"password",password:!0,title:"New Password",style:"title",titleStyle:"inline",submitOnEnter:!0}];c.tabs[0].title="Password Reset";c.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";return c},bindPasswordResetDialog:function(b,c){b.on("button-login",function(){document.location.replace(document.location.pathname)});
b.on("send-requested",function(){var c=this.dialog.getData();c.email=this.params.email;c.recoveryId=this.params.recoveryId;a.Data.sendForm(this.dialog,{data:c,url:"/api/auth/PasswordReset",secure:!0,success:function(a){this.dialog.close();document.location.replace(document.location.pathname)}},{that:this.that,dialog:b})},{dialog:b,params:c})},passwordResetConfirmation:function(b){var c=this.getPasswordResetDialogParams(b),c=new a.Squarespace.EditingDialog(c);this.bindPasswordResetDialog(c,b);c.show()},
accountActivationConfirmation:function(b){b.recoveryId=b.activationId;var c=this.getPasswordResetDialogParams(b);b.invalidRecoveryId||(c.tabs[0].fields=[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Welcome, <strong>"+a.Escape.html(b.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"To Activate your account you need to first set your account password associated with the email: <strong>"+b.email+"</strong>."}},{type:"text",required:!0,name:"password",
password:!0,title:"New Password",style:"title",titleStyle:"inline",submitOnEnter:!0}],c.tabs[0].title="Activate Account");c=new a.Squarespace.EditingDialog(c);this.bindPasswordResetDialog(c,b);c.show()},showBigText:function(b){"login"===b?a.one(".bigtext")&&(a.one(".bigtext").one(".title").set("innerHTML","Accept Invitation"),a.one(".bigtext").one(".description").set("innerHTML","You have been invited to manage this account by <strong>"+a.Escape.html(this.params.invitingMember.displayName)+"</strong>.  <br/>Sign in or create an account below to get started.")):
"create"===b&&a.one(".bigtext")&&(a.one(".bigtext").one(".title").set("innerHTML","Create Account"),a.one(".bigtext").one(".description").set("innerHTML","Use this form to create a new Squarespace account for use across our system."))},onLoginComplete:function(b,c){window.SQUARESPACE_LOGIN.account=b;a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG);SQUARESPACE_LOGIN.loginRPCProvider&&c?window.SQUARESPACE_LOGIN.fire("iframeLogin",c):this.params.redirectAfterLogin||
this.params.reloadAfterLogin?c?c===window.location.href?window.location.reload():window.location.replace(c):(new a.Squarespace.Alert).show("No Administrative Privileges","Your Squarespace account is not listed as an administrator on any sites."):(window.SQUARESPACE_LOGIN.fire("login"),this.params.globalLogin&&a.Global.fire("squarespace:login"),this.reset())},_v5login:function(b,c){var d=this.loginDialog||this.loginRPCConsumer;a.Data.post({xdr:{credentials:!0},url:"http://squarespace5.squarespace.com/process/service/CredentialCheck",
data:{A:b,B:c,from6:!0},success:function(e){a.Data.post({xdr:{credentials:!0},url:"http://"+b+".squarespace.com/process/Login",data:{username:b,encryptedPassword:c,from6:!0},success:function(a){"success"===a.result&&top.location.replace("http://"+b+".squarespace.com")},failure:function(a){d.showErrors(a.errors)}},this)},failure:function(a){a.errors?d.showErrors(a.errors):d.showErrors({password:"There was an unexpected error. Please try again later."})}},this)},_showErrors:function(a){this.loginDialog.showErrors(a)},
_buildIFrameLoginDialog:function(){this.buildDialog();this.dialogParameters.overlay=0.001},_showLoginInIframe:function(b,c,d){SQUARESPACE_LOGIN.params.disableCreateAccount=!0;SQUARESPACE_LOGIN.params.externalSwitcher=!0;SQUARESPACE_LOGIN.params.allowSocialLogins=!1;this.loginDialog&&(this.dialogParameters=this.loginDialog=null);this._buildIFrameLoginDialog(b,c,d);this.show();SQUARESPACE_LOGIN.on(["close","cancel"],function(){SQUARESPACE_LOGIN.loginRPCProvider.hide()});SQUARESPACE_LOGIN.on("iframeLogin",
function(b){b+="&redirectUrl=/config/iframelogin";var c=a.Node.create('<iframe style="position:fixed; top:-2000px;" src="'+b+'"></div>');c.on("load",function(){var a=b.substring(0,b.indexOf("/",10));SQUARESPACE_LOGIN.loginRPCProvider.redirect(a+"/config")});a.one("body").append(c)})},loadRPCProvider:function(){try{this.loginRPCProvider=new easyXDM.Rpc({},{local:{show:function(){SQUARESPACE_LOGIN._showLoginInIframe()},showErrors:a.bind(this._showErrors,this)},remote:{redirect:{},hide:{},remove:{},
v5login:{}}})}catch(b){console.log("failed to load RPC",b)}},_loadRPCConsumer:function(b,c){this.loginRPCConsumer=new easyXDM.Rpc({remote:"https://oauth."+Static.SQUARESPACE_CONTEXT.appDomain+"/config/iframeLogin",container:b,onReady:c,props:{style:{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:30040}}},{local:{redirect:function(a){window.location.replace(a)},hide:function(){SQUARESPACE_LOGIN.iFrameLoginHide()},remove:function(){SQUARESPACE_LOGIN.iFrameLoginRemove()},v5login:a.bind(this._v5login,
this)},remote:{show:{},showErrors:{}}})},iFrameLoginLoad:function(b){var c=a.Node.create('<div class="login-wrapper hidden" ></div>');a.one("body").append(c);this._loadRPCConsumer(c.getDOMNode(),b)},iFrameLoginShow:function(b){b&&b.preventDefault();this.overlay=new a.Squarespace.ConfirmationDialog({screenOverlayOpacity:0.8,zIndex:3E4});this.overlay.showScreenOverlay();this.loginRPCConsumer?this._iFrameLoginShow():SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameLoginShow,this))},_iFrameLoginShow:function(){this.loginRPCConsumer.show();
a.one(".login-wrapper").removeClass("hidden")},iFrameLoginHide:function(){this.overlay.hideScreenOverlay();a.one(".login-wrapper").addClass("hidden")},iFrameLoginRemove:function(){this.loginRPCConsumer.destroy();delete this.loginRPCConsumer;a.one(".login-wrapper").remove()}}),a.augment(window.SQUARESPACE_LOGIN,a.EventTarget))},"1.0",{requires:"squarespace-util squarespace-dialog squarespace-dialog-hidden squarespace-external-authentication squarespace-enum thirdparty-easyxdm thirdparty-sha1 squarespace-dialog-description squarespace-external-authentication squarespace-dialog-multi-option squarespace-dialog-check".split(" ")});
YUI.add("squarespace-dialog-text",function(a){var b=a.namespace("Squarespace.DialogFields").Text=a.Base.create("text",a.Squarespace.DialogField2,[],{renderUI:function(){b.superclass.renderUI.call(this);var a=this.get("name"),c=this.get("autocompleteType");this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",this.get("password")?"password":"text");a&&this._textField.setAttribute("name",
a);c&&this._textField.setAttribute("x-autocompletetype",c);this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this.get("data"))},bindUI:function(){b.superclass.bindUI.call(this);this.get("id");this.after("dataChange",this._afterDataChange,this);this._textField.after("valuechange",this._afterValueChange,this);var c=this._textField.getDOMNode(),d="addEventListener";a.Lang.isFunction(c.attachEvent)&&(d="attachEvent");c[d]("focus",this._afterFocus);c[d]("blur",a.bind(this._afterBlur,
this));this._textField.on("click",function(a){a.halt()});this._textField.after("keyup",function(a){13===a.keyCode&&this.get("submitOnEnter")&&(this.fire("submit"),(a=this.get("dialog"))&&a.saveAndClose())},this);!0===this.get("mailcheck")&&this._textField.plug(a.Squarespace.Plugin.MailCheck,{field:this})},syncUI:function(){b.superclass.syncUI.call(this);var a=this.get("strings.placeholder");a&&this._textField.setAttribute("placeholder",a)},getErrors:function(){var a=this.get("data");return this.get("validator")(a)?
this.get("required")&&this.isEmpty()?[this.get("strings.requiredFieldEmptyMessage")]:[]:[this.get("strings.validationFailMessage")]},isEmpty:function(){return""===this.get("data")},focus:function(){b.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},blur:function(){b.superclass.blur.call(this);this.get("rendered")&&this._textField.blur()},disable:function(){b.superclass.disable.call(this);this.get("rendered")&&
this._textField.setAttribute("disabled","disabled")},enable:function(){b.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},_afterDataChange:function(a){a.dataSync||this._textField.set("value",a.newVal||"",{dataSync:!0});this.hideError()},_afterValueChange:function(a){a.dataSync||this.set("data",a.newVal,{dataSync:!0})},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!0)},_afterBlur:function(){"undefined"!==
typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!1);this.set("data",this._textField.get("value"),{dataSync:!0})}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:"This must be a string.",requiredFieldEmptyMessage:"This is a required field."}},data:{value:"",setter:function(b){a.Lang.isValue(b)||(b="");return b},validator:function(b){return a.Lang.isString(b)||!a.Lang.isValue(b)}},validator:{value:a.Lang.isString},password:{value:!1,
validator:a.Lang.isBoolean},submitOnEnter:{value:!1,validator:a.Lang.isBoolean},autocompleteType:a.Squarespace.AutocompleteTypeATTR,mailcheck:{value:!1,validator:a.Lang.isBoolean},maxLength:{value:null},readOnly:{value:!1},selectAllOnFocus:{value:!1}}});a.Squarespace.DialogFields.LabeledText=a.Base.create("labeledText",a.Squarespace.DialogFields.Text,[a.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var c=a.Squarespace.DialogFields.MoneyText=
a.Base.create("moneyText",a.Squarespace.DialogFields.LabeledText,[],{renderUI:function(){c.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var a=this.get("contentBox").one("input");a.on("valuechange",function(){this.set("data",a.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:a.Lang.isNumber},validator:{value:a.Lang.isNumber},prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}}}}),
d=a.namespace("Squarespace.DialogFields").TimeRange=a.Base.create("timeRange",a.Squarespace.DialogFields.LabeledText,[],{bindUI:function(){d.superclass.bindUI.apply(this);this._textField.getDOMNode().addEventListener("blur",a.bind(this._validateAfterBlur,this))},_validateAfterBlur:function(a){a=this.get("errors");0<a.length?this.showError(a[0]):this.hideError()},_getErrors:function(){var b=[],c=this._textField;c&&(c=c.get("value"),(c=a.Squarespace.BusinessHoursUtils.parseMultipleTimeRange(c))?this.set("multipleTimeRange",
c):b.push(this.get("strings.errorMsg")));return b},_afterValueChange:function(){this.hideError()}},{CSS_PREFIX:"sqs-time-range",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{strings:{value:{errorMsg:"Could not parse time"}},data:{value:null,validator:a.Squarespace.AttrValidators.isMultipleTimeRange}}})},"1.0",{requires:"base base-build event-valuechange squarespace-dialog-field-2 squarespace-autocomplete-types squarespace-dialog-text-template squarespace-dialog-label squarespace-mailcheck squarespace-attr-validators".split(" ")});
YUI.add("squarespace-modal-dialog",function(a){a.namespace("Squarespace.Widgets").ModalDialog=a.Base.create("modalDialog",a.Widget,[a.WidgetParent,a.WidgetStack],{renderUI:function(){this.get("boundingBox").addClass("fade");this.get("contentBox").append('<header class="modal-dialog-title"></header><section class="modal-dialog-body"></section><footer class="modal-dialog-controls"></footer>');this._childrenContainer=this.get("contentBox").one(".modal-dialog-body")},bindUI:function(){this.get("contentBox");
this.after("visibleChange",this.syncUI,this);this.after("stringsChange",this.syncUI,this)},syncUI:function(){var b=this.get("contentBox");b.one(".modal-dialog-title").setContent(this.get("strings.title"));this.get("boundingBox").toggleClass("in",this.get("visible"));b=b.one(".modal-dialog-controls");b.empty();a.Array.each(this.get("buttons"),b.append,b)},_fadeAndDestroy:function(){this.hide();a.later(350,this,this.destroy)},_spawnChild:function(b){if(!a.instanceOf(b,a.Widget))throw"Can only spawn widget children.";
b.addTarget(this);this.hide();a.later(350,this,function(){b.once("destroy",function(){this.show()},this);b.show()})}},{CSS_PREFIX:"sqs-modal-dialog",ATTRS:{strings:{value:{title:""}},buttons:{value:[]},zIndex:{value:3E4}}})},"1.0",{requires:["base","widget","widget-parent","widget-stack","squarespace-responsive-modal"]});SQUARESPACE_ROLLUPS.push("squarespace-system-page");
